<style>{`
  .full_image {
    width: 750px;
    margin: 20px;
  }
`}</style>

import { Steps } from '@theme';
import * as NextSteps from '@lynx/NextSteps';

# 录制 Trace

本文将详细介绍如何使用 Devtool 工具录制 Lynx 页面性能数据，帮助你捕获页面的渲染流程和引擎执行细节，为后续的性能分析与问题定位提供可靠的数据支持。

## 准备工作

1. 安装 [Devtool 桌面应用](/guide/devtool/panels.html#run-lynx-devtool-desktop-application)；
2. 使用最新版的 [Lynx Explorer](https://github.com/lynx-family/lynx/releases) 或在你的应用中[集成 Lynx 开发版本](/guide/start/integrate-lynx-dev-version.html)；
3. 使用数据线连接调试设备；

## 录制 Trace 数据

<Steps>
#### 1. 选择 Trace
打开 Devtool 桌面应用，在顶部栏选择 **Trace**。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/select-lynx-trace-panel-latest2.png"
  alt="选择 Trace 面板"
  className="full_image"
/>

#### 2. 选择调试 App

在设备列表中选择需要进行性能分析的 App。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/select-target-app-latest.png"
  alt="选择调试 App"
  className="full_image"
/>

#### 3. 开始录制

点击 **Start** 开始录制。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/start-trace-latest.png"
  alt="开始录制 Trace"
  className="full_image"
/>

#### 4. 停止录制

点击 **Stop** 停止录制。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/stop-trace-latest.png"
  alt="停止录制 Trace"
  className="full_image"
/>

#### 5. 分析数据

停止录制后，trace 数据会自动显示以供性能分析。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/analyze-trace-latest.png"
  alt="分析 Trace"
  className="full_image"
/>

#### 6. 下载 trace 数据（可选）

如有需要，点击 **Download** 可将 trace 数据下载保存到本地。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/download-trace-latest.png"
  alt="下载 Trace"
  className="full_image"
/>

#### 7. 查看和管理历史 trace 数据

点击 **History** 按钮可查看历史录制的 Trace 数据。

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/history-trace-latest.png"
  alt="历史 Trace"
  className="full_image"
/>

你可以在历史 Trace 面板中选择**查看**、**下载**或**删除**历史 Trace。

</Steps>

### 常见问题

##### 点击 Start 按钮后提示：Current app does not integrate lynx and lynx-trace components with dev version, please integrate dev version first according to the following document

- 使用最新版 [LynxExplorer app](https://github.com/lynx-family/lynx/releases)，或在现有 App 中[集成 lynx 开发版本](/guide/start/integrate-lynx-dev-version.html)。

##### 点击 Start 按钮后提示：Tracing already started

- 正在录制 trace 数据，可以点击 **Stop** 按钮停止录制。

## Next Steps

<NextSteps.Root>

<NextSteps.Step
  href="/guide/devtool/trace/launch-trace"
  title="进阶用法"
  description="了解录制启动阶段的 Trace 和 JavaScript Profile 以及自定义 trace events 等高级功能"
/>

</NextSteps.Root>
