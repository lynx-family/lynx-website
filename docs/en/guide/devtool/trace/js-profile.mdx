<style>{`
  .full_image {
    width: 750px;
    margin: 20px;
  }
`}</style>

import { Steps } from '@theme';
import * as NextSteps from '@lynx/NextSteps';

# Analysis JavaScript

Trace supports recording detailed JavaScript profile data. A JavaScript Profile is a collection of stack traces sampled during execution, which is crucial for pinpointing performance hotspots and bottlenecks. This allows you to analyze [script](/guide/spec.html#javascript-script) execution performance.

<Steps>

### Click `JS Profile` and Select the correct scripts engine

Based on the background thread scripts engine used by your Lynx page, choose the appropriate value in the JS Profile selection.

- disable: Do not enable JavaScript profiling;
- [primjs](/guide/spec.html#primjs-vm): Enable profiling for the PrimJS JavaScript engine.
- [v8](/guide/spec.html#v8-javascript-core-quickjs-hermes-etc): Enable profiling for the V8 JavaScript engine.

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/choose-js-profile-type-latest.png"
  alt="Choose JS Profile Type"
  className="full_image"
/>

### Start recording

Click `Start` button to begin recording trace.

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/start-js-profile-trace-latest.png"
  alt="Start Recording JavaScript Profile"
  className="full_image"
/>

### Stop recording

When finished, click `Stop` button to end the recording.

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/stop-js-profile-trace-latest.png"
  alt="Stop Recording JavaScript Profile"
  className="full_image"
/>

### Decode JavaScript Profile Data using sourcemap (Optional)

If your scripts is [minified](/api/rspeedy/rspeedy.minify.js), you can use [sourcemap](/api/rspeedy/rspeedy.sourcemap.js) to decode profile data.

<img
  src="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/plugin/static/sourcemap-decode-latest.gif"
  alt="Decode JavaScript Profile"
  className="full_image"
/>
</Steps>

### FAQ

##### No JavaScript profile data after recording trace

- Make sure you have selected the correct script engine before starting recording.
- On iOS, ensure both Lynx DevTool and [PrimJS Debugging](/guide/start/integrate-lynx-devtool-advanced.html) are enabled.

##### No scripting resource found after clicking SourceMap Decode

- Ensure you start trace recording before opening the Lynx page so that the script resource name can be captured.
