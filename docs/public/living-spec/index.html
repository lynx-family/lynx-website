<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Lynx Living Spec</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
			border-bottom: 3px solid transparent;
			margin-bottom: -3px;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom-color: #054572;
			border-bottom-color: var(--toclink-underline);
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 4b8aed3f7, updated Thu Mar 6 12:35:01 2025 -0800" name="generator">
  <meta content="23b1874c4f1854712f6c226cc2194629cb762d9d" name="revision">
  <meta content="dark light" name="color-scheme">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Lynx Living Spec</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Living Document, <time class="dt-updated" datetime="2025-03-10">10 March 2025</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/partholon/lynx-website/issues/">GitHub</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" height="15" src="https://licensebuttons.net/p/zero/1.0/80x15.png" width="80"></a> To the extent possible under law, the editors have waived all copyright
and related or neighboring rights to this work.
In addition, as of 10 March 2025,
the editors have made this specification available under the <a href="https://www.openwebfoundation.org/the-agreements/the-owf-1-0-agreements-granted-claims/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at https://www.openwebfoundation.org/the-agreements/the-owf-1-0-agreements-granted-claims/owfa-1-0.
Parts of this work may be from another specification document.  If so, those parts are instead covered by the license of that specification document. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This module introduces living specification for Lynx.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#scope"><span class="secno">1.1</span> <span class="content">Scope</span></a>
      <li>
       <a href="#people"><span class="secno">1.2</span> <span class="content">People</span></a>
       <ol class="toc">
        <li><a href="#scripting-developer"><span class="secno">1.2.1</span> <span class="content"><span>Scripting Developer</span></span></a>
        <li><a href="#scripting-framework-developer"><span class="secno">1.2.2</span> <span class="content"><span>Scripting Framework Developer</span></span></a>
        <li><a href="#lynx-developer"><span class="secno">1.2.3</span> <span class="content"><span>Lynx Developer</span></span></a>
        <li><a href="#native-developer"><span class="secno">1.2.4</span> <span class="content"><span>Native Developer</span></span></a>
        <li><a href="#engine-developer"><span class="secno">1.2.5</span> <span class="content"><span>Engine Developer</span></span></a>
        <li><a href="#lynx-contributor"><span class="secno">1.2.6</span> <span class="content"><span>Lynx Contributor</span></span></a>
       </ol>
     </ol>
    <li>
     <a href="#common-infrastructure"><span class="secno">2</span> <span class="content"><span>Common Infrastructure</span></span></a>
     <ol class="toc">
      <li>
       <a href="#high-level-concept"><span class="secno">2.1</span> <span class="content">High-level Concept</span></a>
       <ol class="toc">
        <li><a href="#app"><span class="secno">2.1.1</span> <span class="content"><span>APP</span></span></a>
        <li><a href="#container"><span class="secno">2.1.2</span> <span class="content"><span>Container</span></span></a>
        <li><a href="#sdk"><span class="secno">2.1.3</span> <span class="content"><span>SDK</span></span></a>
        <li><a href="#lynx-platform"><span class="secno">2.1.4</span> <span class="content"><span>Lynx Platform</span></span></a>
        <li><a href="#lynx-pipeline"><span class="secno">2.1.5</span> <span class="content"><span>Lynx Pipeline</span></span></a>
        <li><a href="#host-platform"><span class="secno">2.1.6</span> <span class="content"><span>Host Platform</span></span></a>
       </ol>
      <li>
       <a href="#structure"><span class="secno">2.2</span> <span class="content"><span>Structure</span></span></a>
       <ol class="toc">
        <li><a href="#lynx-bundle-or-bundle"><span class="secno">2.2.1</span> <span class="content"><span>Lynx Bundle</span> (or <span>Bundle</span>)</span></a>
        <li><a href="#lazy-bundle"><span class="secno">2.2.2</span> <span class="content"><span>Lazy Bundle</span></span></a>
        <li><a href="#scripting-agent"><span class="secno">2.2.3</span> <span class="content"><span>Scripting Agent</span></span></a>
        <li><a href="#lynxview"><span class="secno">2.2.4</span> <span class="content"><span>LynxView</span></span></a>
        <li><a href="#page"><span class="secno">2.2.5</span> <span class="content">Page</span></a>
        <li><a href="#the-lynx-object"><span class="secno">2.2.6</span> <span class="content">The Lynx Object</span></a>
        <li><a href="#lynx-group"><span class="secno">2.2.7</span> <span class="content"><span>Lynx Group</span></span></a>
       </ol>
      <li>
       <a href="#running-scenary"><span class="secno">2.3</span> <span class="content">Running Scenary</span></a>
       <ol class="toc">
        <li><a href="#standalone"><span class="secno">2.3.1</span> <span class="content"><span>Standalone</span></span></a>
        <li><a href="#embedded"><span class="secno">2.3.2</span> <span class="content"><span>Embedded</span></span></a>
       </ol>
     </ol>
    <li>
     <a href="#threading"><span class="secno">3</span> <span class="content"><span>Threading</span></span></a>
     <ol class="toc">
      <li>
       <a href="#definition"><span class="secno">3.1</span> <span class="content">Definition</span></a>
       <ol class="toc">
        <li><a href="#physical-thread"><span class="secno">3.1.1</span> <span class="content"><span>Physical Thread</span></span></a>
        <li><a href="#task"><span class="secno">3.1.2</span> <span class="content"><span>Task</span></span></a>
        <li><a href="#virtual-thread"><span class="secno">3.1.3</span> <span class="content"><span>Virtual Thread</span></span></a>
        <li><a href="#threading-model-or-threading-strategy"><span class="secno">3.1.4</span> <span class="content"><span>Threading Model</span> (or <span>Threading Strategy</span>)</span></a>
       </ol>
      <li>
       <a href="#virtual-thread①"><span class="secno">3.2</span> <span class="content"><span>Virtual Thread</span></span></a>
       <ol class="toc">
        <li><a href="#ui-thread"><span class="secno">3.2.1</span> <span class="content"><span>UI Thread</span></span></a>
        <li><a href="#background-scripting-thread-historically-known-as-js-thread"><span class="secno">3.2.2</span> <span class="content"><span>Background Scripting Thread</span> (historically known as "<span>JS Thread</span>")</span></a>
        <li><a href="#engine-thread-historically-known-as-tasm-thread"><span class="secno">3.2.3</span> <span class="content"><span>Engine Thread</span> (historically known as "<span>Tasm Thread</span>")</span></a>
        <li><a href="#layout-thread"><span class="secno">3.2.4</span> <span class="content"><span>Layout Thread</span></span></a>
       </ol>
      <li>
       <a href="#scripting-facing-threading-abstraction"><span class="secno">3.3</span> <span class="content">Scripting-facing Threading Abstraction</span></a>
       <ol class="toc">
        <li><a href="#scriptable-thread"><span class="secno">3.3.1</span> <span class="content"><span>Scriptable Thread</span></span></a>
        <li><a href="#main-thread-or-lynx-main-thread"><span class="secno">3.3.2</span> <span class="content"><span>Main Thread</span> (or <span>Lynx Main Thread</span>)</span></a>
        <li><a href="#background-thread-aka-off-main-thread"><span class="secno">3.3.3</span> <span class="content"><span>Background Thread</span> (a.k.a. <span>Off-Main-Thread</span>)</span></a>
        <li><a href="#dual-threaded-model"><span class="secno">3.3.4</span> <span class="content"><span>Dual-threaded Model</span></span></a>
       </ol>
     </ol>
    <li>
     <a href="#scripting"><span class="secno">4</span> <span class="content"><span>Scripting</span></span></a>
     <ol class="toc">
      <li>
       <a href="#script"><span class="secno">4.1</span> <span class="content">Script</span></a>
       <ol class="toc">
        <li><a href="#script①"><span class="secno">4.1.1</span> <span class="content"><span>Script</span></span></a>
        <li><a href="#javascript-script"><span class="secno">4.1.2</span> <span class="content"><span>JavaScript Script</span></span></a>
       </ol>
      <li>
       <a href="#scripting-engine"><span class="secno">4.2</span> <span class="content">Scripting Engine</span></a>
       <ol class="toc">
        <li><a href="#scripting-engine-aka-vm-or-virtual-machine"><span class="secno">4.2.1</span> <span class="content"><span>Scripting Engine</span> (a.k.a <span>VM</span>, or <span>Virtual Machine</span>)</span></a>
        <li><a href="#javascript-engine"><span class="secno">4.2.2</span> <span class="content"><span>JavaScript Engine</span></span></a>
        <li>
         <a href="#instances-of-scripting-engine"><span class="secno">4.2.3</span> <span class="content">Instances of Scripting Engine</span></a>
         <ol class="toc">
          <li><a href="#v8-javascript-core-quickjs-hermes-etc"><span class="secno">4.2.3.1</span> <span class="content"><span>V8</span>, <span>JavaScript Core</span>, <span>QuickJS</span>, <span>Hermes</span>, etc.</span></a>
          <li><a href="#primjs-vm"><span class="secno">4.2.3.2</span> <span class="content"><span>PrimJS VM</span></span></a>
         </ol>
       </ol>
      <li>
       <a href="#javascript-ffi"><span class="secno">4.3</span> <span class="content"><span>JavaScript FFI</span></span></a>
       <ol class="toc">
        <li><a href="#node-api-or-n-api"><span class="secno">4.3.1</span> <span class="content"><span>Node-API</span> (or <span>N-API</span>)</span></a>
        <li><a href="#javascript-interface-or-jsi"><span class="secno">4.3.2</span> <span class="content"><span>JavaScript Interface</span> (or <span>JSI</span>)</span></a>
        <li><a href="#primjs-api-or-papi"><span class="secno">4.3.3</span> <span class="content"><span>PrimJS API</span> (or <span>PAPI</span>)</span></a>
       </ol>
      <li>
       <a href="#scripting-runtime-enviroment"><span class="secno">4.4</span> <span class="content">Scripting Runtime Enviroment</span></a>
       <ol class="toc">
        <li><a href="#scripting-runtime-enviroment①"><span class="secno">4.4.1</span> <span class="content"><span>Scripting Runtime Enviroment</span></span></a>
        <li>
         <a href="#main-thread-scripting"><span class="secno">4.4.2</span> <span class="content">Main Thread Scripting</span></a>
         <ol class="toc">
          <li><a href="#main-thread-runtime"><span class="secno">4.4.2.1</span> <span class="content"><span>Main Thread Runtime</span></span></a>
          <li><a href="#main-thread-script-or-mts"><span class="secno">4.4.2.2</span> <span class="content"><span>Main Thread Script</span> (or <span>MTS</span>)</span></a>
          <li><a href="#instances-of-main-thread-script"><span class="secno">4.4.2.3</span> <span class="content">Instances of <span>main thread script</span></span></a>
         </ol>
        <li>
         <a href="#background-thread-scripting"><span class="secno">4.4.3</span> <span class="content">Background Thread Scripting</span></a>
         <ol class="toc">
          <li><a href="#background-thread-runtime"><span class="secno">4.4.3.1</span> <span class="content"><span>Background Thread Runtime</span></span></a>
          <li><a href="#background-thread-script-or-bts"><span class="secno">4.4.3.2</span> <span class="content"><span>Background Thread Script</span> (or <span>BTS</span>)</span></a>
         </ol>
       </ol>
      <li>
       <a href="#procedure-call-or-call"><span class="secno">4.5</span> <span class="content"><span>Procedure Call</span> (or <span>Call</span>)</span></a>
       <ol class="toc">
        <li><a href="#sync-call"><span class="secno">4.5.1</span> <span class="content"><span>Sync Call</span></span></a>
        <li><a href="#inter-thread-call-or-itc"><span class="secno">4.5.2</span> <span class="content"><span>Inter Thread Call</span> (or <span>ITC</span>)</span></a>
       </ol>
      <li><a href="#native-module"><span class="secno">4.6</span> <span class="content"><span>Native Module</span></span></a>
      <li><a href="#worker"><span class="secno">4.7</span> <span class="content"><span>Worker</span></span></a>
     </ol>
    <li>
     <a href="#pipeline"><span class="secno">5</span> <span class="content">Pipeline</span></a>
     <ol class="toc">
      <li>
       <a href="#introduction①"><span class="secno">5.1</span> <span class="content">Introduction</span></a>
       <ol class="toc">
        <li><a href="#load"><span class="secno">5.1.1</span> <span class="content"><span>Load</span></span></a>
        <li><a href="#parse"><span class="secno">5.1.2</span> <span class="content"><span>Parse</span></span></a>
        <li><a href="#framework-rendering"><span class="secno">5.1.3</span> <span class="content">Framework Rendering</span></a>
        <li><a href="#pixel-pipeline"><span class="secno">5.1.4</span> <span class="content">Pixel Pipeline</span></a>
       </ol>
     </ol>
    <li>
     <a href="#framework-and-rendering"><span class="secno">6</span> <span class="content"><span>Framework and Rendering</span></span></a>
     <ol class="toc">
      <li>
       <a href="#framework-and-dsl"><span class="secno">6.1</span> <span class="content">Framework and DSL</span></a>
       <ol class="toc">
        <li><a href="#dsl-domain-specific-language"><span class="secno">6.1.1</span> <span class="content"><span>DSL</span> (<span>Domain-specific Language</span>)</span></a>
        <li><a href="#framework"><span class="secno">6.1.2</span> <span class="content"><span>Framework</span></span></a>
       </ol>
      <li>
       <a href="#rendering"><span class="secno">6.2</span> <span class="content">Rendering</span></a>
       <ol class="toc">
        <li><a href="#rendering①"><span class="secno">6.2.1</span> <span class="content"><span>Rendering</span></span></a>
        <li><a href="#framework-rendering①"><span class="secno">6.2.2</span> <span class="content"><span>Framework Rendering</span></span></a>
        <li><a href="#main-thread-rendering"><span class="secno">6.2.3</span> <span class="content"><span>Main Thread Rendering</span></span></a>
        <li><a href="#background-driven-rendering"><span class="secno">6.2.4</span> <span class="content"><span>Background-driven Rendering</span></span></a>
        <li><a href="#first-screen-rendering-or-fsr"><span class="secno">6.2.5</span> <span class="content"><span>First-screen Rendering</span> (or <span>FSR</span>)</span></a>
        <li><a href="#re-rendering"><span class="secno">6.2.6</span> <span class="content"><span>Re-rendering</span></span></a>
       </ol>
      <li>
       <a href="#instances-of-framework"><span class="secno">6.3</span> <span class="content">Instances of Framework</span></a>
       <ol class="toc">
        <li>
         <a href="#reactlynx"><span class="secno">6.3.1</span> <span class="content"><span>ReactLynx</span></span></a>
         <ol class="toc">
          <li><a href="#rendering-patterns"><span class="secno">6.3.1.1</span> <span class="content">Rendering Patterns</span></a>
         </ol>
       </ol>
     </ol>
    <li>
     <a href="#engine-and-pixeling"><span class="secno">7</span> <span class="content"><span>Engine and Pixeling</span></span></a>
     <ol class="toc">
      <li>
       <a href="#definition①"><span class="secno">7.1</span> <span class="content">Definition</span></a>
       <ol class="toc">
        <li><a href="#engine"><span class="secno">7.1.1</span> <span class="content"><span>Engine</span></span></a>
        <li><a href="#engine-ffi"><span class="secno">7.1.2</span> <span class="content"><span>Engine FFI</span></span></a>
        <li><a href="#pixeling"><span class="secno">7.1.3</span> <span class="content"><span>Pixeling</span></span></a>
        <li><a href="#pixel-pipeline①"><span class="secno">7.1.4</span> <span class="content"><span>Pixel Pipeline</span></span></a>
       </ol>
      <li>
       <a href="#pixel-pipeline②"><span class="secno">7.2</span> <span class="content"><span>Pixel Pipeline</span></span></a>
       <ol class="toc">
        <li>
         <a href="#resolve"><span class="secno">7.2.1</span> <span class="content"><span>Resolve</span></span></a>
         <ol class="toc">
          <li><a href="#parallel-resolve"><span class="secno">7.2.1.1</span> <span class="content"><span>Parallel Resolve</span></span></a>
          <li><a href="#serial-resolve"><span class="secno">7.2.1.2</span> <span class="content"><span>Serial Resolve</span></span></a>
         </ol>
        <li><a href="#layout"><span class="secno">7.2.2</span> <span class="content"><span>Layout</span></span></a>
        <li>
         <a href="#execute-ui-op"><span class="secno">7.2.3</span> <span class="content"><span>Execute UI OP</span></span></a>
         <ol class="toc">
          <li><a href="#execute-ui-paint-op"><span class="secno">7.2.3.1</span> <span class="content"><span>Execute UI Paint OP</span></span></a>
          <li><a href="#execute-ui-layout-op"><span class="secno">7.2.3.2</span> <span class="content"><span>Execute UI Layout OP</span></span></a>
         </ol>
        <li><a href="#paint"><span class="secno">7.2.4</span> <span class="content"><span>Paint</span></span></a>
       </ol>
     </ol>
    <li>
     <a href="#element-layout-node-and-platform-ui"><span class="secno">8</span> <span class="content"><span>Element, Layout Node and Platform UI</span></span></a>
     <ol class="toc">
      <li>
       <a href="#definition②"><span class="secno">8.1</span> <span class="content">Definition</span></a>
       <ol class="toc">
        <li><a href="#element-tag"><span class="secno">8.1.1</span> <span class="content"><span>Element Tag</span></span></a>
        <li><a href="#element"><span class="secno">8.1.2</span> <span class="content"><span>Element</span></span></a>
        <li><a href="#component"><span class="secno">8.1.3</span> <span class="content"><span>Component</span></span></a>
        <li><a href="#layout-node"><span class="secno">8.1.4</span> <span class="content"><span>Layout Node</span></span></a>
        <li><a href="#platform-ui"><span class="secno">8.1.5</span> <span class="content"><span>Platform UI</span></span></a>
       </ol>
      <li>
       <a href="#element①"><span class="secno">8.2</span> <span class="content">Element</span></a>
       <ol class="toc">
        <li><a href="#built-in-element"><span class="secno">8.2.1</span> <span class="content"><span>Built-in Element</span></span></a>
        <li><a href="#custom-element"><span class="secno">8.2.2</span> <span class="content"><span>Custom Element</span></span></a>
        <li><a href="#element-tree"><span class="secno">8.2.3</span> <span class="content"><span>Element Tree</span></span></a>
        <li>
         <a href="#element-attribute-or-attribute"><span class="secno">8.2.4</span> <span class="content"><span>Element Attribute</span> (or <span>Attribute</span>)</span></a>
         <ol class="toc">
          <li><a href="#selector"><span class="secno">8.2.4.1</span> <span class="content"><span>Selector</span></span></a>
          <li><a href="#id-selector"><span class="secno">8.2.4.2</span> <span class="content"><span>ID Selector</span></span></a>
          <li><a href="#tag-selector"><span class="secno">8.2.4.3</span> <span class="content"><span>Tag Selector</span></span></a>
          <li><a href="#class-selector"><span class="secno">8.2.4.4</span> <span class="content"><span>Class Selector</span></span></a>
          <li><a href="#inline-style"><span class="secno">8.2.4.5</span> <span class="content"><span>Inline Style</span></span></a>
          <li><a href="#dataset"><span class="secno">8.2.4.6</span> <span class="content"><span>Dataset</span></span></a>
          <li><a href="#event-listener"><span class="secno">8.2.4.7</span> <span class="content"><span>Event Listener</span></span></a>
         </ol>
        <li>
         <a href="#element-tree-operation"><span class="secno">8.2.5</span> <span class="content"><span>Element Tree Operation</span></span></a>
         <ol class="toc">
          <li><a href="#element-tree-mutation"><span class="secno">8.2.5.1</span> <span class="content"><span>Element Tree Mutation</span></span></a>
          <li><a href="#selector-query"><span class="secno">8.2.5.2</span> <span class="content"><span>Selector Query</span></span></a>
         </ol>
        <li>
         <a href="#element-operation"><span class="secno">8.2.6</span> <span class="content"><span>Element Operation</span></span></a>
         <ol class="toc">
          <li><a href="#element-mutation"><span class="secno">8.2.6.1</span> <span class="content"><span>Element Mutation</span></span></a>
          <li><a href="#element-method"><span class="secno">8.2.6.2</span> <span class="content"><span>Element Method</span></span></a>
         </ol>
        <li>
         <a href="#element-related-api"><span class="secno">8.2.7</span> <span class="content"><span>Element Related API</span></span></a>
         <ol class="toc">
          <li><a href="#element-papi"><span class="secno">8.2.7.1</span> <span class="content"><span>Element PAPI</span></span></a>
          <li><a href="#element-object-model-or-eom"><span class="secno">8.2.7.2</span> <span class="content"><span>Element Object Model</span> (or <span>EOM</span>)</span></a>
          <li><a href="#element-inter-thread-call-or-element-itc"><span class="secno">8.2.7.3</span> <span class="content"><span>Element Inter Thread Call</span> (or <span>Element ITC</span>)</span></a>
          <li><a href="#element-selector-query-api"><span class="secno">8.2.7.4</span> <span class="content"><span>Element Selector Query API</span></span></a>
         </ol>
        <li>
         <a href="#computed-style"><span class="secno">8.2.8</span> <span class="content"><span>Computed Style</span></span></a>
         <ol class="toc">
          <li><a href="#paint-related-computed-style"><span class="secno">8.2.8.1</span> <span class="content"><span>Paint Related Computed Style</span></span></a>
          <li><a href="#layout-related-computed-style"><span class="secno">8.2.8.2</span> <span class="content"><span>Layout Related Computed Style</span></span></a>
         </ol>
        <li><a href="#prop-bundle"><span class="secno">8.2.9</span> <span class="content"><span>Prop Bundle</span></span></a>
       </ol>
      <li>
       <a href="#layout-node①"><span class="secno">8.3</span> <span class="content">Layout Node</span></a>
       <ol class="toc">
        <li><a href="#layout-node-tree"><span class="secno">8.3.1</span> <span class="content"><span>Layout Node Tree</span></span></a>
        <li><a href="#platform-layout-node"><span class="secno">8.3.2</span> <span class="content"><span>Platform Layout Node</span></span></a>
       </ol>
      <li>
       <a href="#platform-ui①"><span class="secno">8.4</span> <span class="content">Platform UI</span></a>
       <ol class="toc">
        <li><a href="#platform-ui-primitives"><span class="secno">8.4.1</span> <span class="content"><span>Platform UI Primitives</span></span></a>
        <li><a href="#platform-ui-tree"><span class="secno">8.4.2</span> <span class="content"><span>Platform UI Tree</span></span></a>
        <li>
         <a href="#platform-ui-operations-or-ui-op"><span class="secno">8.4.3</span> <span class="content"><span>Platform UI Operations</span> (or <span>UI OP</span>)</span></a>
         <ol class="toc">
          <li><a href="#platform-ui-paint-operations-or-ui-paint-op"><span class="secno">8.4.3.1</span> <span class="content"><span>Platform UI Paint Operations</span> (or <span>UI Paint OP</span>)</span></a>
          <li><a href="#platform-ui-layout-operations-or-ui-layout-op"><span class="secno">8.4.3.2</span> <span class="content"><span>Platform UI Layout Operations</span> (or <span>UI Layout OP</span>)</span></a>
         </ol>
       </ol>
     </ol>
    <li><a href="#styling"><span class="secno">9</span> <span class="content"><span>Styling</span></span></a>
    <li>
     <a href="#user-interaction"><span class="secno">10</span> <span class="content"><span>User Interaction</span></span></a>
     <ol class="toc">
      <li>
       <a href="#event"><span class="secno">10.1</span> <span class="content"><span>Event</span></span></a>
       <ol class="toc">
        <li><a href="#event-object"><span class="secno">10.1.1</span> <span class="content"><span>Event Object</span></span></a>
        <li><a href="#main-thread-event-object"><span class="secno">10.1.2</span> <span class="content"><span>Main Thread Event Object</span></span></a>
        <li><a href="#background-thread-event-object"><span class="secno">10.1.3</span> <span class="content"><span>Background Thread Event Object</span></span></a>
       </ol>
      <li>
       <a href="#event-listening"><span class="secno">10.2</span> <span class="content"><span>Event Listening</span></span></a>
       <ol class="toc">
        <li>
         <a href="#event-handler"><span class="secno">10.2.1</span> <span class="content"><span>Event Handler</span></span></a>
         <ol class="toc">
          <li><a href="#main-thread-event-handler"><span class="secno">10.2.1.1</span> <span class="content"><span>Main Thread Event Handler</span></span></a>
          <li><a href="#background-thread-event-handler"><span class="secno">10.2.1.2</span> <span class="content"><span>Background Thread Event Handler</span></span></a>
         </ol>
        <li>
         <a href="#event-handler-function"><span class="secno">10.2.2</span> <span class="content"><span>Event Handler Function</span></span></a>
         <ol class="toc">
          <li><a href="#main-thread-event-handler-function"><span class="secno">10.2.2.1</span> <span class="content"><span>Main Thread Event Handler Function</span></span></a>
          <li><a href="#background-thread-event-handler-function"><span class="secno">10.2.2.2</span> <span class="content"><span>Background Thread Event Handler Function</span></span></a>
         </ol>
       </ol>
      <li>
       <a href="#event-propagation"><span class="secno">10.3</span> <span class="content"><span>Event Propagation</span></span></a>
       <ol class="toc">
        <li><a href="#event-respond-chain"><span class="secno">10.3.1</span> <span class="content"><span>Event Respond Chain</span></span></a>
        <li><a href="#event-capture"><span class="secno">10.3.2</span> <span class="content"><span>Event Capture</span></span></a>
        <li><a href="#event-bubble"><span class="secno">10.3.3</span> <span class="content"><span>Event Bubble</span></span></a>
        <li><a href="#event-interception"><span class="secno">10.3.4</span> <span class="content"><span>Event Interception</span></span></a>
       </ol>
     </ol>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="scope"><span class="secno">1.1. </span><span class="content">Scope</span><a class="self-link" href="#scope"></a></h3>
   <p>The spec will be largely focusing on the Lynx architecture.</p>
   <h3 class="heading settled" data-level="1.2" id="people"><span class="secno">1.2. </span><span class="content">People</span><a class="self-link" href="#people"></a></h3>
   <h4 class="heading settled" data-level="1.2.1" id="scripting-developer"><span class="secno">1.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Lynx" data-dfn-type="dfn" data-noexport id="lynx-scripting-developer">Scripting Developer</dfn></span><a class="self-link" href="#scripting-developer"></a></h4>
   <p>Individuals who program <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script">scripts</a> within the <a data-link-type="dfn" href="#scripting-scripting-runtime-enviroment" id="ref-for-scripting-scripting-runtime-enviroment">scripting runtime enviroment</a>.</p>
   <h4 class="heading settled" data-level="1.2.2" id="scripting-framework-developer"><span class="secno">1.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Lynx" data-dfn-type="dfn" data-noexport id="lynx-scripting-framework-developer">Scripting Framework Developer</dfn></span><a class="self-link" href="#scripting-framework-developer"></a></h4>
   <p>A kind of <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer">scripting developers</a> that builds <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework">frameworks</a> on top of the <a data-link-type="dfn" href="#commoninfrastructure-lynx-platform" id="ref-for-commoninfrastructure-lynx-platform">Lynx platform</a>.</p>
   <h4 class="heading settled" data-level="1.2.3" id="lynx-developer"><span class="secno">1.2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Lynx" data-dfn-type="dfn" data-noexport id="lynx-lynx-developer">Lynx Developer</dfn></span><a class="self-link" href="#lynx-developer"></a></h4>
   <p>A kind of <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer①">scripting developers</a> that builds <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app">apps</a> on top of the <a data-link-type="dfn" href="#commoninfrastructure-lynx-platform" id="ref-for-commoninfrastructure-lynx-platform①">Lynx platform</a>.</p>
   <h4 class="heading settled" data-level="1.2.4" id="native-developer"><span class="secno">1.2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Lynx" data-dfn-type="dfn" data-noexport id="lynx-native-developer">Native Developer</dfn></span><a class="self-link" href="#native-developer"></a></h4>
   <p>Individuals who program within the <a data-link-type="dfn" href="#commoninfrastructure-host-platform" id="ref-for-commoninfrastructure-host-platform">host platform</a>.</p>
   <h4 class="heading settled" data-level="1.2.5" id="engine-developer"><span class="secno">1.2.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Lynx" data-dfn-type="dfn" data-noexport id="lynx-engine-developer">Engine Developer</dfn></span><a class="self-link" href="#engine-developer"></a></h4>
   <p>A kind of <a data-link-type="dfn" href="#lynx-native-developer" id="ref-for-lynx-native-developer">native developers</a> that builds the <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine">engine</a>.</p>
   <h4 class="heading settled" data-level="1.2.6" id="lynx-contributor"><span class="secno">1.2.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Lynx" data-dfn-type="dfn" data-noexport id="lynx-lynx-contributor">Lynx Contributor</dfn></span><a class="self-link" href="#lynx-contributor"></a></h4>
   <p>Individuals who contribute and commit to the Lynx project, including <a data-link-type="dfn" href="#lynx-engine-developer" id="ref-for-lynx-engine-developer">engine developers</a> and <a data-link-type="dfn" href="#lynx-scripting-framework-developer" id="ref-for-lynx-scripting-framework-developer">scripting framework developers</a>.</p>
   <h2 class="heading settled" data-level="2" id="common-infrastructure"><span class="secno">2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-common-infrastructure">Common Infrastructure</dfn></span><a class="self-link" href="#common-infrastructure"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="high-level-concept"><span class="secno">2.1. </span><span class="content">High-level Concept</span><a class="self-link" href="#high-level-concept"></a></h3>
   <p>The following diagram gives a simplified overview of the pieces that form the Lynx tech stack. It clarifies where key terms (e.g. <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine①">engine</a> and <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework①">framework</a>) sit in this stack and highlights the API boundaries.</p>
   <p style="justify-content:center;align-items:center;display:flex;"> <img alt="common_infrastructure" height="50%" src="../assets/common_infrastructure.png" width="50%"> </p>
   <h4 class="heading settled" data-level="2.1.1" id="app"><span class="secno">2.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-app">APP</dfn></span><a class="self-link" href="#app"></a></h4>
   <p>It is where <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer">Lynx developers</a> own and program with the <a data-link-type="dfn" href="#commoninfrastructure-lynx-platform" id="ref-for-commoninfrastructure-lynx-platform②">Lynx platform</a> APIs and <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework②">framework</a> to build UIs and implement business logic.
An App may consist of one or multiple <a data-link-type="dfn" href="https://w3c.github.io/miniapp-manifest/#dfn-pages" id="ref-for-dfn-pages">pages</a>, with each page being loaded from an entrypoint <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle">bundle</a>, and potentially additional <a data-link-type="dfn" href="#commoninfrastructure-lazy-bundle" id="ref-for-commoninfrastructure-lazy-bundle">lazy bundles</a> as needed.</p>
   <h4 class="heading settled" data-level="2.1.2" id="container"><span class="secno">2.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-container">Container</dfn></span><a class="self-link" href="#container"></a></h4>
   <p>It is a self-contained module within an <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app①">App</a> responsible for managing the lifecycle of <a data-link-type="dfn" href="#commoninfrastructure-lynxview" id="ref-for-commoninfrastructure-lynxview">LynxView</a> instances. Key responsibilities of the Container include:
managing LynxView instances, loading page resources (e.g., <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle①">bundle</a>, medias, etc.), and handling navigation controls.</p>
   <h4 class="heading settled" data-level="2.1.3" id="sdk"><span class="secno">2.1.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-sdk">SDK</dfn></span><a class="self-link" href="#sdk"></a></h4>
   <p>It is a collection of tools and libraries provided by <a data-link-type="dfn" href="#lynx-lynx-contributor" id="ref-for-lynx-lynx-contributor">Lynx contributors</a> that enable <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer①">Lynx developers</a> to build <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app②">apps</a> for Lynx. It primarily encapsulates two layers: <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine②">engine</a> and <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework③">framework</a>.</p>
   <h4 class="heading settled" data-level="2.1.4" id="lynx-platform"><span class="secno">2.1.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-lynx-platform">Lynx Platform</dfn></span><a class="self-link" href="#lynx-platform"></a></h4>
   <p>Much like the Web platform (wikipedia), it refers to the collection of technologies and APIs that allows <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer②">Lynx developers</a> to create Lynx pages or applications that run on the Lynx <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine③">engine</a>.</p>
   <h4 class="heading settled" data-level="2.1.5" id="lynx-pipeline"><span class="secno">2.1.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-lynx-pipeline">Lynx Pipeline</dfn></span><a class="self-link" href="#lynx-pipeline"></a></h4>
   <p>The <a data-link-type="dfn" href="#commoninfrastructure-lynx-pipeline" id="ref-for-commoninfrastructure-lynx-pipeline">lynx pipeline</a> in Lynx development refers to the sequence of steps a Lynx <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app③">app</a> takes to convert its internal <a data-link-type="dfn" href="#commoninfrastructure-structure" id="ref-for-commoninfrastructure-structure">structures</a> into the visual representation that users see and interact with on their screens.
In practice, the <a data-link-type="dfn" href="#commoninfrastructure-lynx-pipeline" id="ref-for-commoninfrastructure-lynx-pipeline①">lynx pipeline</a> is an iterative loop where user inputs can continuously trigger various phases of the process. This pipeline is divided into four main parts: load, parse, <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering">framework rendering</a> and <a data-link-type="dfn" href="#enginepixeling-pixeling" id="ref-for-enginepixeling-pixeling">pixeling</a>.</p>
   <h4 class="heading settled" data-level="2.1.6" id="host-platform"><span class="secno">2.1.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-host-platform">Host Platform</dfn></span><a class="self-link" href="#host-platform"></a></h4>
    The Host Platform refers to the underlying operating system and its supporting services that provide the foundational runtime environment and platform specific capabilities for the engine. 
   <h3 class="heading settled" data-level="2.2" id="structure"><span class="secno">2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-structure">Structure</dfn></span><a class="self-link" href="#structure"></a></h3>
   <h4 class="heading settled" data-level="2.2.1" id="lynx-bundle-or-bundle"><span class="secno">2.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-lynx-bundle">Lynx Bundle</dfn> (or <dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-bundle">Bundle</dfn>)</span><a class="self-link" href="#lynx-bundle-or-bundle"></a></h4>
   <p>Where all necessary resources needed for a Lynx <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app④">App</a> to run are bundled together.
This usually comprises of:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#styling-style-sheet" id="ref-for-styling-style-sheet">style sheet</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①">script</a></p>
    <li data-md>
     <p>serialized <a data-link-type="dfn" href="#elementscomponents-element-tree" id="ref-for-elementscomponents-element-tree">element tree</a></p>
   </ul>
   <h4 class="heading settled" data-level="2.2.2" id="lazy-bundle"><span class="secno">2.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-lazy-bundle">Lazy Bundle</dfn></span><a class="self-link" href="#lazy-bundle"></a></h4>
   <p>Where all necessary resources needed for a <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component">component</a> to run are bundled together, has similar composition to <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle②">bundle</a>. It is usually lazy loaded at runtime.</p>
   <h4 class="heading settled" data-level="2.2.3" id="scripting-agent"><span class="secno">2.2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-scripting-agent">Scripting Agent</dfn></span><a class="self-link" href="#scripting-agent"></a></h4>
    Similar to the agent in ECMA-262 and W3C. 
   <h4 class="heading settled" data-level="2.2.4" id="lynxview"><span class="secno">2.2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-lynxview">LynxView</dfn></span><a class="self-link" href="#lynxview"></a></h4>
    Similar to WebView in native developing. Renders <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle③">bundle</a> within host application’s context. 
   <h4 class="heading settled" data-level="2.2.5" id="page"><span class="secno">2.2.5. </span><span class="content">Page</span><a class="self-link" href="#page"></a></h4>
    Similar to the document in W3C. It is the root <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element">element</a> of Lynx <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app⑤">App</a>. 
   <h4 class="heading settled" data-level="2.2.6" id="the-lynx-object"><span class="secno">2.2.6. </span><span class="content">The Lynx Object</span><a class="self-link" href="#the-lynx-object"></a></h4>
    It is a binding object, offering some common capabilities to script developers. It is provided in <a data-link-type="dfn" href="#scripting-main-thread-runtime" id="ref-for-scripting-main-thread-runtime">main thread runtime</a> and <a data-link-type="dfn" href="#scripting-background-thread-runtime" id="ref-for-scripting-background-thread-runtime">background thread runtime</a>. 
   <h4 class="heading settled" data-level="2.2.7" id="lynx-group"><span class="secno">2.2.7. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-lynx-group">Lynx Group</dfn></span><a class="self-link" href="#lynx-group"></a></h4>
   <p>When multiple <a data-link-type="dfn" href="#commoninfrastructure-lynxview" id="ref-for-commoninfrastructure-lynxview①">LynxView</a> is hosted on a shared <a data-link-type="dfn" href="#commoninfrastructure-scripting-agent" id="ref-for-commoninfrastructure-scripting-agent">scripting agent</a>.</p>
   <h3 class="heading settled" data-level="2.3" id="running-scenary"><span class="secno">2.3. </span><span class="content">Running Scenary</span><a class="self-link" href="#running-scenary"></a></h3>
   <h4 class="heading settled" data-level="2.3.1" id="standalone"><span class="secno">2.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-standalone">Standalone</dfn></span><a class="self-link" href="#standalone"></a></h4>
   <p>When Lynx is used independently, i.e. not mixed with another UI system , such as:</p>
   <ul>
    <li data-md>
     <p>Single page</p>
    <li data-md>
     <p>Full screen</p>
   </ul>
   <h4 class="heading settled" data-level="2.3.2" id="embedded"><span class="secno">2.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="CommonInfrastructure" data-dfn-type="dfn" data-noexport id="commoninfrastructure-embedded">Embedded</dfn></span><a class="self-link" href="#embedded"></a></h4>
   <p>When Lynx is used as a part of, or is integrated within, another UI system, such as:</p>
   <ul>
    <li data-md>
     <p>Multiple cards within a feed</p>
   </ul>
   <h2 class="heading settled" data-level="3" id="threading"><span class="secno">3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-threading">Threading</dfn></span><a class="self-link" href="#threading"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="definition"><span class="secno">3.1. </span><span class="content">Definition</span><a class="self-link" href="#definition"></a></h3>
   <h4 class="heading settled" data-level="3.1.1" id="physical-thread"><span class="secno">3.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-physical-thread">Physical Thread</dfn></span><a class="self-link" href="#physical-thread"></a></h4>
   <p>The actual thread provided by the OS (operating system).</p>
   <h4 class="heading settled" data-level="3.1.2" id="task"><span class="secno">3.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-task">Task</dfn></span><a class="self-link" href="#task"></a></h4>
   <p>A unit of work to be processed. Effectively a function pointer with optionally associated state (i.e. A closure).</p>
   <h4 class="heading settled" data-level="3.1.3" id="virtual-thread"><span class="secno">3.1.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-virtual-thread">Virtual Thread</dfn></span><a class="self-link" href="#virtual-thread"></a></h4>
   <p>A Lynx-managed "thread of execution" that provides sequential execution of <a data-link-type="dfn" href="#threading-task" id="ref-for-threading-task">tasks</a>.
N.B. It may or may not have a one-one correspondence with <a data-link-type="dfn" href="#threading-physical-thread" id="ref-for-threading-physical-thread">physical thread</a>.</p>
   <h4 class="heading settled" data-level="3.1.4" id="threading-model-or-threading-strategy"><span class="secno">3.1.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-threading-model">Threading Model</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-threading-strategy">Threading Strategy</dfn>)</span><a class="self-link" href="#threading-model-or-threading-strategy"></a></h4>
   <p>Define how <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread">virtual threads</a> correspond to <a data-link-type="dfn" href="#threading-physical-thread" id="ref-for-threading-physical-thread①">physical threads</a>.</p>
   <h3 class="heading settled" data-level="3.2" id="virtual-thread①"><span class="secno">3.2. </span><span class="content"><a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread①">Virtual Thread</a></span><a class="self-link" href="#virtual-thread①"></a></h3>
   <h4 class="heading settled" data-level="3.2.1" id="ui-thread"><span class="secno">3.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-ui-thread">UI Thread</dfn></span><a class="self-link" href="#ui-thread"></a></h4>
   <p>The <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread②">virtual thread</a> corresponds to the <a data-link-type="dfn" href="#threading-physical-thread" id="ref-for-threading-physical-thread②">physical thread</a> regarded as the OS Main Thread.</p>
   <h4 class="heading settled" data-level="3.2.2" id="background-scripting-thread-historically-known-as-js-thread"><span class="secno">3.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-background-scripting-thread">Background Scripting Thread</dfn> (historically known as "<dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-js-thread">JS Thread</dfn>")</span><a class="self-link" href="#background-scripting-thread-historically-known-as-js-thread"></a></h4>
   <p>The <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread③">virtual thread</a> where <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script②">script</a> is executed asynchronously.</p>
   <h4 class="heading settled" data-level="3.2.3" id="engine-thread-historically-known-as-tasm-thread"><span class="secno">3.2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-engine-thread">Engine Thread</dfn> (historically known as "<dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-tasm-thread">Tasm Thread</dfn>")</span><a class="self-link" href="#engine-thread-historically-known-as-tasm-thread"></a></h4>
   <p>The <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread④">virtual thread</a> that drives <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline">pixel pipeline</a>.</p>
   <h4 class="heading settled" data-level="3.2.4" id="layout-thread"><span class="secno">3.2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-layout-thread">Layout Thread</dfn></span><a class="self-link" href="#layout-thread"></a></h4>
   <p>The <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread⑤">virtual thread</a> where the <a data-link-type="dfn" href="#enginepixeling-layout" id="ref-for-enginepixeling-layout">layout</a> step of <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline①">pixel pipeline</a> is performed.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Implementors' Note:
In the actual implementation of Lynx, <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread⑥">Virtual Threads</a> are implemented as Task Runners (or Looper) onto which Tasks can be posted.</p>
   <h3 class="heading settled" data-level="3.3" id="scripting-facing-threading-abstraction"><span class="secno">3.3. </span><span class="content">Scripting-facing Threading Abstraction</span><a class="self-link" href="#scripting-facing-threading-abstraction"></a></h3>
   <h4 class="heading settled" data-level="3.3.1" id="scriptable-thread"><span class="secno">3.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-scriptable-thread">Scriptable Thread</dfn></span><a class="self-link" href="#scriptable-thread"></a></h4>
   <p>An abstract notion refers to any <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread⑦">virtual threads</a> that can be controlled or manipulated through <a data-link-type="dfn" href="#scripting-scripting" id="ref-for-scripting-scripting">scripting</a>, abstracting away the <a data-link-type="dfn" href="#threading-threading-strategy" id="ref-for-threading-threading-strategy">threading strategy</a> away from <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer②">scripting developers</a>.</p>
   <h4 class="heading settled" data-level="3.3.2" id="main-thread-or-lynx-main-thread"><span class="secno">3.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-main-thread">Main Thread</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-lynx-main-thread">Lynx Main Thread</dfn>)</span><a class="self-link" href="#main-thread-or-lynx-main-thread"></a></h4>
   <p>The <a data-link-type="dfn" href="#threading-scriptable-thread" id="ref-for-threading-scriptable-thread">scriptable thread</a> corresponds to any <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread⑧">virtual threads</a> that handles <a data-link-type="dfn" href="#threading-task" id="ref-for-threading-task①">tasks</a> that directly affect <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline②">pixel pipeline</a>. From a developer’s perspective, any <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script③">scripts</a> evaluated on this abstract thread can potentially block <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline③">pixel pipeline</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Explainers to <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer③">Lynx developers</a> In Lynx development, the “main thread” refers to the primary thread on which a Lynx page runs.
The main thread is where Lynx processes user events and emit "paints". By default, the Lynx engine uses a single thread to run <a data-link-type="dfn" href="#scripting-main-thread-script" id="ref-for-scripting-main-thread-script">main thread scripts</a>, as well as to perform layout, paints, etc.. This means that long-running <a data-link-type="dfn" href="#scripting-main-thread-script" id="ref-for-scripting-main-thread-script①">main thread scripts</a> can block the thread, leading to an unresponsive page and a bad user experience.
--- forked from https://developer.mozilla.org/en-US/docs/Glossary/Main_thread</p>
   <h4 class="heading settled" data-level="3.3.3" id="background-thread-aka-off-main-thread"><span class="secno">3.3.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-background-thread">Background Thread</dfn> (a.k.a. <dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-off-main-thread">Off-Main-Thread</dfn>)</span><a class="self-link" href="#background-thread-aka-off-main-thread"></a></h4>
   <p>The <a data-link-type="dfn" href="#threading-scriptable-thread" id="ref-for-threading-scriptable-thread①">scriptable thread</a>(s) corresponds to any <a data-link-type="dfn" href="#threading-virtual-thread" id="ref-for-threading-virtual-thread⑨">virtual threads</a> that handle <a data-link-type="dfn" href="#threading-task" id="ref-for-threading-task②">tasks</a> outside of <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline④">pixel pipeline</a>.
Currently, only <a data-link-type="dfn" href="#threading-background-scripting-thread" id="ref-for-threading-background-scripting-thread">background scripting thread</a> and <a data-link-type="dfn" href="#scripting-worker" id="ref-for-scripting-worker">workers</a> spawned from there are considered background threads.</p>
   <h4 class="heading settled" data-level="3.3.4" id="dual-threaded-model"><span class="secno">3.3.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Threading" data-dfn-type="dfn" data-noexport id="threading-dual-threaded-model">Dual-threaded Model</dfn></span><a class="self-link" href="#dual-threaded-model"></a></h4>
   <p>This refers to the programming model in Lynx development, which <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer③">scripting developers</a> can perceive and program with both the <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread">main thread</a> and the <a data-link-type="dfn" href="#threading-background-thread" id="ref-for-threading-background-thread">background thread</a>.
This model allows <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer④">scripting developers</a> and <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework④">framework</a> to improve performance and maintain responsiveness by managing how and where <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script④">scripts</a> are executed.</p>
   <h2 class="heading settled" data-level="4" id="scripting"><span class="secno">4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-scripting">Scripting</dfn></span><a class="self-link" href="#scripting"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="script"><span class="secno">4.1. </span><span class="content">Script</span><a class="self-link" href="#script"></a></h3>
   <h4 class="heading settled" data-level="4.1.1" id="script①"><span class="secno">4.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-script">Script</dfn></span><a class="self-link" href="#script①"></a></h4>
   <p>An abstract notion of code, represented often as files or other forms of binaries.</p>
   <h4 class="heading settled" data-level="4.1.2" id="javascript-script"><span class="secno">4.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-javascript-script">JavaScript Script</dfn></span><a class="self-link" href="#javascript-script"></a></h4>
   <p>A kind of <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script⑤">script</a> that is compliant to ECMA-262.</p>
   <h3 class="heading settled" data-level="4.2" id="scripting-engine"><span class="secno">4.2. </span><span class="content">Scripting Engine</span><a class="self-link" href="#scripting-engine"></a></h3>
   <h4 class="heading settled" data-level="4.2.1" id="scripting-engine-aka-vm-or-virtual-machine"><span class="secno">4.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-scripting-engine">Scripting Engine</dfn> (a.k.a <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-vm">VM</dfn>, or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-virtual-machine">Virtual Machine</dfn>)</span><a class="self-link" href="#scripting-engine-aka-vm-or-virtual-machine"></a></h4>
   <p>An abstract machine in which <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script⑥">script</a> is executed.</p>
   <h4 class="heading settled" data-level="4.2.2" id="javascript-engine"><span class="secno">4.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-javascript-engine">JavaScript Engine</dfn></span><a class="self-link" href="#javascript-engine"></a></h4>
   <p>A kind of <a data-link-type="dfn" href="#scripting-scripting-engine" id="ref-for-scripting-scripting-engine">scripting engine</a> that can execute <a data-link-type="dfn" href="#scripting-javascript-script" id="ref-for-scripting-javascript-script">JavaScript script</a>.</p>
   <h4 class="heading settled" data-level="4.2.3" id="instances-of-scripting-engine"><span class="secno">4.2.3. </span><span class="content">Instances of Scripting Engine</span><a class="self-link" href="#instances-of-scripting-engine"></a></h4>
   <h5 class="heading settled" data-level="4.2.3.1" id="v8-javascript-core-quickjs-hermes-etc"><span class="secno">4.2.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-v8">V8</dfn>, <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-javascript-core">JavaScript Core</dfn>, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="quickjs">QuickJS</dfn>, <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-hermes">Hermes</dfn>, etc.</span><a class="self-link" href="#v8-javascript-core-quickjs-hermes-etc"></a></h5>
    These are some of the industry-acknowledged <a data-link-type="dfn" href="#scripting-javascript-engine" id="ref-for-scripting-javascript-engine">JavaScript engine</a>. 
   <h5 class="heading settled" data-level="4.2.3.2" id="primjs-vm"><span class="secno">4.2.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-primjs-vm">PrimJS VM</dfn></span><a class="self-link" href="#primjs-vm"></a></h5>
    This is a <a data-link-type="dfn" href="#scripting-scripting-engine" id="ref-for-scripting-scripting-engine①">scripting engine</a> forked from QuickJS. 
   <h3 class="heading settled" data-level="4.3" id="javascript-ffi"><span class="secno">4.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-javascript-ffi">JavaScript FFI</dfn></span><a class="self-link" href="#javascript-ffi"></a></h3>
    A foreign function interface (FFI) is a mechanism by which a program written in one programming language can call routines or make use of services written or compiled in another one.
JavaScript FFI here refers to the mechanism by which JavaScript calls to Native. 
   <h4 class="heading settled" data-level="4.3.1" id="node-api-or-n-api"><span class="secno">4.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-node-api">Node-API</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-n-api">N-API</dfn>)</span><a class="self-link" href="#node-api-or-n-api"></a></h4>
    Node-API (formerly N-API) is an API for building native Addons. It is independent from the underlying JavaScript runtime (for example, V8).
Native developers can implement JavaScript FFI based on Node-API. 
   <h4 class="heading settled" data-level="4.3.2" id="javascript-interface-or-jsi"><span class="secno">4.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-javascript-interface">JavaScript Interface</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-jsi">JSI</dfn>)</span><a class="self-link" href="#javascript-interface-or-jsi"></a></h4>
    JavaScript Interface(JSI) is an interface that allows JavaScript to hold a reference to host platform object and vice-versa. Native developers can implement JavaScript FFI based on JSI. 
   <h4 class="heading settled" data-level="4.3.3" id="primjs-api-or-papi"><span class="secno">4.3.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-primjs-api">PrimJS API</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-papi">PAPI</dfn>)</span><a class="self-link" href="#primjs-api-or-papi"></a></h4>
    The PrimJS API is the API provided by PrimJS for native developers to implement JavaScript FFI.
It offers a special HostRef that can be created and held at high performance.
This HostRef is not an Object in JavaScript, and script developers cannot manipulate the HostRef directly; they can only pass it as a parameter to the FFI. 
   <h3 class="heading settled" data-level="4.4" id="scripting-runtime-enviroment"><span class="secno">4.4. </span><span class="content">Scripting Runtime Enviroment</span><a class="self-link" href="#scripting-runtime-enviroment"></a></h3>
   <h4 class="heading settled" data-level="4.4.1" id="scripting-runtime-enviroment①"><span class="secno">4.4.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-scripting-runtime-enviroment">Scripting Runtime Enviroment</dfn></span><a class="self-link" href="#scripting-runtime-enviroment①"></a></h4>
   <p>An abstract enviroment comprises a <a data-link-type="dfn" href="#scripting-scripting-engine" id="ref-for-scripting-scripting-engine②">scripting engine</a> that executes <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script⑦">scripts</a>, along with a series of APIs and libraries accessible to the <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script⑧">scripts</a>.</p>
   <h4 class="heading settled" data-level="4.4.2" id="main-thread-scripting"><span class="secno">4.4.2. </span><span class="content">Main Thread Scripting</span><a class="self-link" href="#main-thread-scripting"></a></h4>
   <h5 class="heading settled" data-level="4.4.2.1" id="main-thread-runtime"><span class="secno">4.4.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-main-thread-runtime">Main Thread Runtime</dfn></span><a class="self-link" href="#main-thread-runtime"></a></h5>
   <p>The <a data-link-type="dfn" href="#scripting-scripting-runtime-enviroment" id="ref-for-scripting-scripting-runtime-enviroment①">scripting runtime enviroment</a> used by the <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread①">main thread</a>. It comprises of</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#scripting-primjs-vm" id="ref-for-scripting-primjs-vm">PrimJS VM</a>, and</p>
    <li data-md>
     <p>APIs exposed from <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline⑤">pixel pipeline</a>, such as <a data-link-type="dfn" href="#elementscomponents-element-papi" id="ref-for-elementscomponents-element-papi">Element PAPI</a>.</p>
   </ul>
   <h5 class="heading settled" data-level="4.4.2.2" id="main-thread-script-or-mts"><span class="secno">4.4.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-main-thread-script">Main Thread Script</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-mts">MTS</dfn>)</span><a class="self-link" href="#main-thread-script-or-mts"></a></h5>
   <p>A kind of <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script⑨">script</a> intended to be executed on the <a data-link-type="dfn" href="#scripting-main-thread-runtime" id="ref-for-scripting-main-thread-runtime①">main thread runtime</a>, typically for performingelement manipulation to trigger <a data-link-type="dfn" href="#enginepixeling-pixeling" id="ref-for-enginepixeling-pixeling①">pixeling</a>.</p>
   <h5 class="heading settled" data-level="4.4.2.3" id="instances-of-main-thread-script"><span class="secno">4.4.2.3. </span><span class="content">Instances of <a data-link-type="dfn" href="#scripting-main-thread-script" id="ref-for-scripting-main-thread-script②">main thread script</a></span><a class="self-link" href="#instances-of-main-thread-script"></a></h5>
   <ol>
    <li data-md>
     <p><a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①⓪">Scripts</a> within the <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle④">bundle</a> intended to be initially loaded and executed on the <a data-link-type="dfn" href="#scripting-main-thread-runtime" id="ref-for-scripting-main-thread-runtime②">main thread runtime</a> as the entry point of an App. e.g. main-thread.js</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①①">Scripts</a> within the <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle⑤">bundle</a> intended to be lazily evaluated on the <a data-link-type="dfn" href="#scripting-main-thread-runtime" id="ref-for-scripting-main-thread-runtime③">main thread runtime</a> on demand by the <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework⑤">framework</a>. The specific APIs for this are determined by the <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework⑥">framework</a>.</p>
   </ol>
   <h4 class="heading settled" data-level="4.4.3" id="background-thread-scripting"><span class="secno">4.4.3. </span><span class="content">Background Thread Scripting</span><a class="self-link" href="#background-thread-scripting"></a></h4>
   <h5 class="heading settled" data-level="4.4.3.1" id="background-thread-runtime"><span class="secno">4.4.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-background-thread-runtime">Background Thread Runtime</dfn></span><a class="self-link" href="#background-thread-runtime"></a></h5>
   <p>A <a data-link-type="dfn" href="#scripting-scripting-runtime-enviroment" id="ref-for-scripting-scripting-runtime-enviroment②">scripting runtime enviroment</a> comprises of</p>
   <ul>
    <li data-md>
     <p>An instance of <a data-link-type="dfn" href="#scripting-javascript-engine" id="ref-for-scripting-javascript-engine①">JavaScript engine</a>, and</p>
    <li data-md>
     <p>Extended scripting APIs such as those exposed by JSB (JavaScript Bridge, to be further defined).</p>
   </ul>
   <h5 class="heading settled" data-level="4.4.3.2" id="background-thread-script-or-bts"><span class="secno">4.4.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-background-thread-script">Background Thread Script</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-bts">BTS</dfn>)</span><a class="self-link" href="#background-thread-script-or-bts"></a></h5>
   <p>A kind of <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①②">script</a> that is intended to be executed under the <a data-link-type="dfn" href="#scripting-background-thread-runtime" id="ref-for-scripting-background-thread-runtime①">background thread runtime</a>.</p>
   <ul>
    <li data-md>
     <p>e.g. app-service.js, background.js, worker.js</p>
   </ul>
   <h3 class="heading settled" data-level="4.5" id="procedure-call-or-call"><span class="secno">4.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-procedure-call">Procedure Call</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-call">Call</dfn>)</span><a class="self-link" href="#procedure-call-or-call"></a></h3>
    In Lynx Engine, there are dual threads and dual <a data-link-type="dfn" href="#scripting-scripting-runtime-enviroment" id="ref-for-scripting-scripting-runtime-enviroment③">scripting runtime enviroment</a>. And there are FFI calls from Runtime to Native, as well as calls from Native to Runtime. These cross-environment or cross-thread calls are referred to as Procedure Call, or simply as Call. 
   <h4 class="heading settled" data-level="4.5.1" id="sync-call"><span class="secno">4.5.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-sync-call">Sync Call</dfn></span><a class="self-link" href="#sync-call"></a></h4>
    Sync call specifically refers to cross-environment <a data-link-type="dfn" href="#scripting-call" id="ref-for-scripting-call">calls</a> that occur in the same thread, including calls from runtime to native and from native to runtime. 
   <h4 class="heading settled" data-level="4.5.2" id="inter-thread-call-or-itc"><span class="secno">4.5.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-inter-thread-call">Inter Thread Call</dfn> (or <dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-itc">ITC</dfn>)</span><a class="self-link" href="#inter-thread-call-or-itc"></a></h4>
    Inter Thread Call refers to <a data-link-type="dfn" href="#scripting-call" id="ref-for-scripting-call①">calls</a> between threads, including cross-thread calls between native and native, between runtime and native, between runtime and runtime. 
   <h3 class="heading settled" data-level="4.6" id="native-module"><span class="secno">4.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-native-module">Native Module</dfn></span><a class="self-link" href="#native-module"></a></h3>
   <p>Native Module is a host object implemented in the background thread runtime based on <a data-link-type="dfn" href="#scripting-node-api" id="ref-for-scripting-node-api">Node-API</a> or <a data-link-type="dfn" href="#scripting-jsi" id="ref-for-scripting-jsi">JSI</a>.
Native developers can register host platform capabilities to Native Module, which allows script developers to <a data-link-type="dfn" href="#scripting-call" id="ref-for-scripting-call②">call</a> host platform capabilities in the background thread runtime.</p>
   <h3 class="heading settled" data-level="4.7" id="worker"><span class="secno">4.7. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Scripting" data-dfn-type="dfn" data-noexport id="scripting-worker">Worker</dfn></span><a class="self-link" href="#worker"></a></h3>
    Similar to the worker in W3C. 
   <h2 class="heading settled" data-level="5" id="pipeline"><span class="secno">5. </span><span class="content">Pipeline</span><a class="self-link" href="#pipeline"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="introduction①"><span class="secno">5.1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction①"></a></h3>
    During the <a data-link-type="dfn" href="#frameworkrendering-first-screen-rendering" id="ref-for-frameworkrendering-first-screen-rendering">first-screen rendering</a>, the <a data-link-type="dfn" href="#commoninfrastructure-lynx-pipeline" id="ref-for-commoninfrastructure-lynx-pipeline②">lynx pipeline</a> includes four parts: load, parse, <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering①">framework rendering</a>, and <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline⑥">pixel pipeline</a>.
In the case of <a data-link-type="dfn" href="#frameworkrendering-re-rendering" id="ref-for-frameworkrendering-re-rendering">re-rendering</a>, the lynx pipeline consists of two parts: <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering②">framework rendering</a> and <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline⑦">pixel pipeline</a>. 
   <h4 class="heading settled" data-level="5.1.1" id="load"><span class="secno">5.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Pipeline" data-dfn-type="dfn" data-noexport id="pipeline-load">Load</dfn></span><a class="self-link" href="#load"></a></h4>
    Load refers to the process of requesting the <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle⑥">bundle</a> during the <a data-link-type="dfn" href="#frameworkrendering-first-screen-rendering" id="ref-for-frameworkrendering-first-screen-rendering①">first-screen rendering</a>. 
   <h4 class="heading settled" data-level="5.1.2" id="parse"><span class="secno">5.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Pipeline" data-dfn-type="dfn" data-noexport id="pipeline-parse">Parse</dfn></span><a class="self-link" href="#parse"></a></h4>
    Parsing <a data-link-type="dfn" href="#commoninfrastructure-bundle" id="ref-for-commoninfrastructure-bundle⑦">bundle</a> such that can be directly consumed in the subsequent pipeline process. 
   <h4 class="heading settled" data-level="5.1.3" id="framework-rendering"><span class="secno">5.1.3. </span><span class="content">Framework Rendering</span><a class="self-link" href="#framework-rendering"></a></h4>
    As described in <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering③">framework rendering</a>. 
   <h4 class="heading settled" data-level="5.1.4" id="pixel-pipeline"><span class="secno">5.1.4. </span><span class="content">Pixel Pipeline</span><a class="self-link" href="#pixel-pipeline"></a></h4>
    As described in <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline⑧">pixel pipeline</a>. 
   <h2 class="heading settled" data-level="6" id="framework-and-rendering"><span class="secno">6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-framework-and-rendering">Framework and Rendering</dfn></span><a class="self-link" href="#framework-and-rendering"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="framework-and-dsl"><span class="secno">6.1. </span><span class="content">Framework and DSL</span><a class="self-link" href="#framework-and-dsl"></a></h3>
   <h4 class="heading settled" data-level="6.1.1" id="dsl-domain-specific-language"><span class="secno">6.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-dsl">DSL</dfn> (<dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-domain-specific-language">Domain-specific Language</dfn>)</span><a class="self-link" href="#dsl-domain-specific-language"></a></h4>
   <p>A <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl">DSL</a> in the context of Lynx development is a <a data-link-type="dfn" href="#scripting-scripting" id="ref-for-scripting-scripting①">scripting</a> interface designed to provide a specialized syntax for describing UIs and interactions, allowing <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer④">Lynx developers</a> to define <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component①">components</a> and intuitively interact with <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline⑨">pixel pipeline</a>.
Instances of <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl①">DSL</a> include <a data-link-type="dfn" href="#frameworkrendering-reactlynx" id="ref-for-frameworkrendering-reactlynx">ReactLynx</a>.</p>
   <h4 class="heading settled" data-level="6.1.2" id="framework"><span class="secno">6.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-framework">Framework</dfn></span><a class="self-link" href="#framework"></a></h4>
   <p>The <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework⑦">framework</a> comprises <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl②">DSL</a> and builds upon it, encapsulating the above-mentioned <a data-link-type="dfn" href="#commoninfrastructure-lynx-platform" id="ref-for-commoninfrastructure-lynx-platform③">Lynx platform</a> APIs and constructs into idiomatic <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl③">DSL</a>-specific APIs, to provide a cohesive experience building production-ready Lynx <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app⑥">apps</a>.
The implementation of <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework⑧">framework</a> is considered native-coupled, and is loaded on-demand from disk or memory, together with the userland app code.</p>
   <h3 class="heading settled" data-level="6.2" id="rendering"><span class="secno">6.2. </span><span class="content">Rendering</span><a class="self-link" href="#rendering"></a></h3>
   <h4 class="heading settled" data-level="6.2.1" id="rendering①"><span class="secno">6.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-rendering">Rendering</dfn></span><a class="self-link" href="#rendering①"></a></h4>
   <p>The act of executing the <a data-link-type="dfn" href="#commoninfrastructure-lynx-pipeline" id="ref-for-commoninfrastructure-lynx-pipeline③">lynx pipeline</a>. When used alone, it typically refers to <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering④">framework rendering</a> because the pipeline almost always starts with it.</p>
   <h4 class="heading settled" data-level="6.2.2" id="framework-rendering①"><span class="secno">6.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-framework-rendering">Framework Rendering</dfn></span><a class="self-link" href="#framework-rendering①"></a></h4>
   <p>The process within the <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework⑨">framework</a> where the application <a data-link-type="dfn" href="#scripting-scripting" id="ref-for-scripting-scripting②">scripts</a> are evaluated to create and synchronize its internal representation of the UI, often represented as <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component②">components</a>, with the actual <a data-link-type="dfn" href="#elementscomponents-element-tree" id="ref-for-elementscomponents-element-tree①">element tree</a> in the <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine④">engine</a> through element manipulation.</p>
   <p style="justify-content:center;align-items:center;display:flex;"> <img alt="rendering" height="80%" src="../assets/rendering.png" width="80%"> </p>
   <h4 class="heading settled" data-level="6.2.3" id="main-thread-rendering"><span class="secno">6.2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-main-thread-rendering">Main Thread Rendering</dfn></span><a class="self-link" href="#main-thread-rendering"></a></h4>
   <p>The type of <a data-link-type="dfn" href="#frameworkrendering-rendering" id="ref-for-frameworkrendering-rendering">rendering</a> where both <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering⑤">framework rendering</a> and <a data-link-type="dfn" href="#enginepixeling-pixeling" id="ref-for-enginepixeling-pixeling②">pixeling</a> occur on the <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread②">main thread</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Explainers to <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer⑤">Lynx developers</a> This approach allows synchronous UI updates, with the risks that long <a data-link-type="dfn" href="#scripting-scripting" id="ref-for-scripting-scripting③">scripting</a> tasks may block the <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread③">main thread</a>, causing the UI to be unresponsive.</p>
   <h4 class="heading settled" data-level="6.2.4" id="background-driven-rendering"><span class="secno">6.2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-background-driven-rendering">Background-driven Rendering</dfn></span><a class="self-link" href="#background-driven-rendering"></a></h4>
   <p>The type of <a data-link-type="dfn" href="#frameworkrendering-rendering" id="ref-for-frameworkrendering-rendering①">rendering</a> where the <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering⑥">framework rendering</a> is initiated (and primarily executed) on a <a data-link-type="dfn" href="#threading-background-thread" id="ref-for-threading-background-thread①">background thread</a>, then transferred to the <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread④">main thread</a> to complete the <a data-link-type="dfn" href="#enginepixeling-pixeling" id="ref-for-enginepixeling-pixeling③">pixeling</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Explainers to <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer⑥">Lynx developers</a> This approach can improve the responsiveness of the <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread⑤">main thread</a> by utilizing parallelism and offloading heavy <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering⑦">framework rendering</a> tasks to <a data-link-type="dfn" href="#threading-background-thread" id="ref-for-threading-background-thread②">background thread</a>, but can introduce potential latency in UI updates.</p>
   <h4 class="heading settled" data-level="6.2.5" id="first-screen-rendering-or-fsr"><span class="secno">6.2.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-first-screen-rendering">First-screen Rendering</dfn> (or <dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-fsr">FSR</dfn>)</span><a class="self-link" href="#first-screen-rendering-or-fsr"></a></h4>
   <p>A special type of <a data-link-type="dfn" href="#frameworkrendering-main-thread-rendering" id="ref-for-frameworkrendering-main-thread-rendering">main thread rendering</a> occurs during the load of Lynx <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app⑦">apps</a> to improve the first load experience.</p>
   <h4 class="heading settled" data-level="6.2.6" id="re-rendering"><span class="secno">6.2.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-re-rendering">Re-rendering</dfn></span><a class="self-link" href="#re-rendering"></a></h4>
   <p>The type of <a data-link-type="dfn" href="#frameworkrendering-rendering" id="ref-for-frameworkrendering-rendering②">rendering</a> that occurs after <a data-link-type="dfn" href="#frameworkrendering-first-screen-rendering" id="ref-for-frameworkrendering-first-screen-rendering②">first-screen rendering</a>, can be either <a data-link-type="dfn" href="#frameworkrendering-main-thread-rendering" id="ref-for-frameworkrendering-main-thread-rendering①">main thread rendering</a> or <a data-link-type="dfn" href="#frameworkrendering-background-driven-rendering" id="ref-for-frameworkrendering-background-driven-rendering">background-driven rendering</a>.</p>
   <h3 class="heading settled" data-level="6.3" id="instances-of-framework"><span class="secno">6.3. </span><span class="content">Instances of Framework</span><a class="self-link" href="#instances-of-framework"></a></h3>
   <h4 class="heading settled" data-level="6.3.1" id="reactlynx"><span class="secno">6.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="FrameworkRendering" data-dfn-type="dfn" data-noexport id="frameworkrendering-reactlynx">ReactLynx</dfn></span><a class="self-link" href="#reactlynx"></a></h4>
   <p>A <a data-link-type="dfn" href="#frameworkrendering-framework" id="ref-for-frameworkrendering-framework①⓪">framework</a> featuring React-like <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl④">DSL</a> adapted to Lynx’s <a data-link-type="dfn" href="#threading-dual-threaded-model" id="ref-for-threading-dual-threaded-model">dual-threaded model</a>.</p>
   <h5 class="heading settled" data-level="6.3.1.1" id="rendering-patterns"><span class="secno">6.3.1.1. </span><span class="content">Rendering Patterns</span><a class="self-link" href="#rendering-patterns"></a></h5>
   <ul>
    <li data-md>
     <p>Renders <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component③">components</a> in the <a data-link-type="dfn" href="#scripting-main-thread-runtime" id="ref-for-scripting-main-thread-runtime④">main thread runtime</a> to achieve <a data-link-type="dfn" href="#frameworkrendering-first-screen-rendering" id="ref-for-frameworkrendering-first-screen-rendering③">first-screen rendering</a>, and</p>
    <li data-md>
     <p>Typically, <a data-link-type="dfn" href="#frameworkrendering-re-rendering" id="ref-for-frameworkrendering-re-rendering①">re-rendering</a> <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component④">components</a> via <a data-link-type="dfn" href="#frameworkrendering-background-driven-rendering" id="ref-for-frameworkrendering-background-driven-rendering①">background-driven rendering</a>.</p>
    <li data-md>
     <p>By opting into <a data-link-type="dfn" href="#scripting-main-thread-script" id="ref-for-scripting-main-thread-script③">main thread script</a> features: allows for short-circuiting to <a data-link-type="dfn" href="#frameworkrendering-main-thread-rendering" id="ref-for-frameworkrendering-main-thread-rendering②">main thread rendering</a> via <a data-link-type="dfn" href="#threading-main-thread" id="ref-for-threading-main-thread⑥">main thread</a> event handling and <a data-link-type="dfn" href="#elementscomponents-eom" id="ref-for-elementscomponents-eom">EOM</a> without <a data-link-type="dfn" href="#frameworkrendering-re-rendering" id="ref-for-frameworkrendering-re-rendering②">re-rendering</a> <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component⑤">components</a>.</p>
   </ul>
   <h2 class="heading settled" data-level="7" id="engine-and-pixeling"><span class="secno">7. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-engine-and-pixeling">Engine and Pixeling</dfn></span><a class="self-link" href="#engine-and-pixeling"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="definition①"><span class="secno">7.1. </span><span class="content">Definition</span><a class="self-link" href="#definition①"></a></h3>
   <h4 class="heading settled" data-level="7.1.1" id="engine"><span class="secno">7.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-engine">Engine</dfn></span><a class="self-link" href="#engine"></a></h4>
   <p>It refers to the part of the SDK that is responsible for <a data-link-type="dfn" href="#enginepixeling-pixeling" id="ref-for-enginepixeling-pixeling④">pixeling</a> the Lynx <a data-link-type="dfn" href="#commoninfrastructure-app" id="ref-for-commoninfrastructure-app⑧">apps</a> into UIs that can be seen and interacted with by end users, and needs to be integrated natively and bundled together with the host application.
Technically,</p>
   <ul>
    <li data-md>
     <p>it is largely written in C++ and other host-platform-dependent native technologies (e.g. Objective-C for iOS, Java/Kotlin for Android, etc.), ensuring high performance and direct access to underlying system resources.</p>
    <li data-md>
     <p>It also bundled a small amount of native-coupled <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①③">script</a> as core scripting runtime libraries that implement and constitute the <a data-link-type="dfn" href="#commoninfrastructure-lynx-platform" id="ref-for-commoninfrastructure-lynx-platform④">Lynx platform</a> APIs.</p>
    <li data-md>
     <p>It’s also responsible for integrating with other native extensions (e.g. custom elements) developed by <a data-link-type="dfn" href="#lynx-native-developer" id="ref-for-lynx-native-developer①">native developers</a>.</p>
   </ul>
   <p class="note" role="note"><span class="marker">Note:</span> Implementors' Note:
By being native-coupled, it means that a <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①④">script</a> has direct, unprotected access to native code through unstable scripting environment bindings (e.g. those defined in lynx.cc, lynx_app.cc), meaning changes to native code may break the interaction with those <a data-link-type="dfn" href="#scripting-script" id="ref-for-scripting-script①⑤">scripts</a>. Therefore, they often need to be updated together to ensure runtime safety.</p>
   <h4 class="heading settled" data-level="7.1.2" id="engine-ffi"><span class="secno">7.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-engine-ffi">Engine FFI</dfn></span><a class="self-link" href="#engine-ffi"></a></h4>
    Engine FFI refers to all the <a data-link-type="dfn" href="#scripting-javascript-ffi" id="ref-for-scripting-javascript-ffi">JavaScript FFI</a> provided by <a data-link-type="dfn" href="#scripting-node-api" id="ref-for-scripting-node-api①">Node-API</a>, <a data-link-type="dfn" href="#scripting-jsi" id="ref-for-scripting-jsi①">JSI</a>, and <a data-link-type="dfn" href="#scripting-papi" id="ref-for-scripting-papi">PAPI</a> in the <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine⑤">engine</a>. 
   <h4 class="heading settled" data-level="7.1.3" id="pixeling"><span class="secno">7.1.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-pixeling">Pixeling</dfn></span><a class="self-link" href="#pixeling"></a></h4>
    The act of executing the pixel pipeline. Try changes within the bundle’s structures, such as the modifications to the <a data-link-type="dfn" href="#elementscomponents-element-tree" id="ref-for-elementscomponents-element-tree②">element tree</a>, known as element manipulation. 
   <h4 class="heading settled" data-level="7.1.4" id="pixel-pipeline①"><span class="secno">7.1.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-pixel-pipeline">Pixel Pipeline</dfn></span><a class="self-link" href="#pixel-pipeline①"></a></h4>
   <p>At a high-level, this is the main process of the <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine⑥">engine</a>.
It’s where the Lynx engine processes <a data-link-type="dfn" href="#elementscomponents-element-tree" id="ref-for-elementscomponents-element-tree③">element tree</a> into pixels that are displayed on the users' screen.</p>
   <h3 class="heading settled" data-level="7.2" id="pixel-pipeline②"><span class="secno">7.2. </span><span class="content"><a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline①⓪">Pixel Pipeline</a></span><a class="self-link" href="#pixel-pipeline②"></a></h3>
    The Pixel Pipeline consists of the following stages. 
   <h4 class="heading settled" data-level="7.2.1" id="resolve"><span class="secno">7.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-resolve">Resolve</dfn></span><a class="self-link" href="#resolve"></a></h4>
    At this stage, based on the <a data-link-type="dfn" href="#elementscomponents-attribute" id="ref-for-elementscomponents-attribute">attribute</a> of the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①">element</a>,
the <a data-link-type="dfn" href="#elementscomponents-computed-style" id="ref-for-elementscomponents-computed-style">computed style</a> and <a data-link-type="dfn" href="#elementscomponents-prop-bundle" id="ref-for-elementscomponents-prop-bundle">prop bundle</a> of the element are generated and synchronized to the <a data-link-type="dfn" href="#elementscomponents-layout-node" id="ref-for-elementscomponents-layout-node">layout node</a>.
This stage will also create and modify <a data-link-type="dfn" href="#elementscomponents-layout-node-tree" id="ref-for-elementscomponents-layout-node-tree">layout node tree</a>. At the same time, it will also generate <a data-link-type="dfn" href="#elementscomponents-ui-paint-op" id="ref-for-elementscomponents-ui-paint-op">UI paint op</a>. 
   <h5 class="heading settled" data-level="7.2.1.1" id="parallel-resolve"><span class="secno">7.2.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-parallel-resolve">Parallel Resolve</dfn></span><a class="self-link" href="#parallel-resolve"></a></h5>
    Parallel resolve is a <a data-link-type="dfn" href="#enginepixeling-resolve" id="ref-for-enginepixeling-resolve">resolve</a> process such that the pixel pipeline will spilt resolve tasks into independent sub-tasks and executing the tasks in parallel on multiple threads. 
   <h5 class="heading settled" data-level="7.2.1.2" id="serial-resolve"><span class="secno">7.2.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-serial-resolve">Serial Resolve</dfn></span><a class="self-link" href="#serial-resolve"></a></h5>
    In contrast, Serial resolve is a <a data-link-type="dfn" href="#enginepixeling-resolve" id="ref-for-enginepixeling-resolve①">resolve</a> process where all resolve tasks are executed on a single thread. 
   <h4 class="heading settled" data-level="7.2.2" id="layout"><span class="secno">7.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-layout">Layout</dfn></span><a class="self-link" href="#layout"></a></h4>
    This stage is based on <a data-link-type="dfn" href="#elementscomponents-layout-node-tree" id="ref-for-elementscomponents-layout-node-tree①">layout node tree</a> to complete the layout process, and finally synchronize the layout results to element. Element adjusts the layout results and generate <a data-link-type="dfn" href="#elementscomponents-ui-layout-op" id="ref-for-elementscomponents-ui-layout-op">UI layout op</a>. 
   <h4 class="heading settled" data-level="7.2.3" id="execute-ui-op"><span class="secno">7.2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-execute-ui-op">Execute UI OP</dfn></span><a class="self-link" href="#execute-ui-op"></a></h4>
   <h5 class="heading settled" data-level="7.2.3.1" id="execute-ui-paint-op"><span class="secno">7.2.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-execute-ui-paint-op">Execute UI Paint OP</dfn></span><a class="self-link" href="#execute-ui-paint-op"></a></h5>
    Execute the <a data-link-type="dfn" href="#elementscomponents-ui-paint-op" id="ref-for-elementscomponents-ui-paint-op①">UI Paint OP</a> generated during the pre-order stages. 
   <h5 class="heading settled" data-level="7.2.3.2" id="execute-ui-layout-op"><span class="secno">7.2.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-execute-ui-layout-op">Execute UI Layout OP</dfn></span><a class="self-link" href="#execute-ui-layout-op"></a></h5>
    Execute the <a data-link-type="dfn" href="#elementscomponents-ui-layout-op" id="ref-for-elementscomponents-ui-layout-op①">UI Layout OP</a> generated during the pre-order stages. 
   <h4 class="heading settled" data-level="7.2.4" id="paint"><span class="secno">7.2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="EnginePixeling" data-dfn-type="dfn" data-noexport id="enginepixeling-paint">Paint</dfn></span><a class="self-link" href="#paint"></a></h4>
    Based on <a data-link-type="dfn" href="#elementscomponents-platform-ui" id="ref-for-elementscomponents-platform-ui">platform UI</a> and <a data-link-type="dfn" href="#elementscomponents-platform-ui-tree" id="ref-for-elementscomponents-platform-ui-tree">platform UI Tree</a>, complete the final pixeling. 
   <h2 class="heading settled" data-level="8" id="element-layout-node-and-platform-ui"><span class="secno">8. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-layout-node-and-platform-ui">Element, Layout Node and Platform UI</dfn></span><a class="self-link" href="#element-layout-node-and-platform-ui"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="definition②"><span class="secno">8.1. </span><span class="content">Definition</span><a class="self-link" href="#definition②"></a></h3>
   <h4 class="heading settled" data-level="8.1.1" id="element-tag"><span class="secno">8.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-tag">Element Tag</dfn></span><a class="self-link" href="#element-tag"></a></h4>
    An element tag is an abstraction notion, which is a static markup structure in <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl⑤">DSL</a>,
composed of tags wrapped in angle brackets (such as &lt;view>),
used to describe the structure and semantics of the <a data-link-type="dfn" href="https://w3c.github.io/miniapp-manifest/#dfn-pages" id="ref-for-dfn-pages①">page</a>. 
   <h4 class="heading settled" data-level="8.1.2" id="element"><span class="secno">8.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element">Element</dfn></span><a class="self-link" href="#element"></a></h4>
    Element is implemented natively on the host platform.
It is a native object created during the <a data-link-type="dfn" href="#frameworkrendering-framework-rendering" id="ref-for-frameworkrendering-framework-rendering⑧">Framework Rendering</a> phase,
consisting of nodes (Node) that form a tree structure
and provide an interface for script access to and manipulation of <a data-link-type="dfn" href="https://w3c.github.io/miniapp-manifest/#dfn-pages" id="ref-for-dfn-pages②">page</a> content. 
   <h4 class="heading settled" data-level="8.1.3" id="component"><span class="secno">8.1.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-component">Component</dfn></span><a class="self-link" href="#component"></a></h4>
    An abstraction notion describing reusable, encapsulated pieces of UI that can be defined upon <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element②">elements</a>. <a data-link-type="dfn" href="#elementscomponents-component" id="ref-for-elementscomponents-component⑥">Components</a> are almost always implemented in <a data-link-type="dfn" href="#frameworkrendering-dsl" id="ref-for-frameworkrendering-dsl⑥">DSL</a>-specific <a data-link-type="dfn" href="#scripting-scripting" id="ref-for-scripting-scripting④">scripting</a>. 
   <h4 class="heading settled" data-level="8.1.4" id="layout-node"><span class="secno">8.1.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-layout-node">Layout Node</dfn></span><a class="self-link" href="#layout-node"></a></h4>
    Layout Node is a node which holds the <a data-link-type="dfn" href="#elementscomponents-layout-related-computed-style" id="ref-for-elementscomponents-layout-related-computed-style">layout related computed style</a>.
It converts the layout related computed style into data that layou engine can consume. 
   <h4 class="heading settled" data-level="8.1.5" id="platform-ui"><span class="secno">8.1.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-ui">Platform UI</dfn></span><a class="self-link" href="#platform-ui"></a></h4>
    The Platform UI is the platform-level node used to carry the paint and layout result.
In the subsequent paint phase, platform UI will use this result to complete the pixeling. 
   <h3 class="heading settled" data-level="8.2" id="element①"><span class="secno">8.2. </span><span class="content">Element</span><a class="self-link" href="#element①"></a></h3>
   <h4 class="heading settled" data-level="8.2.1" id="built-in-element"><span class="secno">8.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-built-in-element">Built-in Element</dfn></span><a class="self-link" href="#built-in-element"></a></h4>
   <p><a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element③">Elements</a> available to <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer⑤">scripting developers</a> without any extra configurations, such as &lt;page/>, &lt;view/>, &lt;image/>.</p>
   <h4 class="heading settled" data-level="8.2.2" id="custom-element"><span class="secno">8.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-custom-element">Custom Element</dfn></span><a class="self-link" href="#custom-element"></a></h4>
   <p><a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element④">Elements</a> available to <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer⑥">scripting developers</a> usually after manual installation.</p>
   <h4 class="heading settled" data-level="8.2.3" id="element-tree"><span class="secno">8.2.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-tree">Element Tree</dfn></span><a class="self-link" href="#element-tree"></a></h4>
    Element tree is a multi-branch tree composed of <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element⑤">elements</a>. 
   <h4 class="heading settled" data-level="8.2.4" id="element-attribute-or-attribute"><span class="secno">8.2.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-attribute">Element Attribute</dfn> (or <dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-attribute">Attribute</dfn>)</span><a class="self-link" href="#element-attribute-or-attribute"></a></h4>
    Attribute refers to all properties asigned to <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element⑥">element</a>. 
   <h5 class="heading settled" data-level="8.2.4.1" id="selector"><span class="secno">8.2.4.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-selector">Selector</dfn></span><a class="self-link" href="#selector"></a></h5>
    Selectors, similar to web css selectors, currently include <a data-link-type="dfn" href="#elementscomponents-tag-selector" id="ref-for-elementscomponents-tag-selector">tag selector</a>, <a data-link-type="dfn" href="#elementscomponents-id-selector" id="ref-for-elementscomponents-id-selector">id selector</a>, and <a data-link-type="dfn" href="#elementscomponents-class-selector" id="ref-for-elementscomponents-class-selector">class selector</a>. 
   <h5 class="heading settled" data-level="8.2.4.2" id="id-selector"><span class="secno">8.2.4.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-id-selector">ID Selector</dfn></span><a class="self-link" href="#id-selector"></a></h5>
    An id selector matches an element based on the content of that element’s id property. For an element to be selected, its id property must exactly match the value given in the selector. 
   <h5 class="heading settled" data-level="8.2.4.3" id="tag-selector"><span class="secno">8.2.4.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-tag-selector">Tag Selector</dfn></span><a class="self-link" href="#tag-selector"></a></h5>
    Tag selector matches an element based on the content of that element’s name. For an element to be selected, its name must exactly match the value given in the selector. 
   <h5 class="heading settled" data-level="8.2.4.4" id="class-selector"><span class="secno">8.2.4.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-class-selector">Class Selector</dfn></span><a class="self-link" href="#class-selector"></a></h5>
    Class selector matches elements based on the contents of their class property. 
   <h5 class="heading settled" data-level="8.2.4.5" id="inline-style"><span class="secno">8.2.4.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-inline-style">Inline Style</dfn></span><a class="self-link" href="#inline-style"></a></h5>
    Inline style is used to get as well as set the style property of an element with <a data-link-type="dfn" href="#elementscomponents-element-papi" id="ref-for-elementscomponents-element-papi①">Element PAPI</a>. 
   <h5 class="heading settled" data-level="8.2.4.6" id="dataset"><span class="secno">8.2.4.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-dataset">Dataset</dfn></span><a class="self-link" href="#dataset"></a></h5>
    The dataset property of the element provides read/write access to custom data property (data-*) on elements with <a data-link-type="dfn" href="#elementscomponents-element-papi" id="ref-for-elementscomponents-element-papi②">Element PAPI</a>. 
   <h5 class="heading settled" data-level="8.2.4.7" id="event-listener"><span class="secno">8.2.4.7. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-event-listener">Event Listener</dfn></span><a class="self-link" href="#event-listener"></a></h5>
    The event listener property of the element provides add/remove access to event listener property (bind/catch*) on elements with <a data-link-type="dfn" href="#elementscomponents-element-papi" id="ref-for-elementscomponents-element-papi③">Element PAPI</a>. 
   <h4 class="heading settled" data-level="8.2.5" id="element-tree-operation"><span class="secno">8.2.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-tree-operation">Element Tree Operation</dfn></span><a class="self-link" href="#element-tree-operation"></a></h4>
    Element Tree Operation refers to various operations on an <a data-link-type="dfn" href="#elementscomponents-element-tree" id="ref-for-elementscomponents-element-tree④">element tree</a>. 
   <h5 class="heading settled" data-level="8.2.5.1" id="element-tree-mutation"><span class="secno">8.2.5.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-tree-mutation">Element Tree Mutation</dfn></span><a class="self-link" href="#element-tree-mutation"></a></h5>
    Element Tree Mutation refers to <a data-link-type="dfn" href="#elementscomponents-element-tree-operation" id="ref-for-elementscomponents-element-tree-operation">element tree operations</a> that insert, delete, or replace <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element⑦">elements</a> within the <a data-link-type="dfn" href="#elementscomponents-element-tree" id="ref-for-elementscomponents-element-tree⑤">element tree</a>. 
   <h5 class="heading settled" data-level="8.2.5.2" id="selector-query"><span class="secno">8.2.5.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-selector-query">Selector Query</dfn></span><a class="self-link" href="#selector-query"></a></h5>
    Selector Query is a type of <a data-link-type="dfn" href="#elementscomponents-element-tree-operation" id="ref-for-elementscomponents-element-tree-operation①">element tree operation</a>,
which will perform a method steps which are to return the first result or all results of running scope-match a specific <a data-link-type="dfn" href="#elementscomponents-selector" id="ref-for-elementscomponents-selector">selector</a> or <a data-link-type="dfn" href="#elementscomponents-attribute" id="ref-for-elementscomponents-attribute①">attribute</a> against the target <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element⑧">element</a>. 
   <h4 class="heading settled" data-level="8.2.6" id="element-operation"><span class="secno">8.2.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-operation">Element Operation</dfn></span><a class="self-link" href="#element-operation"></a></h4>
    Element Tree Operation refers to various operations on an element. 
   <h5 class="heading settled" data-level="8.2.6.1" id="element-mutation"><span class="secno">8.2.6.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-mutation">Element Mutation</dfn></span><a class="self-link" href="#element-mutation"></a></h5>
    Element Tree Mutation refers to <a data-link-type="dfn" href="#elementscomponents-element-tree-operation" id="ref-for-elementscomponents-element-tree-operation②">element tree operations</a> that set, get <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element⑨">element</a>’s attribute within the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①⓪">element</a>. 
   <h5 class="heading settled" data-level="8.2.6.2" id="element-method"><span class="secno">8.2.6.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-method">Element Method</dfn></span><a class="self-link" href="#element-method"></a></h5>
    Element Method refers to the methods provided by the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①①">element</a> that can be used to retrieve information about the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①②">element</a> or manipulate the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①③">element</a>, such as boundingClientRect, animate, and other methods. 
   <h4 class="heading settled" data-level="8.2.7" id="element-related-api"><span class="secno">8.2.7. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-related-api">Element Related API</dfn></span><a class="self-link" href="#element-related-api"></a></h4>
   <h5 class="heading settled" data-level="8.2.7.1" id="element-papi"><span class="secno">8.2.7.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-papi">Element PAPI</dfn></span><a class="self-link" href="#element-papi"></a></h5>
    The <a data-link-type="dfn" href="#scripting-mts" id="ref-for-scripting-mts">MTS</a> environment exposes APIs based on <a data-link-type="dfn" href="#scripting-papi" id="ref-for-scripting-papi①">PAPI</a> to scripting framework developers. Using these APIs, the developers can perform <a data-link-type="dfn" href="#elementscomponents-element-tree-operation" id="ref-for-elementscomponents-element-tree-operation③">element tree operations</a> and <a data-link-type="dfn" href="#elementscomponents-element-operation" id="ref-for-elementscomponents-element-operation">element operations</a>. 
   <h5 class="heading settled" data-level="8.2.7.2" id="element-object-model-or-eom"><span class="secno">8.2.7.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-object-model">Element Object Model</dfn> (or <dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-eom">EOM</dfn>)</span><a class="self-link" href="#element-object-model-or-eom"></a></h5>
    EOM is the Object Model encapsulated based on <a data-link-type="dfn" href="#elementscomponents-element-papi" id="ref-for-elementscomponents-element-papi④">Element PAPI</a> exposed to script developers in the <a data-link-type="dfn" href="#scripting-mts" id="ref-for-scripting-mts①">MTS</a> environment. Based on EOM, developers can perform <a data-link-type="dfn" href="#elementscomponents-element-tree-operation" id="ref-for-elementscomponents-element-tree-operation④">element tree operations</a> and <a data-link-type="dfn" href="#elementscomponents-element-operation" id="ref-for-elementscomponents-element-operation①">element operations</a>. 
   <h5 class="heading settled" data-level="8.2.7.3" id="element-inter-thread-call-or-element-itc"><span class="secno">8.2.7.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-inter-thread-call">Element Inter Thread Call</dfn> (or <dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-itc">Element ITC</dfn>)</span><a class="self-link" href="#element-inter-thread-call-or-element-itc"></a></h5>
    Element ITC is the <a data-link-type="dfn" href="#scripting-inter-thread-call" id="ref-for-scripting-inter-thread-call">inter thread call</a> exposed to script developers in the <a data-link-type="dfn" href="#scripting-bts" id="ref-for-scripting-bts">BTS</a> environment. Based on this, developers can perform <a data-link-type="dfn" href="#elementscomponents-element-tree-operation" id="ref-for-elementscomponents-element-tree-operation⑤">element tree operations</a> and <a data-link-type="dfn" href="#elementscomponents-element-operation" id="ref-for-elementscomponents-element-operation②">element operations</a> across threads. 
   <h5 class="heading settled" data-level="8.2.7.4" id="element-selector-query-api"><span class="secno">8.2.7.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-element-selector-query-api">Element Selector Query API</dfn></span><a class="self-link" href="#element-selector-query-api"></a></h5>
    Element Selector Query API is an implementation of <a data-link-type="dfn" href="#elementscomponents-element-itc" id="ref-for-elementscomponents-element-itc">Element ITC</a>, allowing script developers to use it to generate an element handle in the background thread
for <a data-link-type="dfn" href="#scripting-inter-thread-call" id="ref-for-scripting-inter-thread-call①">inter thread call</a> of <a data-link-type="dfn" href="#elementscomponents-element-method" id="ref-for-elementscomponents-element-method">element methods</a>. 
   <h4 class="heading settled" data-level="8.2.8" id="computed-style"><span class="secno">8.2.8. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-computed-style">Computed Style</dfn></span><a class="self-link" href="#computed-style"></a></h4>
    Computed style is the final style that <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline①①">pixel pipeline</a> aggregates from all the <a data-link-type="dfn" href="#elementscomponents-selector" id="ref-for-elementscomponents-selector①">selector</a> and <a data-link-type="dfn" href="#elementscomponents-inline-style" id="ref-for-elementscomponents-inline-style">inline style</a> of an element according to the <a data-link-type="dfn" href="#styling-style-sheet" id="ref-for-styling-style-sheet①">style sheet</a>. 
   <h5 class="heading settled" data-level="8.2.8.1" id="paint-related-computed-style"><span class="secno">8.2.8.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-paint-related-computed-style">Paint Related Computed Style</dfn></span><a class="self-link" href="#paint-related-computed-style"></a></h5>
    Paint Related Computed Style refers to styles related to paint, such as background, color, and etc. 
   <h5 class="heading settled" data-level="8.2.8.2" id="layout-related-computed-style"><span class="secno">8.2.8.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-layout-related-computed-style">Layout Related Computed Style</dfn></span><a class="self-link" href="#layout-related-computed-style"></a></h5>
    Layout Related Computed Style refers to styles related to layout, such as width, height, and etc. 
   <h4 class="heading settled" data-level="8.2.9" id="prop-bundle"><span class="secno">8.2.9. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-prop-bundle">Prop Bundle</dfn></span><a class="self-link" href="#prop-bundle"></a></h4>
    Prop Bundle consists of the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①④">element</a>’s <a data-link-type="dfn" href="#elementscomponents-attribute" id="ref-for-elementscomponents-attribute②">attribute</a> and <a data-link-type="dfn" href="#elementscomponents-paint-related-computed-style" id="ref-for-elementscomponents-paint-related-computed-style">paint related computed style</a>. 
   <h3 class="heading settled" data-level="8.3" id="layout-node①"><span class="secno">8.3. </span><span class="content">Layout Node</span><a class="self-link" href="#layout-node①"></a></h3>
   <h4 class="heading settled" data-level="8.3.1" id="layout-node-tree"><span class="secno">8.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-layout-node-tree">Layout Node Tree</dfn></span><a class="self-link" href="#layout-node-tree"></a></h4>
    Layout Node Tree is a multi-branch tree composed of <a data-link-type="dfn" href="#elementscomponents-layout-node" id="ref-for-elementscomponents-layout-node①">layout nodes</a>. 
   <h4 class="heading settled" data-level="8.3.2" id="platform-layout-node"><span class="secno">8.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-layout-node">Platform Layout Node</dfn></span><a class="self-link" href="#platform-layout-node"></a></h4>
    Platform Layout Node is created and held by <a data-link-type="dfn" href="#elementscomponents-layout-node" id="ref-for-elementscomponents-layout-node②">layout node</a>. Some specific element nodes, such as text, inline-text, inline-view, and etc require platform capabilities for measurement. For these types of element nodes, a platform layout node will be created. 
   <p class="note" role="note"><span class="marker">Note:</span> Explainers to <a data-link-type="dfn" href="#lynx-lynx-developer" id="ref-for-lynx-lynx-developer⑦">Lynx developers</a> in Lynx development, the layout engine of Lynx is named as starlight,
which is an independent layout engine that supports various layout algorithms,
including flex, linear, grid and etc. It also exposes capabilities for custom measure and custom layout,
providing users with the flexibility to extend its functionality.</p>
   <h3 class="heading settled" data-level="8.4" id="platform-ui①"><span class="secno">8.4. </span><span class="content">Platform UI</span><a class="self-link" href="#platform-ui①"></a></h3>
   <h4 class="heading settled" data-level="8.4.1" id="platform-ui-primitives"><span class="secno">8.4.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-ui-primitives">Platform UI Primitives</dfn></span><a class="self-link" href="#platform-ui-primitives"></a></h4>
    Platform UI Primitives refer to the host platform objects that are actually used for pixeling. On Android, the primitives are the native Android Views, and on iOS, they are the UIView objects provided by iOS UIKit. 
   <h4 class="heading settled" data-level="8.4.2" id="platform-ui-tree"><span class="secno">8.4.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-ui-tree">Platform UI Tree</dfn></span><a class="self-link" href="#platform-ui-tree"></a></h4>
    UI Tree is a multi-branch tree composed of <a data-link-type="dfn" href="#elementscomponents-platform-ui" id="ref-for-elementscomponents-platform-ui①">platform UIs</a>. 
   <h4 class="heading settled" data-level="8.4.3" id="platform-ui-operations-or-ui-op"><span class="secno">8.4.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-ui-operations">Platform UI Operations</dfn> (or <dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-ui-op">UI OP</dfn>)</span><a class="self-link" href="#platform-ui-operations-or-ui-op"></a></h4>
    Platform UI Operations refers to the operations on the <a data-link-type="dfn" href="#elementscomponents-platform-ui" id="ref-for-elementscomponents-platform-ui②">platform UI</a> and <a data-link-type="dfn" href="#elementscomponents-platform-ui-tree" id="ref-for-elementscomponents-platform-ui-tree①">platform UI Tree</a> generated during <a data-link-type="dfn" href="#enginepixeling-pixel-pipeline" id="ref-for-enginepixeling-pixel-pipeline①②">pixel pipeline</a>.
It consists of <a data-link-type="dfn" href="#elementscomponents-platform-ui-paint-operations" id="ref-for-elementscomponents-platform-ui-paint-operations">platform UI paint operations</a> and <a data-link-type="dfn" href="#elementscomponents-platform-ui-layout-operations" id="ref-for-elementscomponents-platform-ui-layout-operations">platform UI layout operations</a>. 
   <h5 class="heading settled" data-level="8.4.3.1" id="platform-ui-paint-operations-or-ui-paint-op"><span class="secno">8.4.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-ui-paint-operations">Platform UI Paint Operations</dfn> (or <dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-ui-paint-op">UI Paint OP</dfn>)</span><a class="self-link" href="#platform-ui-paint-operations-or-ui-paint-op"></a></h5>
    UI Paint OP is composed of <a data-link-type="dfn" href="#elementscomponents-platform-ui" id="ref-for-elementscomponents-platform-ui③">platform UI</a> mutation operations and <a data-link-type="dfn" href="#elementscomponents-platform-ui-tree" id="ref-for-elementscomponents-platform-ui-tree②">platform UI tree</a> mutation operations. 
   <h5 class="heading settled" data-level="8.4.3.2" id="platform-ui-layout-operations-or-ui-layout-op"><span class="secno">8.4.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-platform-ui-layout-operations">Platform UI Layout Operations</dfn> (or <dfn class="dfn-paneled" data-dfn-for="ElementsComponents" data-dfn-type="dfn" data-noexport id="elementscomponents-ui-layout-op">UI Layout OP</dfn>)</span><a class="self-link" href="#platform-ui-layout-operations-or-ui-layout-op"></a></h5>
    UI Layout OP currently only includes the operations to update measure and layout info to <a data-link-type="dfn" href="#elementscomponents-platform-ui" id="ref-for-elementscomponents-platform-ui④">platform UI</a>. 
   <h2 class="heading settled" data-level="9" id="styling"><span class="secno">9. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="Styling" data-dfn-type="dfn" data-noexport id="styling-styling">Styling</dfn></span><a class="self-link" href="#styling"></a></h2>
   <p>The specifications related to Lynx Styling are similar to those of W3C, including but not limited to <dfn class="dfn-paneled" data-dfn-for="Styling" data-dfn-type="dfn" data-noexport id="styling-style-sheet">Style Sheet</dfn>, <dfn class="dfn-paneled" data-dfn-for="Styling" data-dfn-type="dfn" data-noexport id="styling-style-rule">Style Rule</dfn>, <dfn class="dfn-paneled" data-dfn-for="Styling" data-dfn-type="dfn" data-noexport id="styling-css-style-rule">CSS Style Rule</dfn>, and <dfn class="dfn-paneled" data-dfn-for="Styling" data-dfn-type="dfn" data-noexport id="styling-style-property">Style Property</dfn>.</p>
   <h2 class="heading settled" data-level="10" id="user-interaction"><span class="secno">10. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-user-interaction">User Interaction</dfn></span><a class="self-link" href="#user-interaction"></a></h2>
   <h3 class="heading settled" data-level="10.1" id="event"><span class="secno">10.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event">Event</dfn></span><a class="self-link" href="#event"></a></h3>
   <p>An event is an abstraction notion describing the signal that triggers an action in the system.
This action may be triggered by the <a data-link-type="dfn" href="#lynx-scripting-developer" id="ref-for-lynx-scripting-developer⑦">scripting developer</a>, the <a data-link-type="dfn" href="#lynx-native-developer" id="ref-for-lynx-native-developer②">native developer</a> or the users' interaction.</p>
   <h4 class="heading settled" data-level="10.1.1" id="event-object"><span class="secno">10.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-object">Event Object</dfn></span><a class="self-link" href="#event-object"></a></h4>
   <p>An Event object is an object that contains state information related to an <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event">event</a>.
It is implemented natively on the host platform.</p>
   <h4 class="heading settled" data-level="10.1.2" id="main-thread-event-object"><span class="secno">10.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-main-thread-event-object">Main Thread Event Object</dfn></span><a class="self-link" href="#main-thread-event-object"></a></h4>
    Main Thread Event is a script object initialized by the <a data-link-type="dfn" href="#scripting-main-thread-runtime" id="ref-for-scripting-main-thread-runtime⑤">main thread runtime</a> based on the event object, and it is not a host object. 
   <h4 class="heading settled" data-level="10.1.3" id="background-thread-event-object"><span class="secno">10.1.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-background-thread-event-object">Background Thread Event Object</dfn></span><a class="self-link" href="#background-thread-event-object"></a></h4>
    Background Thread Event is an object passed to <a data-link-type="dfn" href="#scripting-background-thread-runtime" id="ref-for-scripting-background-thread-runtime②">background thread runtime</a> by the <a data-link-type="dfn" href="#enginepixeling-engine" id="ref-for-enginepixeling-engine⑦">engine</a> based on the event object with <a data-link-type="dfn" href="#scripting-inter-thread-call" id="ref-for-scripting-inter-thread-call②">inter thread call</a>, and it is also not a binding object. 
   <h3 class="heading settled" data-level="10.2" id="event-listening"><span class="secno">10.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-listening">Event Listening</dfn></span><a class="self-link" href="#event-listening"></a></h3>
   <p><a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①⑤">elements</a> listen for <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event①">events</a> by setting the <a data-link-type="dfn" href="#userinteraction-event-handler" id="ref-for-userinteraction-event-handler">event handler</a>.</p>
   <h4 class="heading settled" data-level="10.2.1" id="event-handler"><span class="secno">10.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-handler">Event Handler</dfn></span><a class="self-link" href="#event-handler"></a></h4>
    Event Handler is the value of the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①⑥">element</a>’s <a data-link-type="dfn" href="#elementscomponents-event-listener" id="ref-for-elementscomponents-event-listener">event listener</a>, which serves as a handle for the <a data-link-type="dfn" href="#scripting-mts" id="ref-for-scripting-mts②">MTS</a> closure or <a data-link-type="dfn" href="#scripting-bts" id="ref-for-scripting-bts①">BTS</a> closure.
When an event is triggered, the corresponding <a data-link-type="dfn" href="#scripting-procedure-call" id="ref-for-scripting-procedure-call">procedure call</a> will be invoked based on the event handler. 
   <h5 class="heading settled" data-level="10.2.1.1" id="main-thread-event-handler"><span class="secno">10.2.1.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-main-thread-event-handler">Main Thread Event Handler</dfn></span><a class="self-link" href="#main-thread-event-handler"></a></h5>
    When the closure handled by the <a data-link-type="dfn" href="#userinteraction-event-handler" id="ref-for-userinteraction-event-handler①">event handler</a> is an <a data-link-type="dfn" href="#scripting-mts" id="ref-for-scripting-mts③">MTS</a> closure, it is referred to as the Main Thread Event Handler. 
   <h5 class="heading settled" data-level="10.2.1.2" id="background-thread-event-handler"><span class="secno">10.2.1.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-background-thread-event-handler">Background Thread Event Handler</dfn></span><a class="self-link" href="#background-thread-event-handler"></a></h5>
    When the closure handled by the <a data-link-type="dfn" href="#userinteraction-event-handler" id="ref-for-userinteraction-event-handler②">event handler</a> is an <a data-link-type="dfn" href="#scripting-bts" id="ref-for-scripting-bts②">BTS</a> closure, it is referred to as the Background Thread Event Handler. 
   <h4 class="heading settled" data-level="10.2.2" id="event-handler-function"><span class="secno">10.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-handler-function">Event Handler Function</dfn></span><a class="self-link" href="#event-handler-function"></a></h4>
    Event handler function is a <a data-link-type="dfn" href="#scripting-bts" id="ref-for-scripting-bts③">BTS</a> or <a data-link-type="dfn" href="#scripting-mts" id="ref-for-scripting-mts④">MTS</a> closure that accepts an <a data-link-type="dfn" href="#userinteraction-event-object" id="ref-for-userinteraction-event-object">event object</a>. 
   <h5 class="heading settled" data-level="10.2.2.1" id="main-thread-event-handler-function"><span class="secno">10.2.2.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-main-thread-event-handler-function">Main Thread Event Handler Function</dfn></span><a class="self-link" href="#main-thread-event-handler-function"></a></h5>
    Event handler function is a <a data-link-type="dfn" href="#scripting-mts" id="ref-for-scripting-mts⑤">MTS</a> closure that accepts an <a data-link-type="dfn" href="#userinteraction-main-thread-event-object" id="ref-for-userinteraction-main-thread-event-object">main thread event object</a>. 
   <h5 class="heading settled" data-level="10.2.2.2" id="background-thread-event-handler-function"><span class="secno">10.2.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-background-thread-event-handler-function">Background Thread Event Handler Function</dfn></span><a class="self-link" href="#background-thread-event-handler-function"></a></h5>
    Event handler function is a <a data-link-type="dfn" href="#scripting-bts" id="ref-for-scripting-bts④">BTS</a> closure that accepts an <a data-link-type="dfn" href="#userinteraction-background-thread-event-object" id="ref-for-userinteraction-background-thread-event-object">background thread event object</a>. 
   <h3 class="heading settled" data-level="10.3" id="event-propagation"><span class="secno">10.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-propagation">Event Propagation</dfn></span><a class="self-link" href="#event-propagation"></a></h3>
   <p>When an <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event②">event</a> is triggered, it will propagate on the <a data-link-type="dfn" href="#userinteraction-event-respond-chain" id="ref-for-userinteraction-event-respond-chain">event respond chain</a>, triggering the corresponding <a data-link-type="dfn" href="#userinteraction-event-handler-function" id="ref-for-userinteraction-event-handler-function">event handler function</a> according to the <a data-link-type="dfn" href="#userinteraction-event-handler" id="ref-for-userinteraction-event-handler③">event handler</a>.</p>
   <h4 class="heading settled" data-level="10.3.1" id="event-respond-chain"><span class="secno">10.3.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-respond-chain">Event Respond Chain</dfn></span><a class="self-link" href="#event-respond-chain"></a></h4>
   <p>The event response chain consists of a series of <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①⑦">elements</a> that can respond to <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event③">events</a>. It generally contains <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①⑧">elements</a> on the path from the root <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element①⑨">element</a> to the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element②⓪">element</a> where the action actually occurs.</p>
   <h4 class="heading settled" data-level="10.3.2" id="event-capture"><span class="secno">10.3.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-capture">Event Capture</dfn></span><a class="self-link" href="#event-capture"></a></h4>
   <p>In the event capture stage, the <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event④">event</a> will start from the root <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element②①">element</a> and propagate down along the <a data-link-type="dfn" href="#userinteraction-event-respond-chain" id="ref-for-userinteraction-event-respond-chain①">event respond chain</a> until the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element②②">element</a> where the action is actually triggered.</p>
   <h4 class="heading settled" data-level="10.3.3" id="event-bubble"><span class="secno">10.3.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-bubble">Event Bubble</dfn></span><a class="self-link" href="#event-bubble"></a></h4>
   <p>In the event bubbling phase, the <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event⑤">event</a> will propagate upward along the <a data-link-type="dfn" href="#userinteraction-event-respond-chain" id="ref-for-userinteraction-event-respond-chain②">event respond chain</a> from the <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element②③">element</a> where the action is actually triggered, until the root <a data-link-type="dfn" href="#elementscomponents-element" id="ref-for-elementscomponents-element②④">element</a>.</p>
   <h4 class="heading settled" data-level="10.3.4" id="event-interception"><span class="secno">10.3.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-for="UserInteraction" data-dfn-type="dfn" data-noexport id="userinteraction-event-interception">Event Interception</dfn></span><a class="self-link" href="#event-interception"></a></h4>
   <p>During the process of <a data-link-type="dfn" href="#userinteraction-event-propagation" id="ref-for-userinteraction-event-propagation">event propagation</a>, the <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event⑥">event</a> can be intercepted midway to prevent the <a data-link-type="dfn" href="#userinteraction-event" id="ref-for-userinteraction-event⑦">event</a> from continuing to propagate.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note.</p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don't scroll to compensate for the ToC if we're above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don't know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn't exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn't standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don't have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we're at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can't find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#commoninfrastructure-app">APP</a><span>, in § 2.1.1</span>
   <li><a href="#elementscomponents-attribute">Attribute</a><span>, in § 8.2.4</span>
   <li><a href="#frameworkrendering-background-driven-rendering">Background-driven Rendering</a><span>, in § 6.2.4</span>
   <li><a href="#threading-background-scripting-thread">Background Scripting Thread</a><span>, in § 3.2.2</span>
   <li><a href="#threading-background-thread">Background Thread</a><span>, in § 3.3.3</span>
   <li><a href="#userinteraction-background-thread-event-handler">Background Thread Event Handler</a><span>, in § 10.2.1.2</span>
   <li><a href="#userinteraction-background-thread-event-handler-function">Background Thread Event Handler Function</a><span>, in § 10.2.2.2</span>
   <li><a href="#userinteraction-background-thread-event-object">Background Thread Event Object</a><span>, in § 10.1.3</span>
   <li><a href="#scripting-background-thread-runtime">Background Thread Runtime</a><span>, in § 4.4.3.1</span>
   <li><a href="#scripting-background-thread-script">Background Thread Script</a><span>, in § 4.4.3.2</span>
   <li><a href="#scripting-bts">BTS</a><span>, in § 4.4.3.2</span>
   <li><a href="#elementscomponents-built-in-element">Built-in Element</a><span>, in § 8.2.1</span>
   <li><a href="#commoninfrastructure-bundle">Bundle</a><span>, in § 2.2.1</span>
   <li><a href="#scripting-call">Call</a><span>, in § 4.5</span>
   <li><a href="#elementscomponents-class-selector">Class Selector</a><span>, in § 8.2.4.4</span>
   <li><a href="#commoninfrastructure-common-infrastructure">Common Infrastructure</a><span>, in § 2</span>
   <li><a href="#elementscomponents-component">Component</a><span>, in § 8.1.3</span>
   <li><a href="#elementscomponents-computed-style">Computed Style</a><span>, in § 8.2.8</span>
   <li><a href="#commoninfrastructure-container">Container</a><span>, in § 2.1.2</span>
   <li><a href="#styling-css-style-rule">CSS Style Rule</a><span>, in § 9</span>
   <li><a href="#elementscomponents-custom-element">Custom Element</a><span>, in § 8.2.2</span>
   <li><a href="#elementscomponents-dataset">Dataset</a><span>, in § 8.2.4.6</span>
   <li><a href="#frameworkrendering-domain-specific-language">Domain-specific Language</a><span>, in § 6.1.1</span>
   <li><a href="#frameworkrendering-dsl">DSL</a><span>, in § 6.1.1</span>
   <li><a href="#threading-dual-threaded-model">Dual-threaded Model</a><span>, in § 3.3.4</span>
   <li><a href="#elementscomponents-element">Element</a><span>, in § 8.1.2</span>
   <li><a href="#elementscomponents-element-attribute">Element Attribute</a><span>, in § 8.2.4</span>
   <li><a href="#elementscomponents-element-inter-thread-call">Element Inter Thread Call</a><span>, in § 8.2.7.3</span>
   <li><a href="#elementscomponents-element-itc">Element ITC</a><span>, in § 8.2.7.3</span>
   <li><a href="#elementscomponents-element-layout-node-and-platform-ui">Element, Layout Node and Platform UI</a><span>, in § 8</span>
   <li><a href="#elementscomponents-element-method">Element Method</a><span>, in § 8.2.6.2</span>
   <li><a href="#elementscomponents-element-mutation">Element Mutation</a><span>, in § 8.2.6.1</span>
   <li><a href="#elementscomponents-element-object-model">Element Object Model</a><span>, in § 8.2.7.2</span>
   <li><a href="#elementscomponents-element-operation">Element Operation</a><span>, in § 8.2.6</span>
   <li><a href="#elementscomponents-element-papi">Element PAPI</a><span>, in § 8.2.7.1</span>
   <li><a href="#elementscomponents-element-related-api">Element Related API</a><span>, in § 8.2.7</span>
   <li><a href="#elementscomponents-element-selector-query-api">Element Selector Query API</a><span>, in § 8.2.7.4</span>
   <li><a href="#elementscomponents-element-tag">Element Tag</a><span>, in § 8.1.1</span>
   <li><a href="#elementscomponents-element-tree">Element Tree</a><span>, in § 8.2.3</span>
   <li><a href="#elementscomponents-element-tree-mutation">Element Tree Mutation</a><span>, in § 8.2.5.1</span>
   <li><a href="#elementscomponents-element-tree-operation">Element Tree Operation</a><span>, in § 8.2.5</span>
   <li><a href="#commoninfrastructure-embedded">Embedded</a><span>, in § 2.3.2</span>
   <li><a href="#enginepixeling-engine">Engine</a><span>, in § 7.1.1</span>
   <li><a href="#enginepixeling-engine-and-pixeling">Engine and Pixeling</a><span>, in § 7</span>
   <li><a href="#lynx-engine-developer">Engine Developer</a><span>, in § 1.2.5</span>
   <li><a href="#enginepixeling-engine-ffi">Engine FFI</a><span>, in § 7.1.2</span>
   <li><a href="#threading-engine-thread">Engine Thread</a><span>, in § 3.2.3</span>
   <li><a href="#elementscomponents-eom">EOM</a><span>, in § 8.2.7.2</span>
   <li><a href="#userinteraction-event">Event</a><span>, in § 10.1</span>
   <li><a href="#userinteraction-event-bubble">Event Bubble</a><span>, in § 10.3.3</span>
   <li><a href="#userinteraction-event-capture">Event Capture</a><span>, in § 10.3.2</span>
   <li><a href="#userinteraction-event-handler">Event Handler</a><span>, in § 10.2.1</span>
   <li><a href="#userinteraction-event-handler-function">Event Handler Function</a><span>, in § 10.2.2</span>
   <li><a href="#userinteraction-event-interception">Event Interception</a><span>, in § 10.3.4</span>
   <li><a href="#elementscomponents-event-listener">Event Listener</a><span>, in § 8.2.4.7</span>
   <li><a href="#userinteraction-event-listening">Event Listening</a><span>, in § 10.2</span>
   <li><a href="#userinteraction-event-object">Event Object</a><span>, in § 10.1.1</span>
   <li><a href="#userinteraction-event-propagation">Event Propagation</a><span>, in § 10.3</span>
   <li><a href="#userinteraction-event-respond-chain">Event Respond Chain</a><span>, in § 10.3.1</span>
   <li><a href="#enginepixeling-execute-ui-layout-op">Execute UI Layout OP</a><span>, in § 7.2.3.2</span>
   <li><a href="#enginepixeling-execute-ui-op">Execute UI OP</a><span>, in § 7.2.3</span>
   <li><a href="#enginepixeling-execute-ui-paint-op">Execute UI Paint OP</a><span>, in § 7.2.3.1</span>
   <li><a href="#frameworkrendering-first-screen-rendering">First-screen Rendering</a><span>, in § 6.2.5</span>
   <li><a href="#frameworkrendering-framework">Framework</a><span>, in § 6.1.2</span>
   <li><a href="#frameworkrendering-framework-and-rendering">Framework and Rendering</a><span>, in § 6</span>
   <li><a href="#frameworkrendering-framework-rendering">Framework Rendering</a><span>, in § 6.2.2</span>
   <li><a href="#frameworkrendering-fsr">FSR</a><span>, in § 6.2.5</span>
   <li><a href="#scripting-hermes">Hermes</a><span>, in § 4.2.3.1</span>
   <li><a href="#commoninfrastructure-host-platform">Host Platform</a><span>, in § 2.1.6</span>
   <li><a href="#elementscomponents-id-selector">ID Selector</a><span>, in § 8.2.4.2</span>
   <li><a href="#elementscomponents-inline-style">Inline Style</a><span>, in § 8.2.4.5</span>
   <li><a href="#scripting-inter-thread-call">Inter Thread Call</a><span>, in § 4.5.2</span>
   <li><a href="#scripting-itc">ITC</a><span>, in § 4.5.2</span>
   <li><a href="#scripting-javascript-core">JavaScript Core</a><span>, in § 4.2.3.1</span>
   <li><a href="#scripting-javascript-engine">JavaScript Engine</a><span>, in § 4.2.2</span>
   <li><a href="#scripting-javascript-ffi">JavaScript FFI</a><span>, in § 4.3</span>
   <li><a href="#scripting-javascript-interface">JavaScript Interface</a><span>, in § 4.3.2</span>
   <li><a href="#scripting-javascript-script">JavaScript Script</a><span>, in § 4.1.2</span>
   <li><a href="#scripting-jsi">JSI</a><span>, in § 4.3.2</span>
   <li><a href="#threading-js-thread">JS Thread</a><span>, in § 3.2.2</span>
   <li><a href="#enginepixeling-layout">Layout</a><span>, in § 7.2.2</span>
   <li><a href="#elementscomponents-layout-node">Layout Node</a><span>, in § 8.1.4</span>
   <li><a href="#elementscomponents-layout-node-tree">Layout Node Tree</a><span>, in § 8.3.1</span>
   <li><a href="#elementscomponents-layout-related-computed-style">Layout Related Computed Style</a><span>, in § 8.2.8.2</span>
   <li><a href="#threading-layout-thread">Layout Thread</a><span>, in § 3.2.4</span>
   <li><a href="#commoninfrastructure-lazy-bundle">Lazy Bundle</a><span>, in § 2.2.2</span>
   <li><a href="#pipeline-load">Load</a><span>, in § 5.1.1</span>
   <li><a href="#commoninfrastructure-lynx-bundle">Lynx Bundle</a><span>, in § 2.2.1</span>
   <li><a href="#lynx-lynx-contributor">Lynx Contributor</a><span>, in § 1.2.6</span>
   <li><a href="#lynx-lynx-developer">Lynx Developer</a><span>, in § 1.2.3</span>
   <li><a href="#commoninfrastructure-lynx-group">Lynx Group</a><span>, in § 2.2.7</span>
   <li><a href="#threading-lynx-main-thread">Lynx Main Thread</a><span>, in § 3.3.2</span>
   <li><a href="#commoninfrastructure-lynx-pipeline">Lynx Pipeline</a><span>, in § 2.1.5</span>
   <li><a href="#commoninfrastructure-lynx-platform">Lynx Platform</a><span>, in § 2.1.4</span>
   <li><a href="#commoninfrastructure-lynxview">LynxView</a><span>, in § 2.2.4</span>
   <li><a href="#threading-main-thread">Main Thread</a><span>, in § 3.3.2</span>
   <li><a href="#userinteraction-main-thread-event-handler">Main Thread Event Handler</a><span>, in § 10.2.1.1</span>
   <li><a href="#userinteraction-main-thread-event-handler-function">Main Thread Event Handler Function</a><span>, in § 10.2.2.1</span>
   <li><a href="#userinteraction-main-thread-event-object">Main Thread Event Object</a><span>, in § 10.1.2</span>
   <li><a href="#frameworkrendering-main-thread-rendering">Main Thread Rendering</a><span>, in § 6.2.3</span>
   <li><a href="#scripting-main-thread-runtime">Main Thread Runtime</a><span>, in § 4.4.2.1</span>
   <li><a href="#scripting-main-thread-script">Main Thread Script</a><span>, in § 4.4.2.2</span>
   <li><a href="#scripting-mts">MTS</a><span>, in § 4.4.2.2</span>
   <li><a href="#scripting-n-api">N-API</a><span>, in § 4.3.1</span>
   <li><a href="#lynx-native-developer">Native Developer</a><span>, in § 1.2.4</span>
   <li><a href="#scripting-native-module">Native Module</a><span>, in § 4.6</span>
   <li><a href="#scripting-node-api">Node-API</a><span>, in § 4.3.1</span>
   <li><a href="#threading-off-main-thread">Off-Main-Thread</a><span>, in § 3.3.3</span>
   <li><a href="#enginepixeling-paint">Paint</a><span>, in § 7.2.4</span>
   <li><a href="#elementscomponents-paint-related-computed-style">Paint Related Computed Style</a><span>, in § 8.2.8.1</span>
   <li><a href="#scripting-papi">PAPI</a><span>, in § 4.3.3</span>
   <li><a href="#enginepixeling-parallel-resolve">Parallel Resolve</a><span>, in § 7.2.1.1</span>
   <li><a href="#pipeline-parse">Parse</a><span>, in § 5.1.2</span>
   <li><a href="#threading-physical-thread">Physical Thread</a><span>, in § 3.1.1</span>
   <li><a href="#enginepixeling-pixeling">Pixeling</a><span>, in § 7.1.3</span>
   <li><a href="#enginepixeling-pixel-pipeline">Pixel Pipeline</a><span>, in § 7.1.4</span>
   <li><a href="#elementscomponents-platform-layout-node">Platform Layout Node</a><span>, in § 8.3.2</span>
   <li><a href="#elementscomponents-platform-ui">Platform UI</a><span>, in § 8.1.5</span>
   <li><a href="#elementscomponents-platform-ui-layout-operations">Platform UI Layout Operations</a><span>, in § 8.4.3.2</span>
   <li><a href="#elementscomponents-platform-ui-operations">Platform UI Operations</a><span>, in § 8.4.3</span>
   <li><a href="#elementscomponents-platform-ui-paint-operations">Platform UI Paint Operations</a><span>, in § 8.4.3.1</span>
   <li><a href="#elementscomponents-platform-ui-primitives">Platform UI Primitives</a><span>, in § 8.4.1</span>
   <li><a href="#elementscomponents-platform-ui-tree">Platform UI Tree</a><span>, in § 8.4.2</span>
   <li><a href="#scripting-primjs-api">PrimJS API</a><span>, in § 4.3.3</span>
   <li><a href="#scripting-primjs-vm">PrimJS VM</a><span>, in § 4.2.3.2</span>
   <li><a href="#scripting-procedure-call">Procedure Call</a><span>, in § 4.5</span>
   <li><a href="#elementscomponents-prop-bundle">Prop Bundle</a><span>, in § 8.2.9</span>
   <li><a href="#quickjs">QuickJS</a><span>, in § 4.2.3.1</span>
   <li><a href="#frameworkrendering-reactlynx">ReactLynx</a><span>, in § 6.3.1</span>
   <li><a href="#frameworkrendering-rendering">Rendering</a><span>, in § 6.2.1</span>
   <li><a href="#frameworkrendering-re-rendering">Re-rendering</a><span>, in § 6.2.6</span>
   <li><a href="#enginepixeling-resolve">Resolve</a><span>, in § 7.2.1</span>
   <li><a href="#scripting-script">Script</a><span>, in § 4.1.1</span>
   <li><a href="#threading-scriptable-thread">Scriptable Thread</a><span>, in § 3.3.1</span>
   <li><a href="#scripting-scripting">Scripting</a><span>, in § 4</span>
   <li><a href="#commoninfrastructure-scripting-agent">Scripting Agent</a><span>, in § 2.2.3</span>
   <li><a href="#lynx-scripting-developer">Scripting Developer</a><span>, in § 1.2.1</span>
   <li><a href="#scripting-scripting-engine">Scripting Engine</a><span>, in § 4.2.1</span>
   <li><a href="#lynx-scripting-framework-developer">Scripting Framework Developer</a><span>, in § 1.2.2</span>
   <li><a href="#scripting-scripting-runtime-enviroment">Scripting Runtime Enviroment</a><span>, in § 4.4.1</span>
   <li><a href="#commoninfrastructure-sdk">SDK</a><span>, in § 2.1.3</span>
   <li><a href="#elementscomponents-selector">Selector</a><span>, in § 8.2.4.1</span>
   <li><a href="#elementscomponents-selector-query">Selector Query</a><span>, in § 8.2.5.2</span>
   <li><a href="#enginepixeling-serial-resolve">Serial Resolve</a><span>, in § 7.2.1.2</span>
   <li><a href="#commoninfrastructure-standalone">Standalone</a><span>, in § 2.3.1</span>
   <li><a href="#commoninfrastructure-structure">Structure</a><span>, in § 2.2</span>
   <li><a href="#styling-style-property">Style Property</a><span>, in § 9</span>
   <li><a href="#styling-style-rule">Style Rule</a><span>, in § 9</span>
   <li><a href="#styling-style-sheet">Style Sheet</a><span>, in § 9</span>
   <li><a href="#styling-styling">Styling</a><span>, in § 9</span>
   <li><a href="#scripting-sync-call">Sync Call</a><span>, in § 4.5.1</span>
   <li><a href="#elementscomponents-tag-selector">Tag Selector</a><span>, in § 8.2.4.3</span>
   <li><a href="#threading-task">Task</a><span>, in § 3.1.2</span>
   <li><a href="#threading-tasm-thread">Tasm Thread</a><span>, in § 3.2.3</span>
   <li><a href="#threading-threading">Threading</a><span>, in § 3</span>
   <li><a href="#threading-threading-model">Threading Model</a><span>, in § 3.1.4</span>
   <li><a href="#threading-threading-strategy">Threading Strategy</a><span>, in § 3.1.4</span>
   <li><a href="#elementscomponents-ui-layout-op">UI Layout OP</a><span>, in § 8.4.3.2</span>
   <li><a href="#elementscomponents-ui-op">UI OP</a><span>, in § 8.4.3</span>
   <li><a href="#elementscomponents-ui-paint-op">UI Paint OP</a><span>, in § 8.4.3.1</span>
   <li><a href="#threading-ui-thread">UI Thread</a><span>, in § 3.2.1</span>
   <li><a href="#userinteraction-user-interaction">User Interaction</a><span>, in § 10</span>
   <li><a href="#scripting-v8">V8</a><span>, in § 4.2.3.1</span>
   <li><a href="#scripting-virtual-machine">Virtual Machine</a><span>, in § 4.2.1</span>
   <li><a href="#threading-virtual-thread">Virtual Thread</a><span>, in § 3.1.3</span>
   <li><a href="#scripting-vm">VM</a><span>, in § 4.2.1</span>
   <li><a href="#scripting-worker">Worker</a><span>, in § 4.7</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[MINIAPP-MANIFEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3ff560d4">pages</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-miniapp-manifest">[MINIAPP-MANIFEST]
   <dd>Martin Alvarez-Espinar; Yongjing ZHANG. <a href="https://w3c.github.io/miniapp-manifest/"><cite>MiniApp Manifest</cite></a>. URL: <a href="https://w3c.github.io/miniapp-manifest/">https://w3c.github.io/miniapp-manifest/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
  </dl>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"3ff560d4": {"dfnID":"3ff560d4","dfnText":"pages","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-pages"}],"title":"2.1.1. APP"},{"refs":[{"id":"ref-for-dfn-pages\u2460"}],"title":"8.1.1. Element Tag"},{"refs":[{"id":"ref-for-dfn-pages\u2461"}],"title":"8.1.2. Element"}],"url":"https://w3c.github.io/miniapp-manifest/#dfn-pages"},
"commoninfrastructure-app": {"dfnID":"commoninfrastructure-app","dfnText":"APP","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-app"}],"title":"1.2.3. Lynx Developer"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2460"}],"title":"2.1.2. Container"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2461"}],"title":"2.1.3. SDK"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2462"}],"title":"2.1.5. Lynx Pipeline"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2463"}],"title":"2.2.1. Lynx Bundle (or Bundle)"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2464"}],"title":"2.2.5. Page"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2465"}],"title":"6.1.2. Framework"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2466"}],"title":"6.2.5. First-screen Rendering (or FSR)"},{"refs":[{"id":"ref-for-commoninfrastructure-app\u2467"}],"title":"7.1.1. Engine"}],"url":"#commoninfrastructure-app"},
"commoninfrastructure-bundle": {"dfnID":"commoninfrastructure-bundle","dfnText":"Bundle","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-bundle"}],"title":"2.1.1. APP"},{"refs":[{"id":"ref-for-commoninfrastructure-bundle\u2460"}],"title":"2.1.2. Container"},{"refs":[{"id":"ref-for-commoninfrastructure-bundle\u2461"}],"title":"2.2.2. Lazy Bundle"},{"refs":[{"id":"ref-for-commoninfrastructure-bundle\u2462"}],"title":"2.2.4. LynxView"},{"refs":[{"id":"ref-for-commoninfrastructure-bundle\u2463"},{"id":"ref-for-commoninfrastructure-bundle\u2464"}],"title":"4.4.2.3. Instances of main thread script"},{"refs":[{"id":"ref-for-commoninfrastructure-bundle\u2465"}],"title":"5.1.1. Load"},{"refs":[{"id":"ref-for-commoninfrastructure-bundle\u2466"}],"title":"5.1.2. Parse"}],"url":"#commoninfrastructure-bundle"},
"commoninfrastructure-common-infrastructure": {"dfnID":"commoninfrastructure-common-infrastructure","dfnText":"Common Infrastructure","external":false,"refSections":[],"url":"#commoninfrastructure-common-infrastructure"},
"commoninfrastructure-container": {"dfnID":"commoninfrastructure-container","dfnText":"Container","external":false,"refSections":[],"url":"#commoninfrastructure-container"},
"commoninfrastructure-embedded": {"dfnID":"commoninfrastructure-embedded","dfnText":"Embedded","external":false,"refSections":[],"url":"#commoninfrastructure-embedded"},
"commoninfrastructure-host-platform": {"dfnID":"commoninfrastructure-host-platform","dfnText":"Host Platform","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-host-platform"}],"title":"1.2.4. Native Developer"}],"url":"#commoninfrastructure-host-platform"},
"commoninfrastructure-lazy-bundle": {"dfnID":"commoninfrastructure-lazy-bundle","dfnText":"Lazy Bundle","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-lazy-bundle"}],"title":"2.1.1. APP"}],"url":"#commoninfrastructure-lazy-bundle"},
"commoninfrastructure-lynx-bundle": {"dfnID":"commoninfrastructure-lynx-bundle","dfnText":"Lynx Bundle","external":false,"refSections":[],"url":"#commoninfrastructure-lynx-bundle"},
"commoninfrastructure-lynx-group": {"dfnID":"commoninfrastructure-lynx-group","dfnText":"Lynx Group","external":false,"refSections":[],"url":"#commoninfrastructure-lynx-group"},
"commoninfrastructure-lynx-pipeline": {"dfnID":"commoninfrastructure-lynx-pipeline","dfnText":"Lynx Pipeline","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-lynx-pipeline"},{"id":"ref-for-commoninfrastructure-lynx-pipeline\u2460"}],"title":"2.1.5. Lynx Pipeline"},{"refs":[{"id":"ref-for-commoninfrastructure-lynx-pipeline\u2461"}],"title":"5.1. Introduction"},{"refs":[{"id":"ref-for-commoninfrastructure-lynx-pipeline\u2462"}],"title":"6.2.1. Rendering"}],"url":"#commoninfrastructure-lynx-pipeline"},
"commoninfrastructure-lynx-platform": {"dfnID":"commoninfrastructure-lynx-platform","dfnText":"Lynx Platform","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-lynx-platform"}],"title":"1.2.2. Scripting Framework Developer"},{"refs":[{"id":"ref-for-commoninfrastructure-lynx-platform\u2460"}],"title":"1.2.3. Lynx Developer"},{"refs":[{"id":"ref-for-commoninfrastructure-lynx-platform\u2461"}],"title":"2.1.1. APP"},{"refs":[{"id":"ref-for-commoninfrastructure-lynx-platform\u2462"}],"title":"6.1.2. Framework"},{"refs":[{"id":"ref-for-commoninfrastructure-lynx-platform\u2463"}],"title":"7.1.1. Engine"}],"url":"#commoninfrastructure-lynx-platform"},
"commoninfrastructure-lynxview": {"dfnID":"commoninfrastructure-lynxview","dfnText":"LynxView","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-lynxview"}],"title":"2.1.2. Container"},{"refs":[{"id":"ref-for-commoninfrastructure-lynxview\u2460"}],"title":"2.2.7. Lynx Group"}],"url":"#commoninfrastructure-lynxview"},
"commoninfrastructure-scripting-agent": {"dfnID":"commoninfrastructure-scripting-agent","dfnText":"Scripting Agent","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-scripting-agent"}],"title":"2.2.7. Lynx Group"}],"url":"#commoninfrastructure-scripting-agent"},
"commoninfrastructure-sdk": {"dfnID":"commoninfrastructure-sdk","dfnText":"SDK","external":false,"refSections":[],"url":"#commoninfrastructure-sdk"},
"commoninfrastructure-standalone": {"dfnID":"commoninfrastructure-standalone","dfnText":"Standalone","external":false,"refSections":[],"url":"#commoninfrastructure-standalone"},
"commoninfrastructure-structure": {"dfnID":"commoninfrastructure-structure","dfnText":"Structure","external":false,"refSections":[{"refs":[{"id":"ref-for-commoninfrastructure-structure"}],"title":"2.1.5. Lynx Pipeline"}],"url":"#commoninfrastructure-structure"},
"elementscomponents-attribute": {"dfnID":"elementscomponents-attribute","dfnText":"Attribute","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-attribute"}],"title":"7.2.1. Resolve"},{"refs":[{"id":"ref-for-elementscomponents-attribute\u2460"}],"title":"8.2.5.2. Selector Query"},{"refs":[{"id":"ref-for-elementscomponents-attribute\u2461"}],"title":"8.2.9. Prop Bundle"}],"url":"#elementscomponents-attribute"},
"elementscomponents-built-in-element": {"dfnID":"elementscomponents-built-in-element","dfnText":"Built-in Element","external":false,"refSections":[],"url":"#elementscomponents-built-in-element"},
"elementscomponents-class-selector": {"dfnID":"elementscomponents-class-selector","dfnText":"Class Selector","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-class-selector"}],"title":"8.2.4.1. Selector"}],"url":"#elementscomponents-class-selector"},
"elementscomponents-component": {"dfnID":"elementscomponents-component","dfnText":"Component","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-component"}],"title":"2.2.2. Lazy Bundle"},{"refs":[{"id":"ref-for-elementscomponents-component\u2460"}],"title":"6.1.1. DSL (Domain-specific Language)"},{"refs":[{"id":"ref-for-elementscomponents-component\u2461"}],"title":"6.2.2. Framework Rendering"},{"refs":[{"id":"ref-for-elementscomponents-component\u2462"},{"id":"ref-for-elementscomponents-component\u2463"},{"id":"ref-for-elementscomponents-component\u2464"}],"title":"6.3.1.1. Rendering Patterns"},{"refs":[{"id":"ref-for-elementscomponents-component\u2465"}],"title":"8.1.3. Component"}],"url":"#elementscomponents-component"},
"elementscomponents-computed-style": {"dfnID":"elementscomponents-computed-style","dfnText":"Computed Style","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-computed-style"}],"title":"7.2.1. Resolve"}],"url":"#elementscomponents-computed-style"},
"elementscomponents-custom-element": {"dfnID":"elementscomponents-custom-element","dfnText":"Custom Element","external":false,"refSections":[],"url":"#elementscomponents-custom-element"},
"elementscomponents-dataset": {"dfnID":"elementscomponents-dataset","dfnText":"Dataset","external":false,"refSections":[],"url":"#elementscomponents-dataset"},
"elementscomponents-element": {"dfnID":"elementscomponents-element","dfnText":"Element","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element"}],"title":"2.2.5. Page"},{"refs":[{"id":"ref-for-elementscomponents-element\u2460"}],"title":"7.2.1. Resolve"},{"refs":[{"id":"ref-for-elementscomponents-element\u2461"}],"title":"8.1.3. Component"},{"refs":[{"id":"ref-for-elementscomponents-element\u2462"}],"title":"8.2.1. Built-in Element"},{"refs":[{"id":"ref-for-elementscomponents-element\u2463"}],"title":"8.2.2. Custom Element"},{"refs":[{"id":"ref-for-elementscomponents-element\u2464"}],"title":"8.2.3. Element Tree"},{"refs":[{"id":"ref-for-elementscomponents-element\u2465"}],"title":"8.2.4. Element Attribute (or Attribute)"},{"refs":[{"id":"ref-for-elementscomponents-element\u2466"}],"title":"8.2.5.1. Element Tree Mutation"},{"refs":[{"id":"ref-for-elementscomponents-element\u2467"}],"title":"8.2.5.2. Selector Query"},{"refs":[{"id":"ref-for-elementscomponents-element\u2468"},{"id":"ref-for-elementscomponents-element\u2460\u24ea"}],"title":"8.2.6.1. Element Mutation"},{"refs":[{"id":"ref-for-elementscomponents-element\u2460\u2460"},{"id":"ref-for-elementscomponents-element\u2460\u2461"},{"id":"ref-for-elementscomponents-element\u2460\u2462"}],"title":"8.2.6.2. Element Method"},{"refs":[{"id":"ref-for-elementscomponents-element\u2460\u2463"}],"title":"8.2.9. Prop Bundle"},{"refs":[{"id":"ref-for-elementscomponents-element\u2460\u2464"}],"title":"10.2. Event Listening"},{"refs":[{"id":"ref-for-elementscomponents-element\u2460\u2465"}],"title":"10.2.1. Event Handler"},{"refs":[{"id":"ref-for-elementscomponents-element\u2460\u2466"},{"id":"ref-for-elementscomponents-element\u2460\u2467"},{"id":"ref-for-elementscomponents-element\u2460\u2468"},{"id":"ref-for-elementscomponents-element\u2461\u24ea"}],"title":"10.3.1. Event Respond Chain"},{"refs":[{"id":"ref-for-elementscomponents-element\u2461\u2460"},{"id":"ref-for-elementscomponents-element\u2461\u2461"}],"title":"10.3.2. Event Capture"},{"refs":[{"id":"ref-for-elementscomponents-element\u2461\u2462"},{"id":"ref-for-elementscomponents-element\u2461\u2463"}],"title":"10.3.3. Event Bubble"}],"url":"#elementscomponents-element"},
"elementscomponents-element-attribute": {"dfnID":"elementscomponents-element-attribute","dfnText":"Element Attribute","external":false,"refSections":[],"url":"#elementscomponents-element-attribute"},
"elementscomponents-element-inter-thread-call": {"dfnID":"elementscomponents-element-inter-thread-call","dfnText":"Element Inter Thread Call","external":false,"refSections":[],"url":"#elementscomponents-element-inter-thread-call"},
"elementscomponents-element-itc": {"dfnID":"elementscomponents-element-itc","dfnText":"Element ITC","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element-itc"}],"title":"8.2.7.4. Element Selector Query API"}],"url":"#elementscomponents-element-itc"},
"elementscomponents-element-layout-node-and-platform-ui": {"dfnID":"elementscomponents-element-layout-node-and-platform-ui","dfnText":"Element, Layout Node and Platform UI","external":false,"refSections":[],"url":"#elementscomponents-element-layout-node-and-platform-ui"},
"elementscomponents-element-method": {"dfnID":"elementscomponents-element-method","dfnText":"Element Method","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element-method"}],"title":"8.2.7.4. Element Selector Query API"}],"url":"#elementscomponents-element-method"},
"elementscomponents-element-mutation": {"dfnID":"elementscomponents-element-mutation","dfnText":"Element Mutation","external":false,"refSections":[],"url":"#elementscomponents-element-mutation"},
"elementscomponents-element-object-model": {"dfnID":"elementscomponents-element-object-model","dfnText":"Element Object Model","external":false,"refSections":[],"url":"#elementscomponents-element-object-model"},
"elementscomponents-element-operation": {"dfnID":"elementscomponents-element-operation","dfnText":"Element Operation","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element-operation"}],"title":"8.2.7.1. Element PAPI"},{"refs":[{"id":"ref-for-elementscomponents-element-operation\u2460"}],"title":"8.2.7.2. Element Object Model (or EOM)"},{"refs":[{"id":"ref-for-elementscomponents-element-operation\u2461"}],"title":"8.2.7.3. Element Inter Thread Call (or Element ITC)"}],"url":"#elementscomponents-element-operation"},
"elementscomponents-element-papi": {"dfnID":"elementscomponents-element-papi","dfnText":"Element PAPI","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element-papi"}],"title":"4.4.2.1. Main Thread Runtime"},{"refs":[{"id":"ref-for-elementscomponents-element-papi\u2460"}],"title":"8.2.4.5. Inline Style"},{"refs":[{"id":"ref-for-elementscomponents-element-papi\u2461"}],"title":"8.2.4.6. Dataset"},{"refs":[{"id":"ref-for-elementscomponents-element-papi\u2462"}],"title":"8.2.4.7. Event Listener"},{"refs":[{"id":"ref-for-elementscomponents-element-papi\u2463"}],"title":"8.2.7.2. Element Object Model (or EOM)"}],"url":"#elementscomponents-element-papi"},
"elementscomponents-element-related-api": {"dfnID":"elementscomponents-element-related-api","dfnText":"Element Related API","external":false,"refSections":[],"url":"#elementscomponents-element-related-api"},
"elementscomponents-element-selector-query-api": {"dfnID":"elementscomponents-element-selector-query-api","dfnText":"Element Selector Query API","external":false,"refSections":[],"url":"#elementscomponents-element-selector-query-api"},
"elementscomponents-element-tag": {"dfnID":"elementscomponents-element-tag","dfnText":"Element Tag","external":false,"refSections":[],"url":"#elementscomponents-element-tag"},
"elementscomponents-element-tree": {"dfnID":"elementscomponents-element-tree","dfnText":"Element Tree","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element-tree"}],"title":"2.2.1. Lynx Bundle (or Bundle)"},{"refs":[{"id":"ref-for-elementscomponents-element-tree\u2460"}],"title":"6.2.2. Framework Rendering"},{"refs":[{"id":"ref-for-elementscomponents-element-tree\u2461"}],"title":"7.1.3. Pixeling"},{"refs":[{"id":"ref-for-elementscomponents-element-tree\u2462"}],"title":"7.1.4. Pixel Pipeline"},{"refs":[{"id":"ref-for-elementscomponents-element-tree\u2463"}],"title":"8.2.5. Element Tree Operation"},{"refs":[{"id":"ref-for-elementscomponents-element-tree\u2464"}],"title":"8.2.5.1. Element Tree Mutation"}],"url":"#elementscomponents-element-tree"},
"elementscomponents-element-tree-mutation": {"dfnID":"elementscomponents-element-tree-mutation","dfnText":"Element Tree Mutation","external":false,"refSections":[],"url":"#elementscomponents-element-tree-mutation"},
"elementscomponents-element-tree-operation": {"dfnID":"elementscomponents-element-tree-operation","dfnText":"Element Tree Operation","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-element-tree-operation"}],"title":"8.2.5.1. Element Tree Mutation"},{"refs":[{"id":"ref-for-elementscomponents-element-tree-operation\u2460"}],"title":"8.2.5.2. Selector Query"},{"refs":[{"id":"ref-for-elementscomponents-element-tree-operation\u2461"}],"title":"8.2.6.1. Element Mutation"},{"refs":[{"id":"ref-for-elementscomponents-element-tree-operation\u2462"}],"title":"8.2.7.1. Element PAPI"},{"refs":[{"id":"ref-for-elementscomponents-element-tree-operation\u2463"}],"title":"8.2.7.2. Element Object Model (or EOM)"},{"refs":[{"id":"ref-for-elementscomponents-element-tree-operation\u2464"}],"title":"8.2.7.3. Element Inter Thread Call (or Element ITC)"}],"url":"#elementscomponents-element-tree-operation"},
"elementscomponents-eom": {"dfnID":"elementscomponents-eom","dfnText":"EOM","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-eom"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#elementscomponents-eom"},
"elementscomponents-event-listener": {"dfnID":"elementscomponents-event-listener","dfnText":"Event Listener","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-event-listener"}],"title":"10.2.1. Event Handler"}],"url":"#elementscomponents-event-listener"},
"elementscomponents-id-selector": {"dfnID":"elementscomponents-id-selector","dfnText":"ID Selector","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-id-selector"}],"title":"8.2.4.1. Selector"}],"url":"#elementscomponents-id-selector"},
"elementscomponents-inline-style": {"dfnID":"elementscomponents-inline-style","dfnText":"Inline Style","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-inline-style"}],"title":"8.2.8. Computed Style"}],"url":"#elementscomponents-inline-style"},
"elementscomponents-layout-node": {"dfnID":"elementscomponents-layout-node","dfnText":"Layout Node","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-layout-node"}],"title":"7.2.1. Resolve"},{"refs":[{"id":"ref-for-elementscomponents-layout-node\u2460"}],"title":"8.3.1. Layout Node Tree"},{"refs":[{"id":"ref-for-elementscomponents-layout-node\u2461"}],"title":"8.3.2. Platform Layout Node"}],"url":"#elementscomponents-layout-node"},
"elementscomponents-layout-node-tree": {"dfnID":"elementscomponents-layout-node-tree","dfnText":"Layout Node Tree","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-layout-node-tree"}],"title":"7.2.1. Resolve"},{"refs":[{"id":"ref-for-elementscomponents-layout-node-tree\u2460"}],"title":"7.2.2. Layout"}],"url":"#elementscomponents-layout-node-tree"},
"elementscomponents-layout-related-computed-style": {"dfnID":"elementscomponents-layout-related-computed-style","dfnText":"Layout Related Computed Style","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-layout-related-computed-style"}],"title":"8.1.4. Layout Node"}],"url":"#elementscomponents-layout-related-computed-style"},
"elementscomponents-paint-related-computed-style": {"dfnID":"elementscomponents-paint-related-computed-style","dfnText":"Paint Related Computed Style","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-paint-related-computed-style"}],"title":"8.2.9. Prop Bundle"}],"url":"#elementscomponents-paint-related-computed-style"},
"elementscomponents-platform-layout-node": {"dfnID":"elementscomponents-platform-layout-node","dfnText":"Platform Layout Node","external":false,"refSections":[],"url":"#elementscomponents-platform-layout-node"},
"elementscomponents-platform-ui": {"dfnID":"elementscomponents-platform-ui","dfnText":"Platform UI","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-platform-ui"}],"title":"7.2.4. Paint"},{"refs":[{"id":"ref-for-elementscomponents-platform-ui\u2460"}],"title":"8.4.2. Platform UI Tree"},{"refs":[{"id":"ref-for-elementscomponents-platform-ui\u2461"}],"title":"8.4.3. Platform UI Operations (or UI OP)"},{"refs":[{"id":"ref-for-elementscomponents-platform-ui\u2462"}],"title":"8.4.3.1. Platform UI Paint Operations (or UI Paint OP)"},{"refs":[{"id":"ref-for-elementscomponents-platform-ui\u2463"}],"title":"8.4.3.2. Platform UI Layout Operations (or UI Layout OP)"}],"url":"#elementscomponents-platform-ui"},
"elementscomponents-platform-ui-layout-operations": {"dfnID":"elementscomponents-platform-ui-layout-operations","dfnText":"Platform UI Layout Operations","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-platform-ui-layout-operations"}],"title":"8.4.3. Platform UI Operations (or UI OP)"}],"url":"#elementscomponents-platform-ui-layout-operations"},
"elementscomponents-platform-ui-operations": {"dfnID":"elementscomponents-platform-ui-operations","dfnText":"Platform UI Operations","external":false,"refSections":[],"url":"#elementscomponents-platform-ui-operations"},
"elementscomponents-platform-ui-paint-operations": {"dfnID":"elementscomponents-platform-ui-paint-operations","dfnText":"Platform UI Paint Operations","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-platform-ui-paint-operations"}],"title":"8.4.3. Platform UI Operations (or UI OP)"}],"url":"#elementscomponents-platform-ui-paint-operations"},
"elementscomponents-platform-ui-primitives": {"dfnID":"elementscomponents-platform-ui-primitives","dfnText":"Platform UI Primitives","external":false,"refSections":[],"url":"#elementscomponents-platform-ui-primitives"},
"elementscomponents-platform-ui-tree": {"dfnID":"elementscomponents-platform-ui-tree","dfnText":"Platform UI Tree","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-platform-ui-tree"}],"title":"7.2.4. Paint"},{"refs":[{"id":"ref-for-elementscomponents-platform-ui-tree\u2460"}],"title":"8.4.3. Platform UI Operations (or UI OP)"},{"refs":[{"id":"ref-for-elementscomponents-platform-ui-tree\u2461"}],"title":"8.4.3.1. Platform UI Paint Operations (or UI Paint OP)"}],"url":"#elementscomponents-platform-ui-tree"},
"elementscomponents-prop-bundle": {"dfnID":"elementscomponents-prop-bundle","dfnText":"Prop Bundle","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-prop-bundle"}],"title":"7.2.1. Resolve"}],"url":"#elementscomponents-prop-bundle"},
"elementscomponents-selector": {"dfnID":"elementscomponents-selector","dfnText":"Selector","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-selector"}],"title":"8.2.5.2. Selector Query"},{"refs":[{"id":"ref-for-elementscomponents-selector\u2460"}],"title":"8.2.8. Computed Style"}],"url":"#elementscomponents-selector"},
"elementscomponents-selector-query": {"dfnID":"elementscomponents-selector-query","dfnText":"Selector Query","external":false,"refSections":[],"url":"#elementscomponents-selector-query"},
"elementscomponents-tag-selector": {"dfnID":"elementscomponents-tag-selector","dfnText":"Tag Selector","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-tag-selector"}],"title":"8.2.4.1. Selector"}],"url":"#elementscomponents-tag-selector"},
"elementscomponents-ui-layout-op": {"dfnID":"elementscomponents-ui-layout-op","dfnText":"UI Layout OP","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-ui-layout-op"}],"title":"7.2.2. Layout"},{"refs":[{"id":"ref-for-elementscomponents-ui-layout-op\u2460"}],"title":"7.2.3.2. Execute UI Layout OP"}],"url":"#elementscomponents-ui-layout-op"},
"elementscomponents-ui-op": {"dfnID":"elementscomponents-ui-op","dfnText":"UI OP","external":false,"refSections":[],"url":"#elementscomponents-ui-op"},
"elementscomponents-ui-paint-op": {"dfnID":"elementscomponents-ui-paint-op","dfnText":"UI Paint OP","external":false,"refSections":[{"refs":[{"id":"ref-for-elementscomponents-ui-paint-op"}],"title":"7.2.1. Resolve"},{"refs":[{"id":"ref-for-elementscomponents-ui-paint-op\u2460"}],"title":"7.2.3.1. Execute UI Paint OP"}],"url":"#elementscomponents-ui-paint-op"},
"enginepixeling-engine": {"dfnID":"enginepixeling-engine","dfnText":"Engine","external":false,"refSections":[{"refs":[{"id":"ref-for-enginepixeling-engine"}],"title":"1.2.5. Engine Developer"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2460"}],"title":"2.1. High-level Concept"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2461"}],"title":"2.1.3. SDK"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2462"}],"title":"2.1.4. Lynx Platform"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2463"}],"title":"6.2.2. Framework Rendering"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2464"}],"title":"7.1.2. Engine FFI"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2465"}],"title":"7.1.4. Pixel Pipeline"},{"refs":[{"id":"ref-for-enginepixeling-engine\u2466"}],"title":"10.1.3. Background Thread Event Object"}],"url":"#enginepixeling-engine"},
"enginepixeling-engine-and-pixeling": {"dfnID":"enginepixeling-engine-and-pixeling","dfnText":"Engine and Pixeling","external":false,"refSections":[],"url":"#enginepixeling-engine-and-pixeling"},
"enginepixeling-engine-ffi": {"dfnID":"enginepixeling-engine-ffi","dfnText":"Engine FFI","external":false,"refSections":[],"url":"#enginepixeling-engine-ffi"},
"enginepixeling-execute-ui-layout-op": {"dfnID":"enginepixeling-execute-ui-layout-op","dfnText":"Execute UI Layout OP","external":false,"refSections":[],"url":"#enginepixeling-execute-ui-layout-op"},
"enginepixeling-execute-ui-op": {"dfnID":"enginepixeling-execute-ui-op","dfnText":"Execute UI OP","external":false,"refSections":[],"url":"#enginepixeling-execute-ui-op"},
"enginepixeling-execute-ui-paint-op": {"dfnID":"enginepixeling-execute-ui-paint-op","dfnText":"Execute UI Paint OP","external":false,"refSections":[],"url":"#enginepixeling-execute-ui-paint-op"},
"enginepixeling-layout": {"dfnID":"enginepixeling-layout","dfnText":"Layout","external":false,"refSections":[{"refs":[{"id":"ref-for-enginepixeling-layout"}],"title":"3.2.4. Layout Thread"}],"url":"#enginepixeling-layout"},
"enginepixeling-paint": {"dfnID":"enginepixeling-paint","dfnText":"Paint","external":false,"refSections":[],"url":"#enginepixeling-paint"},
"enginepixeling-parallel-resolve": {"dfnID":"enginepixeling-parallel-resolve","dfnText":"Parallel Resolve","external":false,"refSections":[],"url":"#enginepixeling-parallel-resolve"},
"enginepixeling-pixel-pipeline": {"dfnID":"enginepixeling-pixel-pipeline","dfnText":"Pixel Pipeline","external":false,"refSections":[{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline"}],"title":"3.2.3. Engine Thread (historically known as \"Tasm Thread\")"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2460"}],"title":"3.2.4. Layout Thread"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2461"},{"id":"ref-for-enginepixeling-pixel-pipeline\u2462"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2463"}],"title":"3.3.3. Background Thread (a.k.a. Off-Main-Thread)"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2464"}],"title":"4.4.2.1. Main Thread Runtime"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2465"},{"id":"ref-for-enginepixeling-pixel-pipeline\u2466"}],"title":"5.1. Introduction"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2467"}],"title":"5.1.4. Pixel Pipeline"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2468"}],"title":"6.1.1. DSL (Domain-specific Language)"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2460\u24ea"}],"title":"7.2. Pixel Pipeline"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2460\u2460"}],"title":"8.2.8. Computed Style"},{"refs":[{"id":"ref-for-enginepixeling-pixel-pipeline\u2460\u2461"}],"title":"8.4.3. Platform UI Operations (or UI OP)"}],"url":"#enginepixeling-pixel-pipeline"},
"enginepixeling-pixeling": {"dfnID":"enginepixeling-pixeling","dfnText":"Pixeling","external":false,"refSections":[{"refs":[{"id":"ref-for-enginepixeling-pixeling"}],"title":"2.1.5. Lynx Pipeline"},{"refs":[{"id":"ref-for-enginepixeling-pixeling\u2460"}],"title":"4.4.2.2. Main Thread Script (or MTS)"},{"refs":[{"id":"ref-for-enginepixeling-pixeling\u2461"}],"title":"6.2.3. Main Thread Rendering"},{"refs":[{"id":"ref-for-enginepixeling-pixeling\u2462"}],"title":"6.2.4. Background-driven Rendering"},{"refs":[{"id":"ref-for-enginepixeling-pixeling\u2463"}],"title":"7.1.1. Engine"}],"url":"#enginepixeling-pixeling"},
"enginepixeling-resolve": {"dfnID":"enginepixeling-resolve","dfnText":"Resolve","external":false,"refSections":[{"refs":[{"id":"ref-for-enginepixeling-resolve"}],"title":"7.2.1.1. Parallel Resolve"},{"refs":[{"id":"ref-for-enginepixeling-resolve\u2460"}],"title":"7.2.1.2. Serial Resolve"}],"url":"#enginepixeling-resolve"},
"enginepixeling-serial-resolve": {"dfnID":"enginepixeling-serial-resolve","dfnText":"Serial Resolve","external":false,"refSections":[],"url":"#enginepixeling-serial-resolve"},
"frameworkrendering-background-driven-rendering": {"dfnID":"frameworkrendering-background-driven-rendering","dfnText":"Background-driven Rendering","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-background-driven-rendering"}],"title":"6.2.6. Re-rendering"},{"refs":[{"id":"ref-for-frameworkrendering-background-driven-rendering\u2460"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#frameworkrendering-background-driven-rendering"},
"frameworkrendering-domain-specific-language": {"dfnID":"frameworkrendering-domain-specific-language","dfnText":"Domain-specific Language","external":false,"refSections":[],"url":"#frameworkrendering-domain-specific-language"},
"frameworkrendering-dsl": {"dfnID":"frameworkrendering-dsl","dfnText":"DSL","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-dsl"},{"id":"ref-for-frameworkrendering-dsl\u2460"}],"title":"6.1.1. DSL (Domain-specific Language)"},{"refs":[{"id":"ref-for-frameworkrendering-dsl\u2461"},{"id":"ref-for-frameworkrendering-dsl\u2462"}],"title":"6.1.2. Framework"},{"refs":[{"id":"ref-for-frameworkrendering-dsl\u2463"}],"title":"6.3.1. ReactLynx"},{"refs":[{"id":"ref-for-frameworkrendering-dsl\u2464"}],"title":"8.1.1. Element Tag"},{"refs":[{"id":"ref-for-frameworkrendering-dsl\u2465"}],"title":"8.1.3. Component"}],"url":"#frameworkrendering-dsl"},
"frameworkrendering-first-screen-rendering": {"dfnID":"frameworkrendering-first-screen-rendering","dfnText":"First-screen Rendering","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-first-screen-rendering"}],"title":"5.1. Introduction"},{"refs":[{"id":"ref-for-frameworkrendering-first-screen-rendering\u2460"}],"title":"5.1.1. Load"},{"refs":[{"id":"ref-for-frameworkrendering-first-screen-rendering\u2461"}],"title":"6.2.6. Re-rendering"},{"refs":[{"id":"ref-for-frameworkrendering-first-screen-rendering\u2462"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#frameworkrendering-first-screen-rendering"},
"frameworkrendering-framework": {"dfnID":"frameworkrendering-framework","dfnText":"Framework","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-framework"}],"title":"1.2.2. Scripting Framework Developer"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2460"}],"title":"2.1. High-level Concept"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2461"}],"title":"2.1.1. APP"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2462"}],"title":"2.1.3. SDK"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2463"}],"title":"3.3.4. Dual-threaded Model"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2464"},{"id":"ref-for-frameworkrendering-framework\u2465"}],"title":"4.4.2.3. Instances of main thread script"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2466"},{"id":"ref-for-frameworkrendering-framework\u2467"}],"title":"6.1.2. Framework"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2468"}],"title":"6.2.2. Framework Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-framework\u2460\u24ea"}],"title":"6.3.1. ReactLynx"}],"url":"#frameworkrendering-framework"},
"frameworkrendering-framework-and-rendering": {"dfnID":"frameworkrendering-framework-and-rendering","dfnText":"Framework and Rendering","external":false,"refSections":[],"url":"#frameworkrendering-framework-and-rendering"},
"frameworkrendering-framework-rendering": {"dfnID":"frameworkrendering-framework-rendering","dfnText":"Framework Rendering","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering"}],"title":"2.1.5. Lynx Pipeline"},{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering\u2460"},{"id":"ref-for-frameworkrendering-framework-rendering\u2461"}],"title":"5.1. Introduction"},{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering\u2462"}],"title":"5.1.3. Framework Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering\u2463"}],"title":"6.2.1. Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering\u2464"}],"title":"6.2.3. Main Thread Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering\u2465"},{"id":"ref-for-frameworkrendering-framework-rendering\u2466"}],"title":"6.2.4. Background-driven Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-framework-rendering\u2467"}],"title":"8.1.2. Element"}],"url":"#frameworkrendering-framework-rendering"},
"frameworkrendering-fsr": {"dfnID":"frameworkrendering-fsr","dfnText":"FSR","external":false,"refSections":[],"url":"#frameworkrendering-fsr"},
"frameworkrendering-main-thread-rendering": {"dfnID":"frameworkrendering-main-thread-rendering","dfnText":"Main Thread Rendering","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-main-thread-rendering"}],"title":"6.2.5. First-screen Rendering (or FSR)"},{"refs":[{"id":"ref-for-frameworkrendering-main-thread-rendering\u2460"}],"title":"6.2.6. Re-rendering"},{"refs":[{"id":"ref-for-frameworkrendering-main-thread-rendering\u2461"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#frameworkrendering-main-thread-rendering"},
"frameworkrendering-re-rendering": {"dfnID":"frameworkrendering-re-rendering","dfnText":"Re-rendering","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-re-rendering"}],"title":"5.1. Introduction"},{"refs":[{"id":"ref-for-frameworkrendering-re-rendering\u2460"},{"id":"ref-for-frameworkrendering-re-rendering\u2461"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#frameworkrendering-re-rendering"},
"frameworkrendering-reactlynx": {"dfnID":"frameworkrendering-reactlynx","dfnText":"ReactLynx","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-reactlynx"}],"title":"6.1.1. DSL (Domain-specific Language)"}],"url":"#frameworkrendering-reactlynx"},
"frameworkrendering-rendering": {"dfnID":"frameworkrendering-rendering","dfnText":"Rendering","external":false,"refSections":[{"refs":[{"id":"ref-for-frameworkrendering-rendering"}],"title":"6.2.3. Main Thread Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-rendering\u2460"}],"title":"6.2.4. Background-driven Rendering"},{"refs":[{"id":"ref-for-frameworkrendering-rendering\u2461"}],"title":"6.2.6. Re-rendering"}],"url":"#frameworkrendering-rendering"},
"lynx-engine-developer": {"dfnID":"lynx-engine-developer","dfnText":"Engine Developer","external":false,"refSections":[{"refs":[{"id":"ref-for-lynx-engine-developer"}],"title":"1.2.6. Lynx Contributor"}],"url":"#lynx-engine-developer"},
"lynx-lynx-contributor": {"dfnID":"lynx-lynx-contributor","dfnText":"Lynx Contributor","external":false,"refSections":[{"refs":[{"id":"ref-for-lynx-lynx-contributor"}],"title":"2.1.3. SDK"}],"url":"#lynx-lynx-contributor"},
"lynx-lynx-developer": {"dfnID":"lynx-lynx-developer","dfnText":"Lynx Developer","external":false,"refSections":[{"refs":[{"id":"ref-for-lynx-lynx-developer"}],"title":"2.1.1. APP"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2460"}],"title":"2.1.3. SDK"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2461"}],"title":"2.1.4. Lynx Platform"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2462"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2463"}],"title":"6.1.1. DSL (Domain-specific Language)"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2464"}],"title":"6.2.3. Main Thread Rendering"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2465"}],"title":"6.2.4. Background-driven Rendering"},{"refs":[{"id":"ref-for-lynx-lynx-developer\u2466"}],"title":"8.3.2. Platform Layout Node"}],"url":"#lynx-lynx-developer"},
"lynx-native-developer": {"dfnID":"lynx-native-developer","dfnText":"Native Developer","external":false,"refSections":[{"refs":[{"id":"ref-for-lynx-native-developer"}],"title":"1.2.5. Engine Developer"},{"refs":[{"id":"ref-for-lynx-native-developer\u2460"}],"title":"7.1.1. Engine"},{"refs":[{"id":"ref-for-lynx-native-developer\u2461"}],"title":"10.1. Event"}],"url":"#lynx-native-developer"},
"lynx-scripting-developer": {"dfnID":"lynx-scripting-developer","dfnText":"Scripting Developer","external":false,"refSections":[{"refs":[{"id":"ref-for-lynx-scripting-developer"}],"title":"1.2.2. Scripting Framework Developer"},{"refs":[{"id":"ref-for-lynx-scripting-developer\u2460"}],"title":"1.2.3. Lynx Developer"},{"refs":[{"id":"ref-for-lynx-scripting-developer\u2461"}],"title":"3.3.1. Scriptable Thread"},{"refs":[{"id":"ref-for-lynx-scripting-developer\u2462"},{"id":"ref-for-lynx-scripting-developer\u2463"}],"title":"3.3.4. Dual-threaded Model"},{"refs":[{"id":"ref-for-lynx-scripting-developer\u2464"}],"title":"8.2.1. Built-in Element"},{"refs":[{"id":"ref-for-lynx-scripting-developer\u2465"}],"title":"8.2.2. Custom Element"},{"refs":[{"id":"ref-for-lynx-scripting-developer\u2466"}],"title":"10.1. Event"}],"url":"#lynx-scripting-developer"},
"lynx-scripting-framework-developer": {"dfnID":"lynx-scripting-framework-developer","dfnText":"Scripting Framework Developer","external":false,"refSections":[{"refs":[{"id":"ref-for-lynx-scripting-framework-developer"}],"title":"1.2.6. Lynx Contributor"}],"url":"#lynx-scripting-framework-developer"},
"pipeline-load": {"dfnID":"pipeline-load","dfnText":"Load","external":false,"refSections":[],"url":"#pipeline-load"},
"pipeline-parse": {"dfnID":"pipeline-parse","dfnText":"Parse","external":false,"refSections":[],"url":"#pipeline-parse"},
"quickjs": {"dfnID":"quickjs","dfnText":"QuickJS","external":false,"refSections":[],"url":"#quickjs"},
"scripting-background-thread-runtime": {"dfnID":"scripting-background-thread-runtime","dfnText":"Background Thread Runtime","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-background-thread-runtime"}],"title":"2.2.6. The Lynx Object"},{"refs":[{"id":"ref-for-scripting-background-thread-runtime\u2460"}],"title":"4.4.3.2. Background Thread Script (or BTS)"},{"refs":[{"id":"ref-for-scripting-background-thread-runtime\u2461"}],"title":"10.1.3. Background Thread Event Object"}],"url":"#scripting-background-thread-runtime"},
"scripting-background-thread-script": {"dfnID":"scripting-background-thread-script","dfnText":"Background Thread Script","external":false,"refSections":[],"url":"#scripting-background-thread-script"},
"scripting-bts": {"dfnID":"scripting-bts","dfnText":"BTS","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-bts"}],"title":"8.2.7.3. Element Inter Thread Call (or Element ITC)"},{"refs":[{"id":"ref-for-scripting-bts\u2460"}],"title":"10.2.1. Event Handler"},{"refs":[{"id":"ref-for-scripting-bts\u2461"}],"title":"10.2.1.2. Background Thread Event Handler"},{"refs":[{"id":"ref-for-scripting-bts\u2462"}],"title":"10.2.2. Event Handler Function"},{"refs":[{"id":"ref-for-scripting-bts\u2463"}],"title":"10.2.2.2. Background Thread Event Handler Function"}],"url":"#scripting-bts"},
"scripting-call": {"dfnID":"scripting-call","dfnText":"Call","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-call"}],"title":"4.5.1. Sync Call"},{"refs":[{"id":"ref-for-scripting-call\u2460"}],"title":"4.5.2. Inter Thread Call (or ITC)"},{"refs":[{"id":"ref-for-scripting-call\u2461"}],"title":"4.6. Native Module"}],"url":"#scripting-call"},
"scripting-hermes": {"dfnID":"scripting-hermes","dfnText":"Hermes","external":false,"refSections":[],"url":"#scripting-hermes"},
"scripting-inter-thread-call": {"dfnID":"scripting-inter-thread-call","dfnText":"Inter Thread Call","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-inter-thread-call"}],"title":"8.2.7.3. Element Inter Thread Call (or Element ITC)"},{"refs":[{"id":"ref-for-scripting-inter-thread-call\u2460"}],"title":"8.2.7.4. Element Selector Query API"},{"refs":[{"id":"ref-for-scripting-inter-thread-call\u2461"}],"title":"10.1.3. Background Thread Event Object"}],"url":"#scripting-inter-thread-call"},
"scripting-itc": {"dfnID":"scripting-itc","dfnText":"ITC","external":false,"refSections":[],"url":"#scripting-itc"},
"scripting-javascript-core": {"dfnID":"scripting-javascript-core","dfnText":"JavaScript Core","external":false,"refSections":[],"url":"#scripting-javascript-core"},
"scripting-javascript-engine": {"dfnID":"scripting-javascript-engine","dfnText":"JavaScript Engine","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-javascript-engine"}],"title":"4.2.3.1. V8, JavaScript Core, QuickJS, Hermes, etc."},{"refs":[{"id":"ref-for-scripting-javascript-engine\u2460"}],"title":"4.4.3.1. Background Thread Runtime"}],"url":"#scripting-javascript-engine"},
"scripting-javascript-ffi": {"dfnID":"scripting-javascript-ffi","dfnText":"JavaScript FFI","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-javascript-ffi"}],"title":"7.1.2. Engine FFI"}],"url":"#scripting-javascript-ffi"},
"scripting-javascript-interface": {"dfnID":"scripting-javascript-interface","dfnText":"JavaScript Interface","external":false,"refSections":[],"url":"#scripting-javascript-interface"},
"scripting-javascript-script": {"dfnID":"scripting-javascript-script","dfnText":"JavaScript Script","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-javascript-script"}],"title":"4.2.2. JavaScript Engine"}],"url":"#scripting-javascript-script"},
"scripting-jsi": {"dfnID":"scripting-jsi","dfnText":"JSI","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-jsi"}],"title":"4.6. Native Module"},{"refs":[{"id":"ref-for-scripting-jsi\u2460"}],"title":"7.1.2. Engine FFI"}],"url":"#scripting-jsi"},
"scripting-main-thread-runtime": {"dfnID":"scripting-main-thread-runtime","dfnText":"Main Thread Runtime","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-main-thread-runtime"}],"title":"2.2.6. The Lynx Object"},{"refs":[{"id":"ref-for-scripting-main-thread-runtime\u2460"}],"title":"4.4.2.2. Main Thread Script (or MTS)"},{"refs":[{"id":"ref-for-scripting-main-thread-runtime\u2461"},{"id":"ref-for-scripting-main-thread-runtime\u2462"}],"title":"4.4.2.3. Instances of main thread script"},{"refs":[{"id":"ref-for-scripting-main-thread-runtime\u2463"}],"title":"6.3.1.1. Rendering Patterns"},{"refs":[{"id":"ref-for-scripting-main-thread-runtime\u2464"}],"title":"10.1.2. Main Thread Event Object"}],"url":"#scripting-main-thread-runtime"},
"scripting-main-thread-script": {"dfnID":"scripting-main-thread-script","dfnText":"Main Thread Script","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-main-thread-script"},{"id":"ref-for-scripting-main-thread-script\u2460"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-scripting-main-thread-script\u2461"}],"title":"4.4.2.3. Instances of main thread script"},{"refs":[{"id":"ref-for-scripting-main-thread-script\u2462"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#scripting-main-thread-script"},
"scripting-mts": {"dfnID":"scripting-mts","dfnText":"MTS","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-mts"}],"title":"8.2.7.1. Element PAPI"},{"refs":[{"id":"ref-for-scripting-mts\u2460"}],"title":"8.2.7.2. Element Object Model (or EOM)"},{"refs":[{"id":"ref-for-scripting-mts\u2461"}],"title":"10.2.1. Event Handler"},{"refs":[{"id":"ref-for-scripting-mts\u2462"}],"title":"10.2.1.1. Main Thread Event Handler"},{"refs":[{"id":"ref-for-scripting-mts\u2463"}],"title":"10.2.2. Event Handler Function"},{"refs":[{"id":"ref-for-scripting-mts\u2464"}],"title":"10.2.2.1. Main Thread Event Handler Function"}],"url":"#scripting-mts"},
"scripting-n-api": {"dfnID":"scripting-n-api","dfnText":"N-API","external":false,"refSections":[],"url":"#scripting-n-api"},
"scripting-native-module": {"dfnID":"scripting-native-module","dfnText":"Native Module","external":false,"refSections":[],"url":"#scripting-native-module"},
"scripting-node-api": {"dfnID":"scripting-node-api","dfnText":"Node-API","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-node-api"}],"title":"4.6. Native Module"},{"refs":[{"id":"ref-for-scripting-node-api\u2460"}],"title":"7.1.2. Engine FFI"}],"url":"#scripting-node-api"},
"scripting-papi": {"dfnID":"scripting-papi","dfnText":"PAPI","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-papi"}],"title":"7.1.2. Engine FFI"},{"refs":[{"id":"ref-for-scripting-papi\u2460"}],"title":"8.2.7.1. Element PAPI"}],"url":"#scripting-papi"},
"scripting-primjs-api": {"dfnID":"scripting-primjs-api","dfnText":"PrimJS API","external":false,"refSections":[],"url":"#scripting-primjs-api"},
"scripting-primjs-vm": {"dfnID":"scripting-primjs-vm","dfnText":"PrimJS VM","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-primjs-vm"}],"title":"4.4.2.1. Main Thread Runtime"}],"url":"#scripting-primjs-vm"},
"scripting-procedure-call": {"dfnID":"scripting-procedure-call","dfnText":"Procedure Call","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-procedure-call"}],"title":"10.2.1. Event Handler"}],"url":"#scripting-procedure-call"},
"scripting-script": {"dfnID":"scripting-script","dfnText":"Script","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-script"}],"title":"1.2.1. Scripting Developer"},{"refs":[{"id":"ref-for-scripting-script\u2460"}],"title":"2.2.1. Lynx Bundle (or Bundle)"},{"refs":[{"id":"ref-for-scripting-script\u2461"}],"title":"3.2.2. Background Scripting Thread (historically known as \"JS Thread\")"},{"refs":[{"id":"ref-for-scripting-script\u2462"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-scripting-script\u2463"}],"title":"3.3.4. Dual-threaded Model"},{"refs":[{"id":"ref-for-scripting-script\u2464"}],"title":"4.1.2. JavaScript Script"},{"refs":[{"id":"ref-for-scripting-script\u2465"}],"title":"4.2.1. Scripting Engine (a.k.a VM, or Virtual Machine)"},{"refs":[{"id":"ref-for-scripting-script\u2466"},{"id":"ref-for-scripting-script\u2467"}],"title":"4.4.1. Scripting Runtime Enviroment"},{"refs":[{"id":"ref-for-scripting-script\u2468"}],"title":"4.4.2.2. Main Thread Script (or MTS)"},{"refs":[{"id":"ref-for-scripting-script\u2460\u24ea"},{"id":"ref-for-scripting-script\u2460\u2460"}],"title":"4.4.2.3. Instances of main thread script"},{"refs":[{"id":"ref-for-scripting-script\u2460\u2461"}],"title":"4.4.3.2. Background Thread Script (or BTS)"},{"refs":[{"id":"ref-for-scripting-script\u2460\u2462"},{"id":"ref-for-scripting-script\u2460\u2463"},{"id":"ref-for-scripting-script\u2460\u2464"}],"title":"7.1.1. Engine"}],"url":"#scripting-script"},
"scripting-scripting": {"dfnID":"scripting-scripting","dfnText":"Scripting","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-scripting"}],"title":"3.3.1. Scriptable Thread"},{"refs":[{"id":"ref-for-scripting-scripting\u2460"}],"title":"6.1.1. DSL (Domain-specific Language)"},{"refs":[{"id":"ref-for-scripting-scripting\u2461"}],"title":"6.2.2. Framework Rendering"},{"refs":[{"id":"ref-for-scripting-scripting\u2462"}],"title":"6.2.3. Main Thread Rendering"},{"refs":[{"id":"ref-for-scripting-scripting\u2463"}],"title":"8.1.3. Component"}],"url":"#scripting-scripting"},
"scripting-scripting-engine": {"dfnID":"scripting-scripting-engine","dfnText":"Scripting Engine","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-scripting-engine"}],"title":"4.2.2. JavaScript Engine"},{"refs":[{"id":"ref-for-scripting-scripting-engine\u2460"}],"title":"4.2.3.2. PrimJS VM"},{"refs":[{"id":"ref-for-scripting-scripting-engine\u2461"}],"title":"4.4.1. Scripting Runtime Enviroment"}],"url":"#scripting-scripting-engine"},
"scripting-scripting-runtime-enviroment": {"dfnID":"scripting-scripting-runtime-enviroment","dfnText":"Scripting Runtime Enviroment","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-scripting-runtime-enviroment"}],"title":"1.2.1. Scripting Developer"},{"refs":[{"id":"ref-for-scripting-scripting-runtime-enviroment\u2460"}],"title":"4.4.2.1. Main Thread Runtime"},{"refs":[{"id":"ref-for-scripting-scripting-runtime-enviroment\u2461"}],"title":"4.4.3.1. Background Thread Runtime"},{"refs":[{"id":"ref-for-scripting-scripting-runtime-enviroment\u2462"}],"title":"4.5. Procedure Call (or Call)"}],"url":"#scripting-scripting-runtime-enviroment"},
"scripting-sync-call": {"dfnID":"scripting-sync-call","dfnText":"Sync Call","external":false,"refSections":[],"url":"#scripting-sync-call"},
"scripting-v8": {"dfnID":"scripting-v8","dfnText":"V8","external":false,"refSections":[],"url":"#scripting-v8"},
"scripting-virtual-machine": {"dfnID":"scripting-virtual-machine","dfnText":"Virtual Machine","external":false,"refSections":[],"url":"#scripting-virtual-machine"},
"scripting-vm": {"dfnID":"scripting-vm","dfnText":"VM","external":false,"refSections":[],"url":"#scripting-vm"},
"scripting-worker": {"dfnID":"scripting-worker","dfnText":"Worker","external":false,"refSections":[{"refs":[{"id":"ref-for-scripting-worker"}],"title":"3.3.3. Background Thread (a.k.a. Off-Main-Thread)"}],"url":"#scripting-worker"},
"styling-css-style-rule": {"dfnID":"styling-css-style-rule","dfnText":"CSS Style Rule","external":false,"refSections":[],"url":"#styling-css-style-rule"},
"styling-style-property": {"dfnID":"styling-style-property","dfnText":"Style Property","external":false,"refSections":[],"url":"#styling-style-property"},
"styling-style-rule": {"dfnID":"styling-style-rule","dfnText":"Style Rule","external":false,"refSections":[],"url":"#styling-style-rule"},
"styling-style-sheet": {"dfnID":"styling-style-sheet","dfnText":"Style Sheet","external":false,"refSections":[{"refs":[{"id":"ref-for-styling-style-sheet"}],"title":"2.2.1. Lynx Bundle (or Bundle)"},{"refs":[{"id":"ref-for-styling-style-sheet\u2460"}],"title":"8.2.8. Computed Style"}],"url":"#styling-style-sheet"},
"styling-styling": {"dfnID":"styling-styling","dfnText":"Styling","external":false,"refSections":[],"url":"#styling-styling"},
"threading-background-scripting-thread": {"dfnID":"threading-background-scripting-thread","dfnText":"Background Scripting Thread","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-background-scripting-thread"}],"title":"3.3.3. Background Thread (a.k.a. Off-Main-Thread)"}],"url":"#threading-background-scripting-thread"},
"threading-background-thread": {"dfnID":"threading-background-thread","dfnText":"Background Thread","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-background-thread"}],"title":"3.3.4. Dual-threaded Model"},{"refs":[{"id":"ref-for-threading-background-thread\u2460"},{"id":"ref-for-threading-background-thread\u2461"}],"title":"6.2.4. Background-driven Rendering"}],"url":"#threading-background-thread"},
"threading-dual-threaded-model": {"dfnID":"threading-dual-threaded-model","dfnText":"Dual-threaded Model","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-dual-threaded-model"}],"title":"6.3.1. ReactLynx"}],"url":"#threading-dual-threaded-model"},
"threading-engine-thread": {"dfnID":"threading-engine-thread","dfnText":"Engine Thread","external":false,"refSections":[],"url":"#threading-engine-thread"},
"threading-js-thread": {"dfnID":"threading-js-thread","dfnText":"JS Thread","external":false,"refSections":[],"url":"#threading-js-thread"},
"threading-layout-thread": {"dfnID":"threading-layout-thread","dfnText":"Layout Thread","external":false,"refSections":[],"url":"#threading-layout-thread"},
"threading-lynx-main-thread": {"dfnID":"threading-lynx-main-thread","dfnText":"Lynx Main Thread","external":false,"refSections":[],"url":"#threading-lynx-main-thread"},
"threading-main-thread": {"dfnID":"threading-main-thread","dfnText":"Main Thread","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-main-thread"}],"title":"3.3.4. Dual-threaded Model"},{"refs":[{"id":"ref-for-threading-main-thread\u2460"}],"title":"4.4.2.1. Main Thread Runtime"},{"refs":[{"id":"ref-for-threading-main-thread\u2461"},{"id":"ref-for-threading-main-thread\u2462"}],"title":"6.2.3. Main Thread Rendering"},{"refs":[{"id":"ref-for-threading-main-thread\u2463"},{"id":"ref-for-threading-main-thread\u2464"}],"title":"6.2.4. Background-driven Rendering"},{"refs":[{"id":"ref-for-threading-main-thread\u2465"}],"title":"6.3.1.1. Rendering Patterns"}],"url":"#threading-main-thread"},
"threading-off-main-thread": {"dfnID":"threading-off-main-thread","dfnText":"Off-Main-Thread","external":false,"refSections":[],"url":"#threading-off-main-thread"},
"threading-physical-thread": {"dfnID":"threading-physical-thread","dfnText":"Physical Thread","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-physical-thread"}],"title":"3.1.3. Virtual Thread"},{"refs":[{"id":"ref-for-threading-physical-thread\u2460"}],"title":"3.1.4. Threading Model (or Threading Strategy)"},{"refs":[{"id":"ref-for-threading-physical-thread\u2461"}],"title":"3.2.1. UI Thread"}],"url":"#threading-physical-thread"},
"threading-scriptable-thread": {"dfnID":"threading-scriptable-thread","dfnText":"Scriptable Thread","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-scriptable-thread"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-threading-scriptable-thread\u2460"}],"title":"3.3.3. Background Thread (a.k.a. Off-Main-Thread)"}],"url":"#threading-scriptable-thread"},
"threading-task": {"dfnID":"threading-task","dfnText":"Task","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-task"}],"title":"3.1.3. Virtual Thread"},{"refs":[{"id":"ref-for-threading-task\u2460"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-threading-task\u2461"}],"title":"3.3.3. Background Thread (a.k.a. Off-Main-Thread)"}],"url":"#threading-task"},
"threading-tasm-thread": {"dfnID":"threading-tasm-thread","dfnText":"Tasm Thread","external":false,"refSections":[],"url":"#threading-tasm-thread"},
"threading-threading": {"dfnID":"threading-threading","dfnText":"Threading","external":false,"refSections":[],"url":"#threading-threading"},
"threading-threading-model": {"dfnID":"threading-threading-model","dfnText":"Threading Model","external":false,"refSections":[],"url":"#threading-threading-model"},
"threading-threading-strategy": {"dfnID":"threading-threading-strategy","dfnText":"Threading Strategy","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-threading-strategy"}],"title":"3.3.1. Scriptable Thread"}],"url":"#threading-threading-strategy"},
"threading-ui-thread": {"dfnID":"threading-ui-thread","dfnText":"UI Thread","external":false,"refSections":[],"url":"#threading-ui-thread"},
"threading-virtual-thread": {"dfnID":"threading-virtual-thread","dfnText":"Virtual Thread","external":false,"refSections":[{"refs":[{"id":"ref-for-threading-virtual-thread"}],"title":"3.1.4. Threading Model (or Threading Strategy)"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2460"}],"title":"3.2. Virtual Thread"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2461"}],"title":"3.2.1. UI Thread"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2462"}],"title":"3.2.2. Background Scripting Thread (historically known as \"JS Thread\")"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2463"}],"title":"3.2.3. Engine Thread (historically known as \"Tasm Thread\")"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2464"},{"id":"ref-for-threading-virtual-thread\u2465"}],"title":"3.2.4. Layout Thread"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2466"}],"title":"3.3.1. Scriptable Thread"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2467"}],"title":"3.3.2. Main Thread (or Lynx Main Thread)"},{"refs":[{"id":"ref-for-threading-virtual-thread\u2468"}],"title":"3.3.3. Background Thread (a.k.a. Off-Main-Thread)"}],"url":"#threading-virtual-thread"},
"userinteraction-background-thread-event-handler": {"dfnID":"userinteraction-background-thread-event-handler","dfnText":"Background Thread Event Handler","external":false,"refSections":[],"url":"#userinteraction-background-thread-event-handler"},
"userinteraction-background-thread-event-handler-function": {"dfnID":"userinteraction-background-thread-event-handler-function","dfnText":"Background Thread Event Handler Function","external":false,"refSections":[],"url":"#userinteraction-background-thread-event-handler-function"},
"userinteraction-background-thread-event-object": {"dfnID":"userinteraction-background-thread-event-object","dfnText":"Background Thread Event Object","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-background-thread-event-object"}],"title":"10.2.2.2. Background Thread Event Handler Function"}],"url":"#userinteraction-background-thread-event-object"},
"userinteraction-event": {"dfnID":"userinteraction-event","dfnText":"Event","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-event"}],"title":"10.1.1. Event Object"},{"refs":[{"id":"ref-for-userinteraction-event\u2460"}],"title":"10.2. Event Listening"},{"refs":[{"id":"ref-for-userinteraction-event\u2461"}],"title":"10.3. Event Propagation"},{"refs":[{"id":"ref-for-userinteraction-event\u2462"}],"title":"10.3.1. Event Respond Chain"},{"refs":[{"id":"ref-for-userinteraction-event\u2463"}],"title":"10.3.2. Event Capture"},{"refs":[{"id":"ref-for-userinteraction-event\u2464"}],"title":"10.3.3. Event Bubble"},{"refs":[{"id":"ref-for-userinteraction-event\u2465"},{"id":"ref-for-userinteraction-event\u2466"}],"title":"10.3.4. Event Interception"}],"url":"#userinteraction-event"},
"userinteraction-event-bubble": {"dfnID":"userinteraction-event-bubble","dfnText":"Event Bubble","external":false,"refSections":[],"url":"#userinteraction-event-bubble"},
"userinteraction-event-capture": {"dfnID":"userinteraction-event-capture","dfnText":"Event Capture","external":false,"refSections":[],"url":"#userinteraction-event-capture"},
"userinteraction-event-handler": {"dfnID":"userinteraction-event-handler","dfnText":"Event Handler","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-event-handler"}],"title":"10.2. Event Listening"},{"refs":[{"id":"ref-for-userinteraction-event-handler\u2460"}],"title":"10.2.1.1. Main Thread Event Handler"},{"refs":[{"id":"ref-for-userinteraction-event-handler\u2461"}],"title":"10.2.1.2. Background Thread Event Handler"},{"refs":[{"id":"ref-for-userinteraction-event-handler\u2462"}],"title":"10.3. Event Propagation"}],"url":"#userinteraction-event-handler"},
"userinteraction-event-handler-function": {"dfnID":"userinteraction-event-handler-function","dfnText":"Event Handler Function","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-event-handler-function"}],"title":"10.3. Event Propagation"}],"url":"#userinteraction-event-handler-function"},
"userinteraction-event-interception": {"dfnID":"userinteraction-event-interception","dfnText":"Event Interception","external":false,"refSections":[],"url":"#userinteraction-event-interception"},
"userinteraction-event-listening": {"dfnID":"userinteraction-event-listening","dfnText":"Event Listening","external":false,"refSections":[],"url":"#userinteraction-event-listening"},
"userinteraction-event-object": {"dfnID":"userinteraction-event-object","dfnText":"Event Object","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-event-object"}],"title":"10.2.2. Event Handler Function"}],"url":"#userinteraction-event-object"},
"userinteraction-event-propagation": {"dfnID":"userinteraction-event-propagation","dfnText":"Event Propagation","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-event-propagation"}],"title":"10.3.4. Event Interception"}],"url":"#userinteraction-event-propagation"},
"userinteraction-event-respond-chain": {"dfnID":"userinteraction-event-respond-chain","dfnText":"Event Respond Chain","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-event-respond-chain"}],"title":"10.3. Event Propagation"},{"refs":[{"id":"ref-for-userinteraction-event-respond-chain\u2460"}],"title":"10.3.2. Event Capture"},{"refs":[{"id":"ref-for-userinteraction-event-respond-chain\u2461"}],"title":"10.3.3. Event Bubble"}],"url":"#userinteraction-event-respond-chain"},
"userinteraction-main-thread-event-handler": {"dfnID":"userinteraction-main-thread-event-handler","dfnText":"Main Thread Event Handler","external":false,"refSections":[],"url":"#userinteraction-main-thread-event-handler"},
"userinteraction-main-thread-event-handler-function": {"dfnID":"userinteraction-main-thread-event-handler-function","dfnText":"Main Thread Event Handler Function","external":false,"refSections":[],"url":"#userinteraction-main-thread-event-handler-function"},
"userinteraction-main-thread-event-object": {"dfnID":"userinteraction-main-thread-event-object","dfnText":"Main Thread Event Object","external":false,"refSections":[{"refs":[{"id":"ref-for-userinteraction-main-thread-event-object"}],"title":"10.2.2.1. Main Thread Event Handler Function"}],"url":"#userinteraction-main-thread-event-object"},
"userinteraction-user-interaction": {"dfnID":"userinteraction-user-interaction","dfnText":"User Interaction","external":false,"refSections":[],"url":"#userinteraction-user-interaction"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#commoninfrastructure-app": {"displayText":"app","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"app","type":"dfn","url":"#commoninfrastructure-app"},
"#commoninfrastructure-bundle": {"displayText":"bundle","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"bundle","type":"dfn","url":"#commoninfrastructure-bundle"},
"#commoninfrastructure-host-platform": {"displayText":"host platform","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"host platform","type":"dfn","url":"#commoninfrastructure-host-platform"},
"#commoninfrastructure-lazy-bundle": {"displayText":"lazy bundle","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"lazy bundle","type":"dfn","url":"#commoninfrastructure-lazy-bundle"},
"#commoninfrastructure-lynx-pipeline": {"displayText":"lynx pipeline","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"lynx pipeline","type":"dfn","url":"#commoninfrastructure-lynx-pipeline"},
"#commoninfrastructure-lynx-platform": {"displayText":"lynx platform","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"lynx platform","type":"dfn","url":"#commoninfrastructure-lynx-platform"},
"#commoninfrastructure-lynxview": {"displayText":"lynxview","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"lynxview","type":"dfn","url":"#commoninfrastructure-lynxview"},
"#commoninfrastructure-scripting-agent": {"displayText":"scripting agent","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scripting agent","type":"dfn","url":"#commoninfrastructure-scripting-agent"},
"#commoninfrastructure-structure": {"displayText":"structure","export":true,"for_":["CommonInfrastructure"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"structure","type":"dfn","url":"#commoninfrastructure-structure"},
"#elementscomponents-attribute": {"displayText":"attribute","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"attribute","type":"dfn","url":"#elementscomponents-attribute"},
"#elementscomponents-class-selector": {"displayText":"class selector","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"class selector","type":"dfn","url":"#elementscomponents-class-selector"},
"#elementscomponents-component": {"displayText":"component","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"component","type":"dfn","url":"#elementscomponents-component"},
"#elementscomponents-computed-style": {"displayText":"computed style","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"computed style","type":"dfn","url":"#elementscomponents-computed-style"},
"#elementscomponents-element": {"displayText":"element","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element","type":"dfn","url":"#elementscomponents-element"},
"#elementscomponents-element-itc": {"displayText":"element itc","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element itc","type":"dfn","url":"#elementscomponents-element-itc"},
"#elementscomponents-element-method": {"displayText":"element method","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element method","type":"dfn","url":"#elementscomponents-element-method"},
"#elementscomponents-element-operation": {"displayText":"element operation","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element operation","type":"dfn","url":"#elementscomponents-element-operation"},
"#elementscomponents-element-papi": {"displayText":"element papi","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element papi","type":"dfn","url":"#elementscomponents-element-papi"},
"#elementscomponents-element-tree": {"displayText":"element tree","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element tree","type":"dfn","url":"#elementscomponents-element-tree"},
"#elementscomponents-element-tree-operation": {"displayText":"element tree operation","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"element tree operation","type":"dfn","url":"#elementscomponents-element-tree-operation"},
"#elementscomponents-eom": {"displayText":"eom","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"eom","type":"dfn","url":"#elementscomponents-eom"},
"#elementscomponents-event-listener": {"displayText":"event listener","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event listener","type":"dfn","url":"#elementscomponents-event-listener"},
"#elementscomponents-id-selector": {"displayText":"id selector","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"id selector","type":"dfn","url":"#elementscomponents-id-selector"},
"#elementscomponents-inline-style": {"displayText":"inline style","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"inline style","type":"dfn","url":"#elementscomponents-inline-style"},
"#elementscomponents-layout-node": {"displayText":"layout node","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"layout node","type":"dfn","url":"#elementscomponents-layout-node"},
"#elementscomponents-layout-node-tree": {"displayText":"layout node tree","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"layout node tree","type":"dfn","url":"#elementscomponents-layout-node-tree"},
"#elementscomponents-layout-related-computed-style": {"displayText":"layout related computed style","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"layout related computed style","type":"dfn","url":"#elementscomponents-layout-related-computed-style"},
"#elementscomponents-paint-related-computed-style": {"displayText":"paint related computed style","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"paint related computed style","type":"dfn","url":"#elementscomponents-paint-related-computed-style"},
"#elementscomponents-platform-ui": {"displayText":"platform ui","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"platform ui","type":"dfn","url":"#elementscomponents-platform-ui"},
"#elementscomponents-platform-ui-layout-operations": {"displayText":"platform ui layout operations","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"platform ui layout operations","type":"dfn","url":"#elementscomponents-platform-ui-layout-operations"},
"#elementscomponents-platform-ui-paint-operations": {"displayText":"platform ui paint operations","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"platform ui paint operations","type":"dfn","url":"#elementscomponents-platform-ui-paint-operations"},
"#elementscomponents-platform-ui-tree": {"displayText":"platform ui tree","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"platform ui tree","type":"dfn","url":"#elementscomponents-platform-ui-tree"},
"#elementscomponents-prop-bundle": {"displayText":"prop bundle","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"prop bundle","type":"dfn","url":"#elementscomponents-prop-bundle"},
"#elementscomponents-selector": {"displayText":"selector","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"selector","type":"dfn","url":"#elementscomponents-selector"},
"#elementscomponents-tag-selector": {"displayText":"tag selector","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"tag selector","type":"dfn","url":"#elementscomponents-tag-selector"},
"#elementscomponents-ui-layout-op": {"displayText":"ui layout op","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"ui layout op","type":"dfn","url":"#elementscomponents-ui-layout-op"},
"#elementscomponents-ui-paint-op": {"displayText":"ui paint op","export":true,"for_":["ElementsComponents"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"ui paint op","type":"dfn","url":"#elementscomponents-ui-paint-op"},
"#enginepixeling-engine": {"displayText":"engine","export":true,"for_":["EnginePixeling"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"engine","type":"dfn","url":"#enginepixeling-engine"},
"#enginepixeling-layout": {"displayText":"layout","export":true,"for_":["EnginePixeling"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"layout","type":"dfn","url":"#enginepixeling-layout"},
"#enginepixeling-pixel-pipeline": {"displayText":"pixel pipeline","export":true,"for_":["EnginePixeling"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"pixel pipeline","type":"dfn","url":"#enginepixeling-pixel-pipeline"},
"#enginepixeling-pixeling": {"displayText":"pixeling","export":true,"for_":["EnginePixeling"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"pixeling","type":"dfn","url":"#enginepixeling-pixeling"},
"#enginepixeling-resolve": {"displayText":"resolve","export":true,"for_":["EnginePixeling"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"resolve","type":"dfn","url":"#enginepixeling-resolve"},
"#frameworkrendering-background-driven-rendering": {"displayText":"background-driven rendering","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"background-driven rendering","type":"dfn","url":"#frameworkrendering-background-driven-rendering"},
"#frameworkrendering-dsl": {"displayText":"dsl","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"dsl","type":"dfn","url":"#frameworkrendering-dsl"},
"#frameworkrendering-first-screen-rendering": {"displayText":"first-screen rendering","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"first-screen rendering","type":"dfn","url":"#frameworkrendering-first-screen-rendering"},
"#frameworkrendering-framework": {"displayText":"framework","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"framework","type":"dfn","url":"#frameworkrendering-framework"},
"#frameworkrendering-framework-rendering": {"displayText":"framework rendering","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"framework rendering","type":"dfn","url":"#frameworkrendering-framework-rendering"},
"#frameworkrendering-main-thread-rendering": {"displayText":"main thread rendering","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"main thread rendering","type":"dfn","url":"#frameworkrendering-main-thread-rendering"},
"#frameworkrendering-re-rendering": {"displayText":"re-rendering","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"re-rendering","type":"dfn","url":"#frameworkrendering-re-rendering"},
"#frameworkrendering-reactlynx": {"displayText":"reactlynx","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"reactlynx","type":"dfn","url":"#frameworkrendering-reactlynx"},
"#frameworkrendering-rendering": {"displayText":"rendering","export":true,"for_":["FrameworkRendering"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"rendering","type":"dfn","url":"#frameworkrendering-rendering"},
"#lynx-engine-developer": {"displayText":"engine developer","export":true,"for_":["Lynx"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"engine developer","type":"dfn","url":"#lynx-engine-developer"},
"#lynx-lynx-contributor": {"displayText":"lynx contributor","export":true,"for_":["Lynx"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"lynx contributor","type":"dfn","url":"#lynx-lynx-contributor"},
"#lynx-lynx-developer": {"displayText":"lynx developer","export":true,"for_":["Lynx"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"lynx developer","type":"dfn","url":"#lynx-lynx-developer"},
"#lynx-native-developer": {"displayText":"native developer","export":true,"for_":["Lynx"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"native developer","type":"dfn","url":"#lynx-native-developer"},
"#lynx-scripting-developer": {"displayText":"scripting developer","export":true,"for_":["Lynx"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scripting developer","type":"dfn","url":"#lynx-scripting-developer"},
"#lynx-scripting-framework-developer": {"displayText":"scripting framework developer","export":true,"for_":["Lynx"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scripting framework developer","type":"dfn","url":"#lynx-scripting-framework-developer"},
"#scripting-background-thread-runtime": {"displayText":"background thread runtime","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"background thread runtime","type":"dfn","url":"#scripting-background-thread-runtime"},
"#scripting-bts": {"displayText":"bts","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"bts","type":"dfn","url":"#scripting-bts"},
"#scripting-call": {"displayText":"call","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"call","type":"dfn","url":"#scripting-call"},
"#scripting-inter-thread-call": {"displayText":"inter thread call","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"inter thread call","type":"dfn","url":"#scripting-inter-thread-call"},
"#scripting-javascript-engine": {"displayText":"javascript engine","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"javascript engine","type":"dfn","url":"#scripting-javascript-engine"},
"#scripting-javascript-ffi": {"displayText":"javascript ffi","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"javascript ffi","type":"dfn","url":"#scripting-javascript-ffi"},
"#scripting-javascript-script": {"displayText":"javascript script","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"javascript script","type":"dfn","url":"#scripting-javascript-script"},
"#scripting-jsi": {"displayText":"jsi","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"jsi","type":"dfn","url":"#scripting-jsi"},
"#scripting-main-thread-runtime": {"displayText":"main thread runtime","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"main thread runtime","type":"dfn","url":"#scripting-main-thread-runtime"},
"#scripting-main-thread-script": {"displayText":"main thread script","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"main thread script","type":"dfn","url":"#scripting-main-thread-script"},
"#scripting-mts": {"displayText":"mts","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"mts","type":"dfn","url":"#scripting-mts"},
"#scripting-node-api": {"displayText":"node-api","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"node-api","type":"dfn","url":"#scripting-node-api"},
"#scripting-papi": {"displayText":"papi","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"papi","type":"dfn","url":"#scripting-papi"},
"#scripting-primjs-vm": {"displayText":"primjs vm","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"primjs vm","type":"dfn","url":"#scripting-primjs-vm"},
"#scripting-procedure-call": {"displayText":"procedure call","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"procedure call","type":"dfn","url":"#scripting-procedure-call"},
"#scripting-script": {"displayText":"script","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"script","type":"dfn","url":"#scripting-script"},
"#scripting-scripting": {"displayText":"scripting","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scripting","type":"dfn","url":"#scripting-scripting"},
"#scripting-scripting-engine": {"displayText":"scripting engine","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scripting engine","type":"dfn","url":"#scripting-scripting-engine"},
"#scripting-scripting-runtime-enviroment": {"displayText":"scripting runtime enviroment","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scripting runtime enviroment","type":"dfn","url":"#scripting-scripting-runtime-enviroment"},
"#scripting-worker": {"displayText":"worker","export":true,"for_":["Scripting"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"worker","type":"dfn","url":"#scripting-worker"},
"#styling-style-sheet": {"displayText":"style sheet","export":true,"for_":["Styling"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"style sheet","type":"dfn","url":"#styling-style-sheet"},
"#threading-background-scripting-thread": {"displayText":"background scripting thread","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"background scripting thread","type":"dfn","url":"#threading-background-scripting-thread"},
"#threading-background-thread": {"displayText":"background thread","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"background thread","type":"dfn","url":"#threading-background-thread"},
"#threading-dual-threaded-model": {"displayText":"dual-threaded model","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"dual-threaded model","type":"dfn","url":"#threading-dual-threaded-model"},
"#threading-main-thread": {"displayText":"main thread","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"main thread","type":"dfn","url":"#threading-main-thread"},
"#threading-physical-thread": {"displayText":"physical thread","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"physical thread","type":"dfn","url":"#threading-physical-thread"},
"#threading-scriptable-thread": {"displayText":"scriptable thread","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"scriptable thread","type":"dfn","url":"#threading-scriptable-thread"},
"#threading-task": {"displayText":"task","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"task","type":"dfn","url":"#threading-task"},
"#threading-threading-strategy": {"displayText":"threading strategy","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"threading strategy","type":"dfn","url":"#threading-threading-strategy"},
"#threading-virtual-thread": {"displayText":"virtual thread","export":true,"for_":["Threading"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"virtual thread","type":"dfn","url":"#threading-virtual-thread"},
"#userinteraction-background-thread-event-object": {"displayText":"background thread event object","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"background thread event object","type":"dfn","url":"#userinteraction-background-thread-event-object"},
"#userinteraction-event": {"displayText":"event","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event","type":"dfn","url":"#userinteraction-event"},
"#userinteraction-event-handler": {"displayText":"event handler","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event handler","type":"dfn","url":"#userinteraction-event-handler"},
"#userinteraction-event-handler-function": {"displayText":"event handler function","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event handler function","type":"dfn","url":"#userinteraction-event-handler-function"},
"#userinteraction-event-object": {"displayText":"event object","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event object","type":"dfn","url":"#userinteraction-event-object"},
"#userinteraction-event-propagation": {"displayText":"event propagation","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event propagation","type":"dfn","url":"#userinteraction-event-propagation"},
"#userinteraction-event-respond-chain": {"displayText":"event respond chain","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"event respond chain","type":"dfn","url":"#userinteraction-event-respond-chain"},
"#userinteraction-main-thread-event-object": {"displayText":"main thread event object","export":true,"for_":["UserInteraction"],"level":"1","normative":true,"shortname":"lynxlivingspec","spec":"lynxlivingspec-1","status":"local","text":"main thread event object","type":"dfn","url":"#userinteraction-main-thread-event-object"},
"https://w3c.github.io/miniapp-manifest/#dfn-pages": {"displayText":"pages","export":true,"for_":[],"level":"1","normative":true,"shortname":"miniapp-manifest","spec":"miniapp-manifest","status":"current","text":"pages","type":"dfn","url":"https://w3c.github.io/miniapp-manifest/#dfn-pages"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
    <script>
      window.addEventListener('hashchange', function() {
        window.parent.postMessage(JSON.stringify({
          src: 'living-spec',
          hash: window.location.hash,
        }), '*');
      });
    </script>